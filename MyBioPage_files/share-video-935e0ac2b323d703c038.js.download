!function(e){function t(t){for(var o,i,s=t[0],c=t[1],l=t[2],d=0,m=[];d<s.length;d++)i=s[d],r[i]&&m.push(r[i][0]),r[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);for(u&&u(t);m.length;)m.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={17:0},a=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="https://cdn.useloom.com/assets/";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;a.push([2025,1,0]),n()}({1000:function(e,t,n){e.exports=n.p+"img/success-share-a7cd73501d6944eb0dda56c225e66ef8.svg"},1001:function(e,t,n){!function(t,o){e.exports=function(e,t,n){"use strict";function o(e,t){return new Promise(function(n,o){var r,a=new Image;a.onload=function(){return n(a)},a.onerror=o,0==(null!==(r=e)&&!!r.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\-._~:@\/?%\s]*\s*$/i))&&t&&(a.crossOrigin=t),a.src=e})}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n;var r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},c=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=!("undefined"==typeof window||"undefined"==typeof navigator||!("ontouchstart"in window||navigator.msMaxTouchPoints>0)),u="undefined"!=typeof File,d={touch:{react:{down:"onTouchStart",mouseDown:"onMouseDown",drag:"onTouchMove",move:"onTouchMove",mouseMove:"onMouseMove",up:"onTouchEnd",mouseUp:"onMouseUp"},native:{down:"touchstart",mouseDown:"mousedown",drag:"touchmove",move:"touchmove",mouseMove:"mousemove",up:"touchend",mouseUp:"mouseup"}},desktop:{react:{down:"onMouseDown",drag:"onDragOver",move:"onMouseMove",up:"onMouseUp"},native:{down:"mousedown",drag:"dragStart",move:"mousemove",up:"mouseup"}}},m=l?d.touch:d.desktop,p="undefined"!=typeof window&&window.devicePixelRatio?window.devicePixelRatio:1,h=function(e){function d(){var e,t,n;r(this,d);for(var o=arguments.length,a=Array(o),c=0;c<o;c++)a[c]=arguments[c];return t=n=s(this,(e=d.__proto__||Object.getPrototypeOf(d)).call.apply(e,[this].concat(a))),n.state={drag:!1,my:null,mx:null,image:{x:.5,y:.5}},n.handleImageReady=function(e){var t=n.getInitialSize(e.width,e.height);t.resource=e,t.x=.5,t.y=.5,n.setState({drag:!1,image:t},n.props.onImageReady),n.props.onLoadSuccess(t)},n.clearImage=function(){var e=n.canvas;e.getContext("2d").clearRect(0,0,e.width,e.height)},n.handleMouseDown=function(e){(e=e||window.event).preventDefault(),n.setState({drag:!0,mx:null,my:null})},n.handleMouseUp=function(){n.state.drag&&(n.setState({drag:!1}),n.props.onMouseUp())},n.handleMouseMove=function(e){if(e=e||window.event,!1!==n.state.drag){var t=e.targetTouches?e.targetTouches[0].pageX:e.clientX,o=e.targetTouches?e.targetTouches[0].pageY:e.clientY,r={mx:t,my:o},a=n.props.rotate;if(a=(a%=360)<0?a+360:a,n.state.mx&&n.state.my){var s=n.state.mx-t,c=n.state.my-o,l=n.state.image.width*n.props.scale,u=n.state.image.height*n.props.scale,d=n.getCroppingRect(),m=d.x,p=d.y;m*=l,p*=u;var h=function(e){return e*(Math.PI/180)},f=Math.cos(h(a)),v=Math.sin(h(a)),g=p+-s*v+c*f,b={x:(m+s*f+c*v)/l+1/n.props.scale*n.getXScale()/2,y:g/u+1/n.props.scale*n.getYScale()/2};n.props.onPositionChange(b),r.image=i({},n.state.image,b)}n.setState(r),n.props.onMouseMove(e)}},n.setCanvas=function(e){n.canvas=e},s(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(d,t.Component),a(d,[{key:"componentDidMount",value:function(){var e=n.findDOMNode(this.canvas).getContext("2d");if(this.props.image&&this.loadImage(this.props.image),this.paint(e),document){var t=m.native;document.addEventListener(t.move,this.handleMouseMove,!1),document.addEventListener(t.up,this.handleMouseUp,!1),l&&(document.addEventListener(t.mouseMove,this.handleMouseMove,!1),document.addEventListener(t.mouseUp,this.handleMouseUp,!1))}}},{key:"componentWillReceiveProps",value:function(e){e.image&&this.props.image!==e.image||this.props.width!==e.width||this.props.height!==e.height?this.loadImage(e.image):e.image||this.clearImage()}},{key:"componentDidUpdate",value:function(e,t){var o=n.findDOMNode(this.canvas),r=o.getContext("2d");r.clearRect(0,0,o.width,o.height),this.paint(r),this.paintImage(r,this.state.image,this.props.border),e.image===this.props.image&&e.width===this.props.width&&e.height===this.props.height&&e.position===this.props.position&&e.scale===this.props.scale&&e.rotate===this.props.rotate&&t.my===this.state.my&&t.mx===this.state.mx&&t.image.x===this.state.image.x&&t.image.y===this.state.image.y||this.props.onImageChange()}},{key:"componentWillUnmount",value:function(){if(document){var e=m.native;document.removeEventListener(e.move,this.handleMouseMove,!1),document.removeEventListener(e.up,this.handleMouseUp,!1),l&&(document.removeEventListener(e.mouseMove,this.handleMouseMove,!1),document.removeEventListener(e.mouseUp,this.handleMouseUp,!1))}}},{key:"isVertical",value:function(){return this.props.rotate%180!=0}},{key:"getBorders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.border;return Array.isArray(e)?e:[e,e]}},{key:"getDimensions",value:function(){var e=this.props,t=e.width,n=e.height,o=e.rotate,r=e.border,a={},i=this.getBorders(r),s=c(i,2),l=s[0],u=s[1],d=t,m=n;return this.isVertical()?(a.width=m,a.height=d):(a.width=d,a.height=m),a.width+=2*l,a.height+=2*u,{canvas:a,rotate:o,width:t,height:n,border:r}}},{key:"getImage",value:function(){var e=this.getCroppingRect(),t=this.state.image;e.x*=t.resource.width,e.y*=t.resource.height,e.width*=t.resource.width,e.height*=t.resource.height;var n=document.createElement("canvas");this.isVertical()?(n.width=e.height,n.height=e.width):(n.width=e.width,n.height=e.height);var o=n.getContext("2d");return o.translate(n.width/2,n.height/2),o.rotate(this.props.rotate*Math.PI/180),o.translate(-n.width/2,-n.height/2),this.isVertical()&&o.translate((n.width-n.height)/2,(n.height-n.width)/2),o.drawImage(t.resource,-e.x,-e.y),n}},{key:"getImageScaledToCanvas",value:function(){var e=this.getDimensions(),t=e.width,n=e.height,o=document.createElement("canvas");return this.isVertical()?(o.width=n,o.height=t):(o.width=t,o.height=n),this.paintImage(o.getContext("2d"),this.state.image,0,1),o}},{key:"getXScale",value:function(){var e=this.props.width/this.props.height,t=this.state.image.width/this.state.image.height;return Math.min(1,e/t)}},{key:"getYScale",value:function(){var e=this.props.height/this.props.width,t=this.state.image.height/this.state.image.width;return Math.min(1,e/t)}},{key:"getCroppingRect",value:function(){var e=this.props.position||{x:this.state.image.x,y:this.state.image.y},t=1/this.props.scale*this.getXScale(),n=1/this.props.scale*this.getYScale(),o={x:e.x-t/2,y:e.y-n/2,width:t,height:n},r=0,a=1-o.width,s=0,c=1-o.height;return(this.props.disableBoundaryChecks||t>1||n>1)&&(r=-o.width,a=1,s=-o.height,c=1),i({},o,{x:Math.max(r,Math.min(o.x,a)),y:Math.max(s,Math.min(o.y,c))})}},{key:"loadImage",value:function(e){var t;u&&e instanceof File?(t=e,new Promise(function(e,n){var r=new FileReader;r.onload=function(t){try{var r=o(t.target.result);e(r)}catch(t){n(t)}},r.readAsDataURL(t)})).then(this.handleImageReady).catch(this.props.onLoadFailure):"string"==typeof e&&o(e,this.props.crossOrigin).then(this.handleImageReady).catch(this.props.onLoadFailure)}},{key:"getInitialSize",value:function(e,t){var n=void 0,o=void 0,r=this.getDimensions();return r.height/r.width>t/e?o=e*((n=this.getDimensions().height)/t):n=t*((o=this.getDimensions().width)/e),{height:n,width:o}}},{key:"paintImage",value:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p;if(t.resource){var r=this.calculatePosition(t,n);e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(this.props.rotate*Math.PI/180),e.translate(-e.canvas.width/2,-e.canvas.height/2),this.isVertical()&&e.translate((e.canvas.width-e.canvas.height)/2,(e.canvas.height-e.canvas.width)/2),e.scale(o,o),e.globalCompositeOperation="destination-over",e.drawImage(t.resource,r.x,r.y,r.width,r.height),e.restore()}}},{key:"calculatePosition",value:function(e,t){e=e||this.state.image;var n=this.getBorders(t),o=c(n,2),r=o[0],a=o[1],i=this.getCroppingRect(),s=e.width*this.props.scale,l=e.height*this.props.scale,u=-i.x*s,d=-i.y*l;return this.isVertical()?(u+=a,d+=r):(u+=r,d+=a),{x:u,y:d,height:l,width:s}}},{key:"paint",value:function(e){e.save(),e.scale(p,p),e.translate(0,0),e.fillStyle="rgba("+this.props.color.slice(0,4).join(",")+")";var t=this.props.borderRadius,n=this.getDimensions(),o=this.getBorders(n.border),r=c(o,2),a=r[0],i=r[1],s=n.canvas.height,l=n.canvas.width;t=Math.max(t,0),t=Math.min(t,l/2-a,s/2-i),e.beginPath(),function(e,t,n,o,r,a){if(0===a)e.rect(t,n,o,r);else{var i=o-a,s=r-a;e.translate(t,n),e.arc(a,a,a,Math.PI,1.5*Math.PI),e.lineTo(i,0),e.arc(i,a,a,1.5*Math.PI,2*Math.PI),e.lineTo(o,s),e.arc(i,s,a,2*Math.PI,.5*Math.PI),e.lineTo(a,r),e.arc(a,s,a,.5*Math.PI,Math.PI),e.translate(-t,-n)}}(e,a,i,l-2*a,s-2*i,t),e.rect(l,0,-l,s),e.fill("evenodd"),e.restore()}},{key:"render",value:function(){var e=this.props,n=(e.scale,e.rotate,e.image,e.border,e.borderRadius,e.width,e.height,e.position,e.color,e.style),o=(e.crossOrigin,e.onLoadFailure,e.onLoadSuccess,e.onImageReady,e.onImageChange,e.onMouseUp,e.onMouseMove,e.onPositionChange,e.disableBoundaryChecks,function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(e,["scale","rotate","image","border","borderRadius","width","height","position","color","style","crossOrigin","onLoadFailure","onLoadSuccess","onImageReady","onImageChange","onMouseUp","onMouseMove","onPositionChange","disableBoundaryChecks"])),r=this.getDimensions(),a={width:r.canvas.width,height:r.canvas.height,cursor:this.state.drag?"grabbing":"grab",touchAction:"none"},s={width:r.canvas.width*p,height:r.canvas.height*p,style:i({},a,n)};return s[m.react.down]=this.handleMouseDown,l&&(s[m.react.mouseDown]=this.handleMouseDown),t.createElement("canvas",i({ref:this.setCanvas},s,o))}}]),d}();return h.propTypes={scale:e.number,rotate:e.number,image:e.oneOfType([e.string].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(u?[e.instanceOf(File)]:[]))),border:e.oneOfType([e.number,e.arrayOf(e.number)]),borderRadius:e.number,width:e.number,height:e.number,position:e.shape({x:e.number,y:e.number}),color:e.arrayOf(e.number),style:e.object,crossOrigin:e.oneOf(["","anonymous","use-credentials"]),className:e.string,onLoadFailure:e.func,onLoadSuccess:e.func,onImageReady:e.func,onImageChange:e.func,onMouseUp:e.func,onMouseMove:e.func,onPositionChange:e.func,disableBoundaryChecks:e.bool},h.defaultProps={disableBoundaryChecks:!1,scale:1,rotate:0,border:25,borderRadius:0,width:200,height:200,color:[0,0,0,.5],style:{},className:"",onLoadFailure:function(){},onLoadSuccess:function(){},onImageReady:function(){},onImageChange:function(){},onMouseUp:function(){},onMouseMove:function(){},onPositionChange:function(){}},h}(n(22),n(0),n(55))}()},1002:function(e,t,n){e.exports=n.p+"img/icons/new/add-white-0c29ea9cce3ff40ec1c8623b545afd7e.svg"},1003:function(e,t,n){e.exports=n.p+"img/icons/new/minus-white-8cf55a9e3ede0e0a1aab41aa5af3a050.svg"},1004:function(e,t,n){e.exports=n.p+"img/illustrations/drag-to-reposition-7ec1ee61b9df6b7e9794c36aeeb1e97d.svg"},109:function(e,t,n){"use strict";n.d(t,"j",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"h",function(){return i}),n.d(t,"a",function(){return s}),n.d(t,"i",function(){return c}),n.d(t,"b",function(){return l}),n.d(t,"k",function(){return u}),n.d(t,"d",function(){return d}),n.d(t,"f",function(){return m}),n.d(t,"e",function(){return p}),n.d(t,"g",function(){return h}),n.d(t,"l",function(){return f});var o=n(3),r=function(){return{type:o.pc}},a=function(){return{type:o.r}},i=function(){return{type:o.oc}},s=function(){return{type:o.q}},c=function(){return{type:o.tc}},l=function(){return{type:o.v}},u=function(){return{type:o.vc}},d=function(){return{type:o.y}},m=function(){return{type:o.Y}},p=function(){return{type:o.O}},h=function(e,t){return{type:o.Lb,url:e,dims:t}},f=function(){return{type:o.Ic}}},12:function(e,t,n){"use strict";n.d(t,"h",function(){return r}),n.d(t,"a",function(){return a}),n.d(t,"i",function(){return i}),n.d(t,"j",function(){return s}),n.d(t,"k",function(){return c}),n.d(t,"l",function(){return l}),n.d(t,"m",function(){return u}),n.d(t,"n",function(){return d}),n.d(t,"s",function(){return m}),n.d(t,"t",function(){return p}),n.d(t,"u",function(){return h}),n.d(t,"y",function(){return f}),n.d(t,"C",function(){return v}),n.d(t,"D",function(){return g}),n.d(t,"E",function(){return b}),n.d(t,"F",function(){return _}),n.d(t,"G",function(){return y}),n.d(t,"H",function(){return w}),n.d(t,"I",function(){return C}),n.d(t,"K",function(){return E}),n.d(t,"L",function(){return k}),n.d(t,"M",function(){return T}),n.d(t,"N",function(){return N}),n.d(t,"O",function(){return S}),n.d(t,"P",function(){return O}),n.d(t,"J",function(){return j}),n.d(t,"Q",function(){return M}),n.d(t,"R",function(){return x}),n.d(t,"S",function(){return I}),n.d(t,"U",function(){return A}),n.d(t,"V",function(){return L}),n.d(t,"W",function(){return D}),n.d(t,"e",function(){return R}),n.d(t,"g",function(){return U}),n.d(t,"c",function(){return F}),n.d(t,"d",function(){return P}),n.d(t,"b",function(){return H}),n.d(t,"f",function(){return B}),n.d(t,"r",function(){return V}),n.d(t,"v",function(){return z}),n.d(t,"w",function(){return W}),n.d(t,"x",function(){return G}),n.d(t,"z",function(){return q}),n.d(t,"B",function(){return K}),n.d(t,"A",function(){return J}),n.d(t,"q",function(){return Y}),n.d(t,"o",function(){return Q}),n.d(t,"p",function(){return X}),n.d(t,"T",function(){return Z});n(40);var o=n(3),r=function(e,t){return{type:o.n,rootIsPublic:e,rootFolderId:t}},a=function(){return{type:o.b}},i=function(){return{type:o.o}},s=function(){return{type:o.F}},c=function(){return{type:o.G}},l=function(){return{type:o.H}},u=function(){return{type:o.K}},d=function(){return{type:o.L}},m=function(e){return{type:o.tb,id:e}},p=function(){return{type:o.Fb}},h=function(){return{type:o.Gb}},f=function(e){return{type:o.dc,id:e}},v=function(e){return{type:o.Pc,allVideosFetched:e}},g=function(e){return{type:o.Tc,breadcrumbs:e}},b=function(e){return{type:o.Xc,checkedItems:e}},_=function(e){return{type:o.gd,specialId:e.specialId,favorite:e.favorite,id:e.id,name:e.name,description:e.description,parentId:e.parentId,ownerId:e.ownerId,shared:e.shared}},y=function(e){return{type:o.jd,draggingMultiple:e}},w=function(e){return{type:o.od,favorites:e}},C=function(e){return{type:o.td,pending:e}},E=function(e){return{type:o.qd,folders:e}},k=function(e){return{type:o.rd,err:e}},T=function(e){return{type:o.sd,hierarchy:e}},N=function(e){return{type:o.Dd,archived:e}},S=function(e){return{type:o.Ed,favorite:e}},O=function(e){return{type:o.Gd,isJTBD:e}},j=function(e){return{type:o.ud,folder:e}},M=function(e){return{type:o.Wd,past:e}},x=function(e){return{type:o.ne,show:e}},I=function(e){return{type:o.qe,folders:e}},A=function(e){return{type:o.De,videos:e}},L=function(e){return{type:o.Ee,err:e}},D=function(e){return{type:o.Fe,videos:e}},R=function(){return{type:o.k}},U=function(e){return{type:o.m,name:e}},F=function(){return{type:o.i}},P=function(e,t,n){return{type:o.j,parent_folder_id:e,folder_name:t,local_id:n}},H=function(){return{type:o.h,name:name}},B=function(e){return{type:o.l,folder:e}};function V(){return{type:o.Nb}}function z(e){return{type:o.Mb,error:e}}function W(e,t){return{type:o.Ob,id:e,name:t}}function G(e){return{type:o.Qb,folderId:e}}function q(e){return{type:o.Jc,error:e}}function K(e){return{type:o.Lc,folderId:e}}function J(e){return{type:o.Kc,id:e}}function Y(){return{type:o.R}}function Q(e){return{type:o.P,description:e}}function X(){return{type:o.Q}}function Z(e){return{type:o.re,count:e}}},121:function(e,t,n){"use strict";n(574),n(397),n(209),n(40),n(215);var o=n(2),r=n.n(o),a=n(9),i=n.n(a),s=n(15),c=n.n(s),l=(n(54),n(26)),u=n.n(l),d=n(21),m=n.n(d),p=n(104),h=n(109),f=n(25),v=n(60),g=n(34),b=n(12),_=n(20),y=n(16),w=n(24),C=n(35),E=n(23),k=n(14),T="flipped_camera",N=n(101),S=n(17),O=n(19),j=n(117),M=n(37);function x(e){return function(){var t=u()(c.a.mark(function t(n,o){var r,a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m()("/v1/videos/".concat(e),{credentials:"include"});case 3:if(!((r=t.sent).status>=400)){t.next=7;break}return r.status===w.g?window.location.href=k.z:window.location.href=k.E,t.abrupt("return");case 7:return t.next=9,r.json();case 9:a=t.sent,n(Object(v.c)(a)),j.j(o()),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),O.b(t.t0,"Error fetching from /v1/videos"),window.location.href=k.E;case 18:case"end":return t.stop()}},t,this,[[0,14]])}));return function(e,n){return t.apply(this,arguments)}}()}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t,n){var o=n().share_video.video;if(null!=e&&null!=o)return t(Object(v.c)(i()({},o,{name:e}))),j.j(n()),m()("/v1/videos/".concat(o.id),{credentials:"include",headers:r()({},w.b,E.b),method:"PATCH",body:JSON.stringify({name:e})}).then(function(e){if(e.status>=400)throw new Error("Oops! Error updating video name - HTTP response: ".concat(e.status))}).catch(function(e){O.b(e,"error in share page update video name creator"),t(Object(f.b)(_.a,e.toString())),t(Object(v.c)(o))})}}function A(){return function(e,t){var n=t().share_video,o=n.cta_enabled,a=n.cta_text,i=n.cta_url,s=n.cta_mods,c=n.video,l=a;o&&!a&&(l="Click Here!");var u={enabled:o,text:l,url:i,mods:s};return m()("/v1/videos/".concat(c.id),{credentials:"include",headers:r()({},w.b,E.b),method:"PATCH",body:JSON.stringify({cta:u})}).then(function(e){if(e.status>=400)throw new Error("Oops! Error updating video cta - HTTP response: ".concat(e.status))}).catch(function(t){O.b(t,"error in share page update video cta creator"),e(Object(f.b)(_.a,t.toString())),e(Object(v.c)(c))})}}function L(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(o,a){o(Object(b.R)(!1));var i,s=a().share_video.video.id,c=a().share_video,l=c.video_folders,u=c.video,d=l.slice(-1)[0].id;return i=null!=n?JSON.stringify({folder_id:e,archived:n}):JSON.stringify({folder_id:e}),m()("/v1/videos/".concat(s),{credentials:"include",headers:r()({},w.b,E.b),method:"PATCH",body:i}).then(function(e){if(e.status>=400)throw new Error("Oops! Error moving video: ".concat(u.name," ")+"- HTTP response: ".concat(e.status));return e.json()}).then(function(r){S.h(y.Gb,{archiving:n,current_folder_id:d,new_folder_id:e,video_name:r.name,id:s}),o(Object(p.b)("".concat(u.name," successfully moved to ").concat(t))),o(Object(v.s)(r.folders))}).catch(function(e){O.b(e,"error in share page move video creator"),o(Object(f.b)(_.a,e.toString()))})}}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;if(t)return function(n){var o=(new Date).getTime(),a=JSON.stringify({parent_folder_id:e,name:t||void 0,local_id:o});return n(Object(N.c)(M.a,!0)),n(Object(b.d)(e,t,o)),m()("/v1/folders",{credentials:"include",headers:r()({},w.b,E.b),method:"POST",body:a}).then(function(e){if(e.status>=400)throw new Error("Oops! Error creating folder - HTTP response: ".concat(e.status));return e.json()}).then(function(e){n(Object(b.f)(e))}).catch(function(e){n(Object(b.b)()),O.b(e,"error in create folder creator"),n(Object(f.b)(_.a,e.toString()))})}}function R(e,t){return function(n,o){var a=o().share_video.video;if(null!=a)return m()("/v1/videos/".concat(a.id),{credentials:"include",headers:r()({},w.b,E.b),method:"PATCH",body:JSON.stringify(i()({},e,{password:t}))}).then(function(e){if(e.status>=400)throw new Error("Oops! Error updating video - HTTP response: ".concat(e.status));return e.json()}).then(function(t){n(Object(v.c)(t)),n(Object(g.U)(t)),window.top.postMessage(r()({type:C.w},T,e[T]),"*")}).catch(function(e){O.b(e,"error in updateVideoSettings creator"),n(Object(f.b)(_.a,e.toString()))})}}function U(){return function(e,t){try{var n=t().share_video,o=n.password,r=n.video;if(null==r||r.is_protected&&null==o)return j.c();j.i(r.id,o,function(t){e(Object(v.d)(t))})}catch(e){O.b(e,"error fetching share video download url")}}}function F(e){return function(){var t=u()(c.a.mark(function t(n){var o;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m()("/v1/videos/".concat(e),{credentials:"include",headers:r()({},w.b,E.b),method:"PATCH",body:JSON.stringify({archived:!0})});case 3:if(!((o=t.sent).status>=400)){t.next=6;break}throw new Error("Oops! Error archiving video - HTTP response: ".concat(o.status));case 6:window.location.href="".concat(k.w).concat(k.y),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),O.b(t.t0,"error archiving share video"),n(Object(f.b)(_.a,t.t0.toString()));case 13:case"end":return t.stop()}},t,this,[[0,9]])}));return function(e){return t.apply(this,arguments)}}()}function P(e){return function(){var t=u()(c.a.mark(function t(n){var o;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m()("/v1/videos/".concat(e),{credentials:"include",headers:r()({},w.b,E.b),method:"DELETE",body:JSON.stringify({archived:!0})});case 3:if(!((o=t.sent).status>=400)){t.next=6;break}throw new Error("Oops! Error deleting video - HTTP response: ".concat(o.status));case 6:window.location.href="".concat(k.w).concat(k.y),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),O.b(t.t0,"error deleting share video"),n(Object(f.b)(_.a,t.t0.toString()));case 13:case"end":return t.stop()}},t,this,[[0,9]])}));return function(e){return t.apply(this,arguments)}}()}function H(e,t,n){return function(o){o(Object(h.l)());var r=function(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],o=atob(t[1]),r=o.length,a=new Uint8Array(r);r--;)a[r]=o.charCodeAt(r);return new Blob([a],{type:n})}(t);if(r.size>4e6)return o(Object(f.b)(_.a,"Selected file too big. Max 4 MB. Please try again.")),void o(Object(h.l)());var a=new FormData;return a.append("thumbnail",r),a.append("dims",JSON.stringify(n)),m()("/v1/videos/".concat(e),{method:"PATCH",credentials:"include",body:a}).then(function(e){if(e.status>=400)throw new Error("got a bad response status: ".concat(e.status));return o(Object(h.l)()),o(Object(p.b)("New thumbnail saved")),o(Object(h.e)()),e.json()}).then(u()(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o(x(e));case 2:window.top.postMessage({type:C.m,id:e},"*");case 3:case"end":return t.stop()}},t,this)}))).catch(function(e){o(Object(f.b)(_.a,"Oops! Failed to update video thumbnail.")),O.b(e,"Error in POST to /v1/videos/thumbnail")})}}function B(e){return function(t){return m()("/v1/videos/".concat(e),{method:"PATCH",headers:r()({},w.b,E.b),credentials:"include",body:JSON.stringify({thumbnails:null})}).then(function(e){if(e.status>=400)throw new Error("got a bad response status: ".concat(e.status));return t(Object(p.b)("Thumbnail deleted")),e.json()}).then(u()(c.a.mark(function n(){return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(x(e));case 2:window.top.postMessage({type:C.m,id:e},"*");case 3:case"end":return n.stop()}},n,this)}))).catch(function(e){t(Object(f.b)(_.a,"Oops! Failed to remove video thumbnail.")),O.b(e,"Error in POST to /v1/videos/thumbnail")})}}n.d(t,"e",function(){return x}),n.d(t,"i",function(){return I}),n.d(t,"h",function(){return A}),n.d(t,"f",function(){return L}),n.d(t,"b",function(){return D}),n.d(t,"j",function(){return R}),n.d(t,"d",function(){return U}),n.d(t,"a",function(){return F}),n.d(t,"c",function(){return P}),n.d(t,"k",function(){return H}),n.d(t,"g",function(){return B})},145:function(e,t,n){e.exports=n.p+"img/use-cases/consulting-1fa9d39226f7fc18b2d90874d64b92d6.svg"},146:function(e,t,n){e.exports=n.p+"img/use-cases/customer-success-ac18218707eee3c9acfd7007bcbfa24b.svg"},147:function(e,t,n){e.exports=n.p+"img/use-cases/education-861133941a92fb04ecf4c6e94f848b69.svg"},148:function(e,t,n){e.exports=n.p+"img/use-cases/engineering-b70db08484b26acc47dc9d9a2511337f.svg"},149:function(e,t,n){e.exports=n.p+"img/use-cases/leadership-b540982c896b34734be082f644d556e6.svg"},150:function(e,t,n){e.exports=n.p+"img/use-cases/marketing-8278f0c340b78ec1bc8b2d2745c133c4.svg"},151:function(e,t,n){e.exports=n.p+"img/use-cases/product-36dc43df1ecd3c7631559b9c0bb66f50.svg"},152:function(e,t,n){e.exports=n.p+"img/use-cases/personal-70a77c3cda3495c4d0246a07a30af34e.svg"},153:function(e,t,n){e.exports=n.p+"img/use-cases/sales-43044e13c1290e173712abb528947d4f.svg"},156:function(e,t,n){},157:function(e,t,n){e.exports=n.p+"img/icons/avatar-placeholder-d5f94766773cea3a9b8f6c549ef9f535.svg"},164:function(e,t,n){},171:function(e,t,n){},172:function(e,t,n){var o={"./down.png":82,"./down@2x.png":83,"./down@3x.png":84,"./gradient.png":85,"./joy.png":86,"./joy@2x.png":72,"./joy@3x.png":87,"./love.png":88,"./love@2x.png":69,"./love@3x.png":89,"./nervous.png":90,"./nervous@2x.png":91,"./nervous@3x.png":92,"./up.png":93,"./up@2x.png":94,"./up@3x.png":95,"./wow.png":96,"./wow@2x.png":73,"./wow@3x.png":97,"./yay.png":98,"./yay@2x.png":74,"./yay@3x.png":99};function r(e){var t=a(e);return n(t)}function a(e){var t=o[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(o)},r.resolve=a,e.exports=r,r.id=172},173:function(e,t,n){e.exports=n.p+"img/notifications/chat-eab61eedc1d01f5a8d488f04725dfe8f.svg"},174:function(e,t,n){},175:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},179:function(e,t,n){},180:function(e,t,n){},187:function(e,t,n){e.exports={"font-tiny-bold":"connect-buttons_font-tiny-bold_1Cu","font-tiny":"connect-buttons_font-tiny_13R","font-small-bold":"connect-buttons_font-small-bold_3sN","font-small":"connect-buttons_font-small_B7W","font-regular-bold":"connect-buttons_font-regular-bold_392","font-regular":"connect-buttons_font-regular_o99","font-large-bold":"connect-buttons_font-large-bold_qHt","font-large":"connect-buttons_font-large_1yt","font-title":"connect-buttons_font-title_3Ei","font-title-bold":"connect-buttons_font-title-bold_Isk","font-header":"connect-buttons_font-header_3Qu","font-header-bold":"connect-buttons_font-header-bold_1kf",container:"connect-buttons_container_1E0",connectButton:"connect-buttons_connectButton_3pw",googleButton:"connect-buttons_googleButton_3Px",googleIcon:"connect-buttons_googleIcon_1cZ",slackButton:"connect-buttons_slackButton_sac",outlookIcon:"connect-buttons_outlookIcon_1aI",slackIcon:"connect-buttons_slackIcon_2AB",emailIcon:"connect-buttons_emailIcon_24v",secondaryOptions:"connect-buttons_secondaryOptions_X01",outlook:"connect-buttons_outlook_13B",email:"connect-buttons_email_3hi",buttonContents:"connect-buttons_buttonContents_3l9",icon:"connect-buttons_icon_grT"}},189:function(e,t,n){},190:function(e,t,n){},191:function(e,t,n){},192:function(e,t,n){},193:function(e,t,n){e.exports=n.p+"img/notifications/play-13e21700e44c72488694b29f965917aa.svg"},194:function(e,t,n){e.exports=n.p+"img/notifications/trim-331dba53763895786ebd76995a0c10fa.svg"},195:function(e,t,n){e.exports=n.p+"img/notifications/graph-76798a0d49f8df5d1fbab98507528c2f.svg"},196:function(e,t,n){e.exports=n.p+"img/notifications/emoji-9f1f9c4d8763cfdc324d58d337dec6ed.svg"},197:function(e,t,n){},198:function(e,t,n){},199:function(e,t,n){},200:function(e,t,n){e.exports=n.p+"img/icons/comments-avatar-placeholder-ad20a7c4f0d515a74b4147a61bf5f43f.svg"},2025:function(e,t,n){n(133),n(2163),e.exports=n(135)},2026:function(e,t,n){},2027:function(e,t,n){},2028:function(e,t,n){},2029:function(e,t,n){},2030:function(e,t,n){},2031:function(e,t,n){},2032:function(e,t,n){},2033:function(e,t,n){},2034:function(e,t,n){},2035:function(e,t,n){},2036:function(e,t,n){},2037:function(e,t,n){},2038:function(e,t,n){},2039:function(e,t,n){},2040:function(e,t,n){},2041:function(e,t,n){},2042:function(e,t,n){},2043:function(e,t,n){},2044:function(e,t,n){},2045:function(e,t,n){},2046:function(e,t,n){},2047:function(e,t,n){},2048:function(e,t,n){},2049:function(e,t,n){},2050:function(e,t,n){},2051:function(e,t,n){},2052:function(e,t,n){},2053:function(e,t,n){},2054:function(e,t,n){},2055:function(e,t,n){},2056:function(e,t,n){},2057:function(e,t,n){},2058:function(e,t,n){},2059:function(e,t,n){},2060:function(e,t,n){},2061:function(e,t,n){},2062:function(e,t,n){},2063:function(e,t,n){},2064:function(e,t,n){},2065:function(e,t,n){},2066:function(e,t,n){},2067:function(e,t,n){},2068:function(e,t,n){},2069:function(e,t,n){},2070:function(e,t,n){},2071:function(e,t,n){},2072:function(e,t,n){},2073:function(e,t,n){},2074:function(e,t,n){},2075:function(e,t,n){},2076:function(e,t,n){},2077:function(e,t,n){},2078:function(e,t,n){},2079:function(e,t,n){},2080:function(e,t,n){},2081:function(e,t,n){},2082:function(e,t,n){},2083:function(e,t,n){},2084:function(e,t,n){},2085:function(e,t,n){},2086:function(e,t,n){},2087:function(e,t,n){},2088:function(e,t,n){},2089:function(e,t,n){},2090:function(e,t,n){},2091:function(e,t,n){},2092:function(e,t,n){},2093:function(e,t,n){},2163:function(e,t,n){"use strict";n.r(t);var o,r,a=n(28),i=n.n(a),s=n(0),c=n.n(s),l=n(55),u=n(10),d=n(62),m=n.n(d),p=n(25),h=n(80),f=n(59),v=n(20),g=n(38),b=n(63),_=n(158),y=n(19),w=n(64),C=n(29),E=n(65),k=n(39),T=(n(106),n(40),n(9)),N=n.n(T),S=n(15),O=n.n(S),j=(n(54),n(26)),M=n.n(j),x=(n(124),n(4)),I=n.n(x),A=n(5),L=n.n(A),D=n(6),R=n.n(D),U=n(7),F=n.n(U),P=n(8),H=n.n(P),B=n(1),V=n.n(B),z=n(2),W=n.n(z),G=n(130),q=n.n(G),K=n(542),J=n.n(K),Y=n(109),Q=n(71),X=n(185),Z=n(76),$=n(60),ee=n(288),te=n(16),ne=n(35),oe=n(56),re=n(46),ae=n(254),ie=n(14),se=n(48),ce=n(265),le=n(235),ue=n(101),de=n(121),me=n(204),pe=n(53),he=n(17),fe=n(219),ve=n(36),ge=n(57),be=n(297),_e=n(987),ye=n.n(_e),we=(n(81),n(134),n(246),n(209),n(44)),Ce=n.n(we),Ee=n(34),ke=n(298),Te=n(456),Ne=(n(2026),function(e){return c.a.createElement("div",{className:"upload-progress-loading-panel"},c.a.createElement("div",{className:"upload-progress-check"}),c.a.createElement("div",{className:"upload-progress-container"},c.a.createElement("div",{className:"upload-progress-bar",style:{transform:"translateX(".concat(-100+e.progress,"%)")}})))}),Se=(n(2027),0),Oe=function(){window.clearInterval(o),o=null},je=function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"state",{wasUploadMode:!1,isFlippedThumb:!1}),W()(V()(V()(n)),"onSocketReady",function(){var e=window.location.pathname.split("/").pop();n.websocket.send(JSON.stringify({type:ke.b,subscription_data:{type:ke.d,video_id:e}}))}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.posterUrl,n=e.inUploadMode,o=e.videoUploadProgress,r=Ce()("upload-progress",{active:n,"is-completed":100===o}),a=Ce()("loading-thumbnail-image",{flipped:this.state.isFlippedThumb});return c.a.createElement("div",{className:r},c.a.createElement("div",{className:a,style:{backgroundImage:"url(".concat(t,")")}}),";",c.a.createElement(Ne,{progress:o}))}},{key:"componentDidMount",value:function(){this.setupUpdateSocket()}},{key:"shouldComponentUpdate",value:function(e){return e.posterUrl!==this.props.posterUrl||e.isFetching!==this.props.isFetching||e.inUploadMode!==this.props.inUploadMode||e.videoUploadProgress!==this.props.videoUploadProgress}},{key:"componentWillUnmount",value:function(){this.websocket&&this.websocket.close(),o&&Oe()}},{key:"setupUpdateSocket",value:function(){var e=this,t=function(t){var n=new Image;n.onload=function(){return e.props.updateVideoPlayerPosterUrl(t)},n.src=t};this.websocket=new Te.a(ie.x+ke.a),this.websocket.ready(this.onSocketReady),this.websocket.onMessage(function(){var n=M()(O.a.mark(function n(r){var a,i;return O.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a=r.data,i=JSON.parse(a)){n.next=4;break}return n.abrupt("return");case 4:if(i.isFlippedThumb&&!e.state.isFlippedThumb&&e.setState({isFlippedThumb:i.isFlippedThumb}),i.thumbUrl&&t(i.thumbUrl),!0!==i.noUpload){n.next=10;break}return e.props.toggleUploadMode(!1),e.props.handleFetchVideo(),n.abrupt("return",e.websocket.close());case 10:if(i.packetsSent<3&&e.setupSimulatedProgress(),Se=Math.max(Se,i.progress),e.props.onUploadVideoProgress(Se),!0!==i.done){n.next=19;break}return o&&Oe(),n.next=17,Promise.all([e.props.handleFetchVideo(),new Promise(function(e){return setTimeout(e,1800)})]);case 17:return e.props.toggleUploadMode(!1),n.abrupt("return",e.websocket.close());case 19:e.state.inUploadProgressMode||(e.props.toggleUploadMode(!0),e.setState({wasUploadMode:!0}));case 20:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()),this.websocket.onError(function(t){e.props.toggleUploadMode(!1),e.props.handleFetchVideo(),console.error("ws error",t)})}},{key:"setupSimulatedProgress",value:function(){var e=this;Se=0,o=setInterval(function(){Se+=10,e.props.onUploadVideoProgress(Se),Se>=90&&Oe()},2e3)}}]),t}(c.a.Component),Me=Object(u.connect)(function(e){var t=e.video_player,n=t.poster_url,o=t.is_fetching,r=e.share_video,a=r.video_upload_progress;return{inUploadMode:r.in_upload_mode,videoUploadProgress:a,isFetching:o,posterUrl:n}},function(e){return{onUploadVideoProgress:function(t){return e(Object($.r)(t))},toggleUploadMode:function(t){return e(Object($.g)(t))},updateVideoPlayerPosterUrl:function(t){return e(Object(Ee.N)(t))}}})(je),xe=n(143),Ie=n(37),Ae=n(384),Le=n(443),De=n(75),Re=n(444),Ue=n(103),Fe=n(454),Pe=n(388),He=n(236),Be=function(e){function t(){return I()(this,t),R()(this,F()(t).apply(this,arguments))}return H()(t,e),L()(t,[{key:"render",value:function(){return c.a.createElement(He.a,{show:!0,showClose:!1,onDismiss:this.props.onClose},c.a.createElement(Pe.a,null))}}]),t}(s.Component),Ve=n(386),ze=(n(465),n(155),n(215),n(275),n(276),n(11)),We=n.n(ze),Ge=n(3),qe=function(){return{type:Ge.E}},Ke=function(e){return{type:Ge.Nc,err:e}},Je=function(e){return{type:Ge.Mc,err:e}},Ye=function(e){return{type:Ge.Oc,addReplyId:e}},Qe=function(e){return{type:Ge.ad,comments:e}},Xe=function(e){return{type:Ge.ld,expandedIds:e}},Ze=function(e){return{type:Ge.pd,fetchingError:e}},$e=function(e){return{type:Ge.Fd,isFetching:e}},et=n(24),tt=n(23);r="www.".concat("useloom.com");"https://".concat(r,"/use-cases");var nt="https://".concat(r),ot=("".concat(r,"/welcome"),function(e){return"".concat(nt,"/share/").concat(e)});var rt=n(392),at=n.n(rt),it=n(266),st=n.n(it),ct=n(228),lt=(n(225),n(988)),ut=n.n(lt),dt=n(237),mt=n.n(dt),pt=n(61),ht=n.n(pt),ft=n(348),vt=n(79),gt=n(167),bt=["a","b","br","p","div","u","i","span"],_t=["href","data-seconds","class","target"],yt=function(e){return ht.a.updateLocale("en",Object(gt.c)()),"".concat(ht()().from(e,!0))},wt=function(e){if(e.preventDefault(),e.stopPropagation(),e.target.className.indexOf("external-link")>-1)return Object(C.e)(e.target.href);var t=e.target.getAttribute("data-seconds");if(t){var n=Number(t);return window.top.postMessage({type:ne.e,numSeconds:n},"*"),!1}},Ct=function(e){return ht()(e.createdAt).isBefore("2018-02-15T22:00:00-0000")?e.content:ut.a.sanitize(e.content,{ALLOWED_TAGS:bt,ALLOWED_ATTR:_t})},Et=function(e,t,n){return!!t||(n.is_logged_in?e.user_id===n.current.id:mt.a.get(ft.a)===e.anon_user_id)},kt=function(e,t,n,o,r){var a=i()(n)[0];if(a){var s=document.createElement("div"),c="<span class='mention' contentEditable=\"false\">".concat(r).concat(e.name,"</span> ");return s.innerHTML=a.innerHTML,s.lastChild&&s.lastChild.innerText?(s.lastChild.innerText=s.lastChild.innerText.slice(0,-1*t.length),s.lastChild.innerHTML="".concat(s.lastChild.innerHTML).concat(c)):(s.innerHTML=s.innerHTML.slice(0,-1*t.length),s.innerHTML="".concat(s.innerHTML).concat(c)),a.innerHTML=s.innerHTML,Object(vt.k)(a),N()({},o,W()({},"".concat(r).concat(e.name),"".concat(r).concat(e.id)))}},Tt="video-timestamp",Nt=n(50),St=function(e){return jt(Mt(e.value().trim())).replace(/<p>&nbsp;<\/p>/g,"")},Ot=function(e){var t=/^www/.test(e)?"//".concat(e):e;return'<a target="_blank" class="external-link" href="'.concat(t,'">').concat(e,"</a>")},jt=function(e){var t=i()("<div></div>").html(e);return t.find(".external-link").replaceWith(function(){return i()(this).text()}),t.html().replace(Nt.e,Ot)},Mt=function(e){var t=i()("<div></div>").html(e);return t.find(".".concat(Tt)).replaceWith(function(){return i()(this).text()}),t.html().replace(Nt.c,function(e){var t=e;2===t.split(":").length&&(t="00:".concat(e));var n=ht.a.duration(t).asSeconds();return['<a href="#" class="'.concat(Tt,'" data-seconds="').concat(n,'">'),"".concat(e,"</a>")].join("")})},xt=n(68),It=(n(2028),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"state",{editing:!1,input_val:""}),W()(V()(V()(n)),"onChange",function(e){return n.setState({input_val:e.target.value})}),W()(V()(V()(n)),"onKeyDown",function(e){switch(e.keyCode){case xt.e:n.validateAndInsertTimestamp();break;case xt.f:n.resetTimestamp()}}),W()(V()(V()(n)),"resetTimestamp",function(){n.setState({editing:!1}),n.props.updateCommentsTimestampFrozen(!1)}),W()(V()(V()(n)),"validateAndInsertTimestamp",function(){var e=n.props.duration;if(null!=n.input){var t=n.input.value;if(Nt.i.test(t)){if(null!==e&&t>e)return n.resetTimestamp();n.props.updateCommentsTimestamp(t),n.setState({editing:!1})}else try{var o=Object(gt.a)(n.input.value);if(null!==e&&o>e)return n.resetTimestamp();n.props.updateCommentsTimestamp(o),n.setState({editing:!1})}catch(e){n.resetTimestamp()}}}),W()(V()(V()(n)),"switchToEditingMode",function(){var e=n.props.timestamp;n.setState({input_val:e}),n.setState({editing:!0}),n.props.updateCommentsTimestampFrozen(!0)}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.commentsEnabled,o=t.duration,r=t.timestamp,a=t.companyFeatureData,i=t.currentUserIsOwner,s=(a||{}).brand_primary_color,l=this.state,u=l.editing,d=l.input_val,m=s&&!i?{borderBottom:"1px solid ".concat(s)}:null,p="";return n||(p="comments-disabled"),c.a.createElement("div",{className:"time-handler"},u?c.a.createElement("input",{autoFocus:!0,type:"text",className:"timestamp-edit",ref:function(t){return e.input=t},onBlur:this.validateAndInsertTimestamp,onFocus:this.moveCaretAtEnd,onKeyDown:this.onKeyDown,onChange:this.onChange,value:d,maxLength:"8"}):c.a.createElement("span",{className:"playback-timestamp ".concat(p),style:m,onClick:this.switchToEditingMode},Object(gt.b)(r)),c.a.createElement("span",{className:"playback-duration"}," / ".concat(Object(gt.b)(Math.round(o)))))}},{key:"moveCaretAtEnd",value:function(e){var t=e.target.value;e.target.value="",e.target.value=t}}]),t}(s.Component)),At=Object(u.connect)(function(e){var t=e.comments,n=t.time_stamp_frozen,o=t.time_stamp,r=e.share_video.video,a=r.video_properties.duration;return{commentsEnabled:r.comments_enabled,duration:a,timestamp:o,timestampFrozen:n,companyFeatureData:r.company_feature_data,currentUserIsOwner:e.share_video.current_user_is_owner}},function(e){return{updateCommentsTimestamp:function(t){return e(function(e){return{type:Ge.bd,timestamp:e}}(t))},updateCommentsTimestampFrozen:function(t){return e(function(e){return{type:Ge.cd,frozen:e}}(t))}}})(It),Lt=n(137),Dt=n(18),Rt=n(52),Ut=(n(2029),{anon_user_name:"",anon_user_name_error:null,guest_name_box:!1}),Ft=function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"state",Ut),W()(V()(V()(n)),"addComment",function(){var e=n.state.anon_user_name;e?(n.props.updateAnonUserName(e),n.props.addComment()):n.setState({anon_user_name_error:"Please enter a valid name"})}),W()(V()(V()(n)),"updateAnonUserName",function(e){n.setState({anon_user_name_error:null}),n.setState({anon_user_name:e})}),W()(V()(V()(n)),"resetNoGuestFlow",function(){n.setState(Ut)}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.state,t=e.anon_user_name,n=e.anon_user_name_error,o=this.props.buttonStyle;return c.a.createElement("div",{className:"guest-name-box"},c.a.createElement("span",{className:"back-guest",onClick:this.props.resetNoGuestFlow},"back"),n&&c.a.createElement("p",{className:"error"},n),c.a.createElement(Rt.a,{inputClass:"guest-name-input",fieldValue:t,fieldId:"guest-name-input",fieldLabel:"Full Name",severity:n?"error":"",onChange:this.updateAnonUserName,onEnter:this.onCompanyEnter}),c.a.createElement(Dt.a,{buttonClass:"guest-submit",style:o,buttonType:"rp-primary-4",value:"Post",onClicked:this.addComment}))}},{key:"componentDidMount",value:function(){var e=Object(Lt.a)();this.props.updateAnonUserName(e),this.setState({anon_user_name:e,guest_name_box:!0,log_in:!1})}}]),t}(s.Component),Pt=Object(u.connect)(null,function(e){return{updateAnonUserName:function(t){return e(function(e){return{type:Ge.Qc,anonUserName:e}}(t))}}})(Ft),Ht=n(211),Bt=(n(409),n(102)),Vt=n.n(Bt),zt=n(345),Wt=(n(2030),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"state",{query:"",visible:!1,suggestions:[],selection:0}),W()(V()(V()(n)),"handleDropDownSelection",function(){var e=n.state,t=e.suggestions,o=e.selection,r=e.query,a=n.props.trigger,i=t[o];n.setState({visible:!1,suggestions:[],query:""}),n.props.handleSelection({result:i,query:r},a)}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.suggestions,o=t.visible,r=t.selection,a=t.query,i=this.props,s=i.title,l=i.showTrigger,u=i.trigger,d=a&&a.slice(this.props.trigger.length);if(!n||0===n.length||!o)return c.a.createElement("div",null);var m=n.map(function(t,n){var o=t.name,a=t.username,i=t.avatar,s=c.a.createElement("span",{className:"emphasis"},"".concat(l?u:"").concat(o.slice(0,d.length))),m=o.slice(d.length),p=r===n?" selected":"";return!o||a||i?c.a.createElement("div",{className:"dm-row".concat(p),key:n,onMouseDown:function(){return e.handleDropDownSelection()},onMouseOver:function(){return e.setState({selection:n})}},c.a.createElement("img",{src:i,className:"photo"}),c.a.createElement("div",{className:"name"},s,m),c.a.createElement("div",{className:"username"},a)):c.a.createElement("div",{className:"name-only".concat(p),onMouseDown:function(){return e.handleDropDownSelection()},onMouseOver:function(){return e.setState({selection:n})},key:n},s,m)});return c.a.createElement("div",{className:"mentions-drop-down",style:{},ref:function(t){return e.menu=t}},c.a.createElement("div",{className:"title"},s),m)}},{key:"componentDidUpdate",value:function(e,t){if(this.menu&&this.props.selfPositioning){var n=Object(vt.d)(window),o=n.x,r=n.y;o&&r&&(this.menu.style.left="".concat(o,"px"),this.menu.style.top="".concat(r+28,"px"))}if(t.query!==this.state.query){var a=this.props.suggestions,i=void 0===a?[]:a,s=this.state,c=s.query,l=s.visible,u=i.filter(function(e){return e.name.toLowerCase().startsWith(c.slice(1).toLowerCase())});u&&0!==u.length?l&&this.setState({suggestions:u}):this.setState({visible:!1})}}},{key:"componentDidMount",value:function(){var e=this.props.editorClass,t=this;Object(zt.a)(function(){i()(e).each(function(){this&&(this.addEventListener("keydown",function(e){var n=t.state,o=n.suggestions,r=n.selection,a=n.visible,i=n.query,s=o.length-1;if(a){switch(e.key){case"ArrowDown":r===s?t.setState({selection:0}):t.setState({selection:r+1});break;case"ArrowUp":0===r?t.setState({selection:s}):t.setState({selection:r-1});break;case"Enter":a&&r<=s?t.handleDropDownSelection():t.setState({visible:!1,query:""});break;case"Backspace":return a&&i.slice(-1)===t.props.trigger&&t.setState({visible:!1,selection:0,suggestions:[]}),void(0===i.length?t.setState({visible:!1,suggestions:[]}):t.setState({query:i.slice(0,-1)}));case"Escape":t.setState({visible:!1,selection:0,suggestions:[]});break;default:return}e.preventDefault()}}),this.addEventListener("keypress",function(e){var n=t.state,o=n.query;n.visible?t.setState({query:"".concat(o).concat(e.key)}):e.key===t.props.trigger&&t.setState({visible:!0,query:t.props.trigger})}))})})}},{key:"handleClickOutside",value:function(e){this.state.visible&&!i()(e.target).parents(".mentions-drop-down").length&&this.setState({visible:!1})}}]),t}(s.PureComponent)),Gt=Vt()(Wt),qt=function(e){function t(){return I()(this,t),R()(this,F()(t).apply(this,arguments))}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.listeneeClass,n=e.slack,o=e.onMentionClick,r=n.team_info;return r?c.a.createElement("div",null,c.a.createElement(Gt,{title:"People",editorClass:i()(t),trigger:"@",handleSelection:o,selfPositioning:!0,suggestions:r.people.map(function(e){return{username:e.name,name:e.profile.real_name||e.name,avatar:e.profile.image_72,id:e.id}})}),c.a.createElement(Gt,{title:"Channel",editorClass:i()(t),trigger:"#",showTrigger:!0,handleSelection:o,selfPositioning:!0,suggestions:r.channels.map(function(e){return{name:e.name,id:e.id}})})):null}},{key:"UNSAFE_componentWillMount",value:function(){var e=this.props.slack;e.team_info||e.fetching||this.props.getSlackInfoCreator()}},{key:"componentDidMount",value:function(){var e=this,t=i()(this.props.listeneeClass);t[0]&&t[0].addEventListener("keydown",function(){e.forceUpdate()})}}]),t}(s.Component),Kt=Object(u.connect)(function(e){return{slack:e.slack}},function(e){return{getSlackInfoCreator:function(){return e(Object(Ht.a)())}}})(qt),Jt=(n(2031),function(e){function t(){return I()(this,t),R()(this,F()(t).apply(this,arguments))}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props.url;return c.a.createElement("div",{className:"add-url-to-video"},c.a.createElement("div",{className:"add-url-to-video-text",onClick:this.props.onClickAdd},c.a.createElement("span",null,"Add link to page you recorded on?"),c.a.createElement("span",null,e)),c.a.createElement("span",{className:"close",onClick:this.props.onClickClose}))}}]),t}(c.a.PureComponent)),Yt=Object(u.connect)(function(e){return{url:e.share_video.url_for_display}})(Jt);n(2032);var Qt=function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"state",{did_mount:!1,add_comment_active:!1,comment_mentions:{},show_add_link_bar:!1,render_add_link_bar:!0}),W()(V()(V()(n)),"handleCommentClickThroughAreaClick",function(){n.props.commentsEnabled&&n.addCommentContent.focus()}),W()(V()(V()(n)),"handleAddLinkToDescription",function(){var e=n.props.video,t=e.id,o=e.video_properties.from_url,r=void 0===o?null:o;if(null!=r){he.h(te.cc,{has_content:n.stripMediumContent().trim().length>0,video_id:t});var a="<div>".concat(r,"</div>");n.medium.value(n.medium.value()+a),n.validateComment(),n.setState({show_add_link_bar:!1})}}),W()(V()(V()(n)),"handleCloseAddLinkBar",function(e){n.setState({show_add_link_bar:!1,render_add_link_bar:e})}),W()(V()(V()(n)),"addComment",function(){var e=n.props,t=e.isInGuestFlow,o=e.isLoggedIn;if(e.commentsEnabled){var r=n.stripMediumContent();if(0!==r.length){if(!o&&!t)return n.props.updateInGuestFlow(!0);n.props.addComment(r,n.medium,n.state.comment_mentions),n.props.updateInGuestFlow(!1),n.setState({comment_mentions:{}})}else n.props.updateAddCommentError("Cannot be empty")}}),W()(V()(V()(n)),"stripMediumContent",function(){if(null!=n.medium)return St(n.medium)}),W()(V()(V()(n)),"resetGuestFlow",function(){n.props.updateInGuestFlow(!1)}),W()(V()(V()(n)),"validateComment",function(){n.setState({add_comment_active:n.addCommentContent&&""!==n.addCommentContent.innerText}),n.props.updateAddCommentError(null),n.medium.html.placeholders()}),W()(V()(V()(n)),"addMousetrapBindings",function(){st()(n.addCommentContent).bind([ct.b,ct.a],function(){n.addComment()})}),W()(V()(V()(n)),"addMention",function(e,t){var o=e.result,r=e.query;n.setState({comment_mentions:kt(o,r,".add-comment-content",n.state.comment_mentions,t)})}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.did_mount,o=t.add_comment_active,r=this.props,a=r.commentsEnabled,i=r.errorAddComment,s=r.isFetching,l=r.isInGuestFlow,u=r.currentUserIsOwner,d=a?"":"comments-disabled",m=o?"is-active":"",p=i?"error":"",h=(r.companyFeatureData||{}).brand_primary_color,f=function(e){if(e){var t=e.replace(/#/,""),n=1-(.299*parseInt(t.substr(0,2),16)+.587*parseInt(t.substr(2,2),16)+.114*parseInt(t.substr(4,2),16))/255<.4?0:255;return"rgb(".concat(n,", ").concat(n,", ").concat(n,")")}}(h),v=h&&!u?{borderColor:h,backgroundColor:h,color:f}:null,g=v?{color:h}:null,b="error"===p&&g?{border:"1px solid ".concat(h)}:null,_=this.state.show_add_link_bar?"":"hidden";return c.a.createElement(c.a.Fragment,null,this.props.showAddLinkBar&&c.a.createElement("div",{className:"add-url-to-video-root ".concat(_)},c.a.createElement(Yt,{onClickAdd:this.handleAddLinkToDescription,onClickClose:this.handleCloseAddLinkBar})),c.a.createElement("div",{style:b,className:"add-comment ".concat(d," ").concat(p," ").concat(l?"hidden-content":"")},l&&c.a.createElement(Pt,{buttonStyle:v,addComment:this.addComment,resetNoGuestFlow:this.resetGuestFlow}),c.a.createElement("div",{className:"add-comment-content",ref:function(t){return e.addCommentContent=t},onInput:this.validateComment}),c.a.createElement("div",{className:"add-comment-actions ".concat(l?"hidden":"")},c.a.createElement("div",{className:"add-comments-click-through-area",onClick:this.handleCommentClickThroughAreaClick}),c.a.createElement("div",{className:"save-and-time"},i&&c.a.createElement("span",{className:"validation-error-react",style:g},i),!i&&c.a.createElement(At,null),c.a.createElement(Dt.a,{buttonClass:"add-comment-button ".concat(d," ").concat(m),ref:function(t){return e.button=t},style:v,buttonType:"rp-primary-4",disabled:s||!m||!a,value:"Post",onClicked:this.addComment}))),n&&c.a.createElement(Kt,{onMentionClick:this.addMention,listeneeClass:".add-comment-content"})))}},{key:"componentDidMount",value:function(){this.medium=new at.a({attributes:null,autofocus:!1,autoHR:!1,element:this.addCommentContent,mode:at.a.richMode,maxLength:Nt.f,pasteAsText:!1,placeholder:"Write a comment",tags:null}),this.addMousetrapBindings(),this.setState({did_mount:!0});var e=this.props,t=e.currentUserIsOwner,n=e.video,o=this.stripMediumContent();t&&null!=n&&0===o.length&&this.setState({show_add_link_bar:!0})}},{key:"componentDidUpdate",value:function(){this.medium.settings.maxLength=this.props.commentsEnabled?Nt.f:0}}]),t}(s.Component),Xt=Object(u.connect)(function(e){var t=e.share_video,n=t.current_user_is_owner,o=t.url_for_display,r=t.video,a=r.comments_enabled,i=r.company_feature_data,s=e.comments,c=s.error_add_comment,l=s.is_fetching,u=s.in_guest_flow,d=s.comments,m=e.user.is_logged_in,p=d.every(function(e){return-1===e.content.indexOf(o)}),h=Boolean(r.video_properties.from_url);return{commentsEnabled:a,showAddLinkBar:!l&&n&&p&&a&&h,errorAddComment:c,isFetching:l,isInGuestFlow:u,isLoggedIn:m,companyFeatureData:i,currentUserIsOwner:n,video:r}},function(e){return{addComment:function(t,n,o){return e(function(e,t,n){return function(o,r){o($e(!0));var a=r(),s=a.comments,c=a.share_video,l=c.video.id,u=c.password,d=s.anon_user_name,m=s.comments,h=s.time_stamp,f=h>0?"?t=".concat(h,"s"):"",g={content:e,password:u,time_stamp:h,user_name:d.length>0?d:null,video_id:l,mentions:{text:"".concat(i()(".add-comment-content")[0].innerText," ").concat(ot(l)).concat(f),mentions:n}};return fetch("/v1/auth/anon_username",{credentials:"include",headers:W()({},et.b,tt.b),method:"PATCH",body:JSON.stringify({user_name:d})}),fetch("/v1/comments/post",{credentials:"include",headers:W()({},et.b,tt.b),method:"POST",body:JSON.stringify(g)}).then(function(e){if(e.status>=400)throw new Error("Error adding comment - HTTP response: ".concat(e.status));return e.json()}).then(function(e){t.value("");var r=m.concat(e).sort(function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)});o(Qe(r)),he.h(te.Zb,{comment_id:e.id,video_id:l,mentions:Object.keys(n).length}),o($e(!1))}).catch(function(e){o(Je(e.toString().substring(0,12))),y.b(e,"error in addCommentCreator"),o(Object(p.b)(v.a,e.toString())),o($e(!1))})}}(t,n,o))},updateInGuestFlow:function(t){return e(function(e){return{type:Ge.Bd,inGuestFlow:e}}(t))},updateAddCommentError:function(t){return e(Je(t))}}})(Qt),Zt=n(118),$t=n(200),en=n.n($t),tn=n(434),nn=n.n(tn),on=(n(2033),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"state",{did_mount:!1,add_reply_enabled:!1,comment_mentions:{}}),W()(V()(V()(n)),"addMention",function(e,t){var o=e.result,r=e.query;n.setState({comment_mentions:kt(o,r,".add-reply-content",n.state.comment_mentions,t)})}),W()(V()(V()(n)),"addReply",function(){var e=n.props,t=e.comment,o=e.isInGuestFlowReply,r=e.isLoggedIn,a=n.stripMediumContent();if(0!==a.length){if(!r&&!o)return n.props.updateInGuestFlowReply(!0);n.props.addReply(a,t.id,n.state.comment_mentions),n.props.updateInGuestFlowReply(!1),n.setState({comment_mentions:{}})}else n.props.updateAddReplyError("Cannot be empty")}),W()(V()(V()(n)),"stripMediumContent",function(){if(null!=n.medium)return St(n.medium)}),W()(V()(V()(n)),"resetGuestFlow",function(){n.props.updateInGuestFlowReply(!1)}),W()(V()(V()(n)),"addMousetrapBindings",function(){st()(n.addReplyContent).bind([ct.b,ct.a],function(){n.addReply()})}),W()(V()(V()(n)),"onKeyUp",function(e){e.keyCode!==xt.c&&e.keyCode!==xt.d&&(e.keyCode,xt.e)}),W()(V()(V()(n)),"validateReply",function(){n.setState({add_reply_enabled:n.addReplyContent&&""!==n.addReplyContent.innerText}),n.props.updateAddReplyError(null),n.medium.html.placeholders()}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.errorAddReply,o=t.isFetching,r=t.isInGuestFlowReply,a=t.brandColor,i=this.state,s=i.did_mount,l=i.add_reply_enabled,u=n?"error":"",d=l?"is-active":"";return c.a.createElement("div",{className:"add-reply-view ".concat(r?"hidden-content":"")},r&&c.a.createElement(Pt,{buttonStyle:a?{backgroundColor:a}:null,addComment:this.addReply,resetNoGuestFlow:this.resetGuestFlow}),c.a.createElement("div",{className:"add-reply-box ".concat(u)},c.a.createElement("div",{className:"add-reply-content",tabIndex:"-1",ref:function(t){return e.addReplyContent=t},onKeyUp:this.onKeyUp,onInput:this.validateReply}),c.a.createElement("div",{className:"add-reply-actions ".concat(r?"hidden":"")},c.a.createElement("div",{className:"click-through-area",onClick:function(){return e.addReplyContent.focus()}}),c.a.createElement("div",{className:"add-reply-actions-save"},n&&c.a.createElement("span",{className:"validation-error-react"},n),c.a.createElement(Dt.a,{buttonClass:d,style:a?{backgroundColor:a}:null,buttonType:"rp-primary-4",disabled:o||!l,value:"Post",onClicked:this.addReply})))),s&&c.a.createElement(Kt,{onMentionClick:this.addMention,listeneeClass:".add-reply-content"}))}},{key:"componentDidMount",value:function(){this.medium=new at.a({attributes:null,autofocus:!1,autoHR:!1,element:this.addReplyContent,mode:at.a.richMode,maxLength:Nt.f,pasteAsText:!1,placeholder:"Reply to comment",tags:null}),this.addMousetrapBindings(),this.setState({did_mount:!0})}}]),t}(s.Component)),rn=Object(u.connect)(function(e){var t=e.comments;return{errorAddReply:t.error_add_reply,isFetching:t.is_fetching,isInGuestFlowReply:t.in_guest_flow_reply,isLoggedIn:e.user.is_logged_in}},function(e){return{addReply:function(t,n,o){return e(function(e,t,n){return function(o,r){var a=r(),s=a.comments,c=a.share_video,l=c.video.id,u=c.password,d=s.anon_user_name,m=s.comments,h=s.time_stamp,f={content:e,password:u,time_stamp:h,user_name:d.length>0?d:null,comment_post_id:t,video_id:l,mentions:{text:"".concat(i()(".add-reply-content")[0].innerText," ").concat(ot(l)),mentions:n}};return fetch("/v1/comments/reply",{credentials:"include",headers:W()({},et.b,tt.b),method:"POST",body:JSON.stringify(f)}).then(function(e){if(e.status>=400)throw new Error("Error adding reply - HTTP response: ".concat(e.status));return e.json()}).then(function(e){var r=N()({},We.a.find(m,{id:e.comment_post_id})),a=We.a.findIndex(m,{id:r.id}),i=m.slice(0);r.replies=(r.replies||[]).concat(N()({},e,{force_show:!0})),i.splice(a,1,r),o(Qe(i)),o(Ye(null)),he.h(te.ac,{comment_id:t,video_id:l,mentions:Object.keys(n).length})}).catch(function(e){o(Ke(e.toString().substring(0,12))),y.b(e,"error in addReplyCreator"),o(Object(p.b)(v.a,e.toString()))})}}(t,n,o))},updateAddReplyError:function(t){return e(Ke(t))},updateInGuestFlowReply:function(t){return e(function(e){return{type:Ge.Cd,inGuestFlowReply:e}}(t))}}})(on),an=(n(2034),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"deleteReply",function(){var e=n.props.reply;window.confirm("Are you sure you want to delete this reply?")&&n.props.deleteReply(e)}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.currentUserIsOwner,n=e.companyFeatureData,o=e.reply,r=e.user,a=o.avatar&&o.avatar.thumb,i=(n||{}).brand_primary_color,s=!t&&i?{color:i}:null;return c.a.createElement("div",{className:"reply-container"},c.a.createElement("hr",null),a&&c.a.createElement("img",{src:Object(Zt.b)(a),className:"reply-avatar"}),!a&&c.a.createElement("img",{src:en.a,className:"reply-avatar"}),c.a.createElement("div",{className:"comment-reply"},c.a.createElement("div",{className:"reply-header"},c.a.createElement("div",{className:"user-name"}," ",o.user_name," ")),c.a.createElement("div",{className:"reply-content-section",dangerouslySetInnerHTML:{__html:Ct(o)},onClick:wt}),c.a.createElement("div",{className:"actions-section"},Et(o,t,r)&&c.a.createElement("span",{className:"delete-reply",onClick:this.deleteReply,style:s},"Delete"),c.a.createElement("span",{className:"reply-date-section"},yt(o.createdAt)))))}}]),t}(s.Component)),sn=Object(u.connect)(function(e){var t=e.share_video,n=e.user;return{currentUserIsOwner:t.current_user_is_owner,companyFeatureData:t.video.company_feature_data,user:n}},function(e){return{deleteReply:function(t){return e(function(e){return function(t,n){var o=n().share_video.password,r=n().comments,a=r.comments,i=r.expanded_ids;return fetch("/v1/comments/reply/".concat(e.id),{credentials:"include",headers:W()({},et.b,tt.b),method:"DELETE",body:JSON.stringify({password:o})}).then(function(e){if(e.status>=400)throw new Error("Error deleting comment - HTTP response: ".concat(e.status))}).then(function(){var n=N()({},We.a.find(a,{id:e.comment_post_id})),o=We.a.findIndex(a,{id:n.id}),r=a.slice(0);n.replies=We.a.without(n.replies,e),r.splice(o,1,n),t(Qe(r)),0===n.replies.length&&t(Xe(We.a.without(i,e.comment_post_id)))}).catch(function(e){y.b(e,"error in deleteReplyCreator"),t(Object(p.b)(v.a,e.toString()))})}}(t))}}})(an),cn=(n(2035),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"state",{scroll_to_add_reply:!1}),W()(V()(V()(n)),"onCommentContentClick",function(e){e.target.className===Tt&&n.handleClickTimestamp(e)}),W()(V()(V()(n)),"handleClickTimestamp",function(e){window.scrollTo({top:0}),wt.call(e.target,e)}),W()(V()(V()(n)),"deleteComment",function(){var e=n.props.comment;window.confirm("Are you sure you want to delete this comment?")&&n.props.deleteComment(e.id)}),W()(V()(V()(n)),"showAddReply",function(){var e=n.props.comment;n.setState({scroll_to_add_reply:!0}),n.props.updateAddReplyId(e.id)}),W()(V()(V()(n)),"showReplies",function(){var e=n.props,t=e.comment,o=e.expandedIds;n.props.updateExpandedReplyIds(o.concat(t.id))}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.addReplyId,n=e.comment,o=e.commentsEnabled,r=e.commentList,a=e.companyFeatureData,i=e.currentUserIsOwner,s=e.user,l=n.replies&&n.replies.map(function(e){return c.a.createElement(sn,{key:e.id,reply:e})}),u=n.avatar&&n.avatar.thumb;u=u?Object(Zt.b)(u):en.a,n.anon_user_id==Ie.g&&(u=nn.a);var d=(a||{}).brand_primary_color,m=d&&!i?{color:d}:null;return c.a.createElement("div",null,c.a.createElement("div",{className:"post-container"},c.a.createElement("img",{src:u,className:"comment-avatar"}),c.a.createElement("div",{className:"comment-post","data-seconds":n.time_stamp},c.a.createElement("div",{className:"comment-header"},c.a.createElement("div",{className:"user-name"}," ",n.user_name," "),c.a.createElement("div",{className:"timestamp"},c.a.createElement("a",{href:"#",className:Tt,style:m,onClick:this.handleClickTimestamp,"data-seconds":n.time_stamp},Object(gt.b)(n.time_stamp)))),c.a.createElement("div",{className:"content-section",dangerouslySetInnerHTML:{__html:Ct(n)},onClick:this.onCommentContentClick}),o&&c.a.createElement("div",{className:"actions-section"},c.a.createElement("div",{className:"right"},Et(n,i,s)&&c.a.createElement("span",{className:"delete",style:m,onClick:this.deleteComment},"Delete"),c.a.createElement("span",{className:"show-add-reply",style:m,onClick:this.showAddReply},"Reply"),c.a.createElement("span",{className:"date-section"},yt(n.createdAt)))),o&&l&&l.length>0&&c.a.createElement("hr",null),o&&l,o&&t===n.id&&c.a.createElement(rn,{comment:n,brandColor:i?null:d}))),r.length>1&&We.a.last(r).id!==n.id&&c.a.createElement("hr",null))}},{key:"componentDidUpdate",value:function(){if(this.state.scroll_to_add_reply){var e=i()(".container-comments"),t=i()(".add-reply-content");t[0]&&(e.animate({scrollTop:e.scrollTop()-e.offset().top+t.offset().top-45},1e3),t[0].focus(),this.setState({scroll_to_add_reply:!1}))}}}]),t}(s.Component)),ln=Object(u.connect)(function(e){var t=e.comments,n=e.share_video,o=e.user,r=t.add_reply_id,a=t.comments,i=n.current_user_is_owner,s=n.video;return{addReplyId:r,commentsEnabled:s.comments_enabled,commentList:a,companyFeatureData:s.company_feature_data,currentUserIsOwner:i,user:o}},function(e){return{deleteComment:function(t){return e(function(e){return function(t,n){t($e(!0));var o=n().share_video.password,r=n().comments.comments;return fetch("/v1/comments/post/".concat(e),{credentials:"include",headers:W()({},et.b,tt.b),method:"DELETE",body:JSON.stringify({password:o})}).then(function(e){if(e.status>=400)throw new Error("Error deleting comment - HTTP response: ".concat(e.status))}).then(function(){var n=We.a.find(r,{id:e}),o=We.a.without(r,n).sort(function(e,t){return e.time_stamp-t.time_stamp});t(Qe(o)),t($e(!1))}).catch(function(e){y.b(e,"error in deleteCommentCreator"),t(Object(p.b)(v.a,e.toString())),t($e(!1))})}}(t))},updateAddReplyId:function(t){return e(Ye(t))},updateExpandedReplyIds:function(t){return e(Xe(t))}}})(cn),un=(n(2036),function(e){function t(){return I()(this,t),R()(this,F()(t).apply(this,arguments))}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.comments,n="";e.commentsEnabled||(n="comments-disabled");var o=t.map(function(e){return c.a.createElement(ln,{key:e.id,comment:e})});return c.a.createElement("div",{className:"container-comments ".concat(n)},o)}}]),t}(s.Component)),dn=Object(u.connect)(function(e){return{comments:e.comments.comments,commentsEnabled:e.share_video.video.comments_enabled}})(un),mn=(n(2037),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"fetchCommentsAndSendMarkers",M()(O.a.mark(function e(){var t,o,r;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props,o=t.video,r=t.password,!(null==o||o.needs_password&&null==r)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,n.props.fetchComments();case 5:n.sendMarkers();case 6:case"end":return e.stop()}},e,this)}))),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.comments,n=e.hasFetched,o=e.video,r=e.password;return null==o||o.needs_password&&!r?null:c.a.createElement("div",{className:"comments-view"},c.a.createElement(Xt,null),t.length>0&&n&&c.a.createElement(dn,null))}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.password,o=t.video;window.top.addEventListener("message",function(t){switch(t.data.type){case ne.g:case ne.l:e.fetchCommentsAndSendMarkers()}},!1),null==o||o.needs_password&&!n||this.fetchCommentsAndSendMarkers()}},{key:"componentDidUpdate",value:function(e){var t=e.comments,n=e.hasFetched,o=e.iframeLoaded,r=e.password,a=e.video,i=this.props,s=i.comments,c=i.hasFetched,l=i.iframeLoaded,u=i.password,d=i.video;if(null!=d)return null==d||null!=a||d.needs_password?d.needs_password&&null==r&&null!=u?this.fetchCommentsAndSendMarkers():l&&!o?this.sendMarkers():void(t.length!==s.length&&n===c&&this.sendMarkers()):this.fetchCommentsAndSendMarkers()}},{key:"sendMarkers",value:function(){var e=this.props,t=e.comments;if(e.iframeLoaded){var n=t.map(function(e){return{time:e.time_stamp}});window.top.postMessage({type:ne.b,markers:n},"*")}}}]),t}(s.Component)),pn=Object(u.connect)(function(e){var t=e.share_video,n=t.password,o=t.video,r=e.comments;return{comments:r.comments,hasFetched:r.has_fetched,password:n,video:o}},function(e){return{fetchComments:function(){return e(function(){return function(e,t){e(qe());var n=t().share_video,o={video_id:n.video.id,password:n.password};return fetch("/v1/comments",{credentials:"include",headers:W()({},et.b,tt.b),method:"POST",body:JSON.stringify(o)}).then(function(e){if(e.status>=400)throw new Error("Error fetching comments - HTTP response: ".concat(e.status));return e.json()}).then(function(t){e(Qe(t))}).catch(function(t){y.b(t,"error in fetchCommentsCreator"),e(Ze(t.toString())),e(Object(p.b)(v.a,t.toString()))})}}())}}})(mn),hn=n(186),fn=n(163),vn=(n(305),n(22)),gn=n.n(vn),bn=n(125),_n=n(314),yn=n(346),wn=(n(2038),function(e){function t(e){var n;return I()(this,t),n=R()(this,F()(t).call(this,e)),W()(V()(V()(n)),"createEmojiReaction",function(e){window.postMessage({type:ne.a,reaction:{type:e.type}},"*"),n.props.isLoggedIn||Object(Lt.a)()||n.setState({showUsernameInput:!0,showEmojiBar:!1})}),W()(V()(V()(n)),"showUsername",function(){q()({targets:n.inputElement.parentNode,opacity:[0,1],duration:300,easing:"linear"}).finished.then(function(){n.inputElement.focus()})}),W()(V()(V()(n)),"hideUsername",function(){return q()({targets:n.inputElement.parentNode,opacity:[1,0],duration:300,easing:"linear"}).finished.then(function(){n.setState({showEmojiBar:!0})})}),W()(V()(V()(n)),"onBlur",function(){window.clearTimeout(n.onChangeDebounceTimer),n.changeUsername(event.target.value)}),W()(V()(V()(n)),"onKeyDown",function(e){"Enter"==e.key&&(window.clearTimeout(n.onChangeDebounceTimer),n.changeUsername(e.target.value)),"Escape"==e.key&&n.setState({showUsernameInput:!1})}),W()(V()(V()(n)),"onInputChange",function(e){var t=e.target.value;window.clearTimeout(n.onChangeDebounceTimer),n.onChangeDebounceTimer=window.setTimeout(function(){n.changeUsername(t)},1e3)}),W()(V()(V()(n)),"changeUsername",function(e){n.setState({showUsernameInput:!1}),e&&n.props.onChangeUsername(e)}),n.state={time:0,showUsernameInput:!1,showEmojiBar:!0},n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.hideReaction,o=t.duration;return c.a.createElement("div",{className:"export-bar-emoji-bar-container"},this.state.showEmojiBar&&c.a.createElement("div",{className:"emoji-bar",ref:function(t){return e.emojiBar=t}},Object.values(fn.e).map(function(t){return c.a.createElement(_n.a,{key:t,duration:o,time:Number(e.state.time),show:n!=t,type:t,onClick:Object(ze.throttle)(e.createEmojiReaction,500)})})),c.a.createElement(yn.a,{show:this.state.showUsernameInput,onDidMount:this.showUsername,onWillUnmount:this.hideUsername},c.a.createElement("div",{className:"emoji-bar-username-input"},c.a.createElement("input",{ref:function(t){return e.inputElement=t},type:"text",placeholder:"Your name",onKeyDown:this.onKeyDown,onChange:this.onInputChange,onBlur:this.onBlur}))))}}]),t}(s.Component));wn.propTypes={hideReaction:gn.a.string,onClickEmoji:gn.a.func};var Cn=Object(u.connect)(function(e){return{isLoggedIn:e.user.is_logged_in}},function(e){return{onClickEmoji:function(t){return e(Object(bn.b)(t))},onChangeUsername:function(t){return e(Object(bn.g)(t))}}})(wn),En=(n(2039),function(e){function t(){return I()(this,t),R()(this,F()(t).apply(this,arguments))}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props.showEmojiBar;return c.a.createElement("div",{className:"share-video-action-bar"},e&&c.a.createElement(Cn,{hideReaction:fn.d}))}}]),t}(s.Component)),kn=(n(2040),function(e){function t(){return I()(this,t),R()(this,F()(t).apply(this,arguments))}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.currentUserIsOwner,n=e.useEmojis,o=Boolean(n&&!t&&!ve.f);return c.a.createElement("div",{className:"share-video-export-bar"},c.a.createElement("div",{className:"export-bar-section"},c.a.createElement(En,{showEmojiBar:o})))}}]),t}(s.Component)),Tn=n(47),Nn=(n(2041),function(e){function t(){return I()(this,t),R()(this,F()(t).apply(this,arguments))}return H()(t,e),L()(t,[{key:"render",value:function(){var e=null!=this.props.currentTrimRange,t=e?"enabled":"",n=e?this.props.onCancelCurrentTrimRange:null;return c.a.createElement("div",{className:"trim-bar-button trim-bar-cancel-trim-button ".concat(t),onClick:n},c.a.createElement("span",{className:"icon"}),c.a.createElement("span",{className:"label"},"Cancel"))}}]),t}(s.Component)),Sn=(n(2042),function(e){function t(){return I()(this,t),R()(this,F()(t).apply(this,arguments))}return H()(t,e),L()(t,[{key:"render",value:function(){var e=null!=this.props.selectedTrimRange,t=e?"enabled":"",n=e?this.props.onDiscardTrimRange:null;return c.a.createElement("div",{className:"trim-bar-button trim-bar-discard-trim-button ".concat(t),onClick:n},c.a.createElement("span",{className:"icon"}),c.a.createElement("span",{className:"label"},"Remove Trim"))}}]),t}(s.Component)),On=n(697),jn=n.n(On),Mn=function(e){function t(){return I()(this,t),R()(this,F()(t).apply(this,arguments))}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props.position,t=void 0===e?"topLeft":e,n=Ce()(jn.a.actionDot,jn.a[t]);return c.a.createElement("div",{className:n})}}]),t}(c.a.PureComponent),xn=(n(2043),function(e){function t(){return I()(this,t),R()(this,F()(t).apply(this,arguments))}return H()(t,e),L()(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"trim-bar-button trim-bar-end-current-trim-range-button enabled",onClick:this.props.onEndCurrentTrimRange},this.props.showActionDot&&c.a.createElement(Mn,{position:"top-left"}),c.a.createElement("span",{className:"icon"}),c.a.createElement("span",{className:"label"},"Remove"))}}]),t}(s.Component)),In=(n(2044),function(e){function t(){return I()(this,t),R()(this,F()(t).apply(this,arguments))}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.currentTrimRange,n=e.newTrimChanges,o=e.showActionDot,r=null==t&&n,a=r?"enabled":"",i=r?this.props.onPublishChanges:null;return c.a.createElement("div",{className:"trim-bar-button ".concat(this.constructor.className," ").concat(a),onClick:i},o&&c.a.createElement(Mn,{position:"top-left"}),c.a.createElement("span",{className:"icon"}),c.a.createElement("span",{className:"label"},"Publish Changes"))}}]),t}(s.Component));W()(In,"className","trim-bar-publish-changes-button");var An=In,Ln=(n(2045),function(e){function t(){return I()(this,t),R()(this,F()(t).apply(this,arguments))}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.currentTrimRange,n=e.redoStack;return null==t&&n.length>0?c.a.createElement("div",{className:"trim-bar-button trim-bar-redo-button enabled",onClick:this.props.onRedoTrim},c.a.createElement("span",{className:"icon"}),c.a.createElement("span",{className:"label"},"Redo")):null}}]),t}(s.Component)),Dn=n(128),Rn=(n(2046),"left"),Un=100,Fn=function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"deactivateBoundTimeout",null),W()(V()(V()(n)),"mousePressKickInTimeout",null),W()(V()(V()(n)),"mousePressTimeout",null),W()(V()(V()(n)),"state",{mouse_pressed:!1}),W()(V()(V()(n)),"decrementTime",function(){n.stepTime(-1*Un,n.decrementTime)}),W()(V()(V()(n)),"incrementTime",function(){n.stepTime(Un,n.incrementTime)}),W()(V()(V()(n)),"activateTrimBound",M()(O.a.mark(function e(){var t,o;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.time,window.clearTimeout(n.deactivateBoundTimeout),o=n.props.half===Rn?Tn.h:Tn.i,e.next=5,n.props.updateSelectedTrimBoundCreator(o);case 5:t===n.props.time&&n.setDeactivateBoundTimeout();case 6:case"end":return e.stop()}},e,this)}))),W()(V()(V()(n)),"clearMousePressTimeout",function(){window.clearTimeout(n.mousePressKickInTimeout),window.clearTimeout(n.mousePressTimeout),n.setState({mouse_pressed:!1})}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.active,n=e.time,o=t?"active":"",r=Object(gt.b)(Math.floor(n/1e3)),a=String(Math.floor(n%1e3/100)),i="".concat(r,".").concat(a);return c.a.createElement("div",{className:"trim-pill ".concat(o),onClick:this.activateTrimBound},c.a.createElement("div",{className:"time-display"},i),c.a.createElement("div",{className:"arrows"},c.a.createElement("span",{className:"up arrow",onMouseDown:this.incrementTime,onMouseUp:this.clearMousePressTimeout}),c.a.createElement("span",{className:"down arrow",onMouseDown:this.decrementTime,onMouseUp:this.clearMousePressTimeout})))}},{key:"setDeactivateBoundTimeout",value:function(){var e=this;window.clearTimeout(this.deactivateBoundTimeout),this.deactivateBoundTimeout=window.setTimeout(function(){e.props.updateSelectedTrimBoundCreator(null)},Tn.g)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){return e.active!==this.props.active?window.clearTimeout(this.deactivateBoundTimeout):e.active&&e.time!==this.props.time?this.setDeactivateBoundTimeout():void 0}},{key:"stepTime",value:function(){var e=M()(O.a.mark(function e(t,n){var o,r,a,i,s,c=this;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.clearTimeout(this.mousePressKickInTimeout),window.clearTimeout(this.mousePressTimeout),o=this.props,r=o.half,a=o.min,i=o.time,s=Math.round(Math.max(a,i+t)),this.props.onTimeChange(r,s),this.state.mouse_pressed){e.next=11;break}return e.next=8,new Promise(function(e){c.mousePressKickInTimeout=window.setTimeout(e,300)});case 8:if(!this.state.mouse_pressed){e.next=10;break}return e.abrupt("return");case 10:this.setState({mouse_pressed:!0});case 11:this.mousePressTimeout=window.setTimeout(n,50);case 12:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}]),t}(s.Component),Pn=(n(2047),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"boundingRange",Object(Dn.d)(n.props.currentTrimRange,n.props.trimRanges,1e3*n.props.duration)),W()(V()(V()(n)),"onPillTimeChange",function(e,t){var o=N()({},n.props.currentTrimRange),r=e===Rn,a=Object(Dn.f)(t,o,n.boundingRange,r,Tn.d);r?o.from=a:o.to=a,n.props.updateCurrentTrimRangeCreator(o),window.top.postMessage({type:ne.f,numSeconds:a/1e3},"*")}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.currentTrimRange,n=e.selectedTrimBound,o=t.to-Tn.d,r=this.boundingRange.from,a=this.boundingRange.to,i=t.from+Tn.d,s=n===Tn.h,l=n===Tn.i;return c.a.createElement("div",{className:"trim-range-pill-bar"},c.a.createElement(Fn,{time:t.from,active:s,half:Rn,max:o,min:r,onTimeChange:this.onPillTimeChange,updateSelectedTrimBoundCreator:this.props.updateSelectedTrimBoundCreator}),c.a.createElement("span",{className:"divider"}),c.a.createElement(Fn,{time:t.to,active:l,half:"right",max:a,min:i,onTimeChange:this.onPillTimeChange,updateSelectedTrimBoundCreator:this.props.updateSelectedTrimBoundCreator}))}}]),t}(s.Component)),Hn=Object(u.connect)(function(e){var t=e.trimming;return{currentTrimRange:t.current_trim_range,selectedTrimBound:t.selected_trim_bound,trimRanges:t.trim_ranges}},function(e){return{updateCurrentTrimRangeCreator:function(t){return e(Object(pe.i)(t))},updateSelectedTrimBoundCreator:function(t){return e(Object(pe.j)(t))}}})(Pn),Bn=(n(2048),function(e){function t(){return I()(this,t),R()(this,F()(t).apply(this,arguments))}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.currentTrimRange,n=e.undoStack,o=null==t&&n.length>0,r=o?this.props.onUndoTrim:null,a=o?"enabled":"";return c.a.createElement("div",{className:"trim-bar-button trim-bar-undo-button ".concat(a),onClick:r},c.a.createElement("span",{className:"icon"}),c.a.createElement("span",{className:"label"},"Undo"))}}]),t}(s.Component)),Vn=(n(2049),new Error("invalid trim operation")),zn=function(e){function t(e){var n;return I()(this,t),(n=R()(this,F()(t).call(this,e))).handleDiscardSelectedTrimRange=n.handleDiscardSelectedTrimRange.bind(V()(V()(n))),n.handleEndCurrentTrimRange=n.handleEndCurrentTrimRange.bind(V()(V()(n))),n.handleTrimAction=n.handleTrimAction.bind(V()(V()(n))),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.currentTrimRange,n=e.duration,o=e.newTrimChanges,r=e.redoStack,a=e.selectedTrimRange,i=e.undoStack,s=e.trimRanges,l=null,u=null,d=null,m=null;return null!=t?(null!=a?l=c.a.createElement(Sn,{selectedTrimRange:a,onDiscardTrimRange:this.handleDiscardSelectedTrimRange}):(l=c.a.createElement(Nn,{currentTrimRange:t,onCancelCurrentTrimRange:this.props.onCancelCurrentTrimRange}),u=c.a.createElement(xn,{showActionDot:this.props.showCutActionDot,onEndCurrentTrimRange:this.handleEndCurrentTrimRange})),m=c.a.createElement(Hn,{duration:n})):(l=c.a.createElement(Sn,{selectedTrimRange:a,onDiscardTrimRange:this.handleDiscardSelectedTrimRange}),d=c.a.createElement(An,{showActionDot:this.props.showPublishActionDot,currentTrimRange:t,newTrimChanges:o,onPublishChanges:this.props.onPublishChanges})),c.a.createElement("div",{className:"share-video-trim-bar"},c.a.createElement("div",{className:"left-section"},s.length>0&&c.a.createElement(c.a.Fragment,null,c.a.createElement(Bn,{currentTrimRange:t,onUndoTrim:this.props.onUndoTrim,undoStack:i}),c.a.createElement(Ln,{currentTrimRange:t,onRedoTrim:this.props.onRedoTrim,redoStack:r}))),c.a.createElement("div",{className:"middle-section"},m,d),c.a.createElement("div",{className:"right-section"},(t||a)&&l,t&&u))}},{key:"componentDidMount",value:function(){window.top.addEventListener("message",this.handleTrimAction,!1)}},{key:"componentWillUnmount",value:function(){window.top.removeEventListener("message",this.handleTrimAction)}},{key:"handleTrimAction",value:function(e){var t=e.data,n=void 0===t?{}:t;if(e.source!==window&&n.type===ne.y){var o=n.id,r=n.operation,a=n.trimBound,i=n.trimRange,s=n.trimRanges,c=n.updatedVideo;switch(r){case Tn.a:return this.props.addTrimRangeCreator(i);case Tn.f:return this.props.removeTrimRangeCreator(o);case Tn.b:return this.props.enterTrimModeCreator(s);case Tn.c:return this.props.leaveTrimModeCreator(c);case Tn.e:return this.props.redoTrimOperationCreator();case Tn.j:return this.props.undoTrimOperationCreator();case Tn.l:return this.props.updateCurrentTrimRangeCreator(i);case Tn.m:return this.props.updateSelectedTrimBoundCreator(a);case Tn.n:return this.props.updateSelectedTrimRangeCreator(i);case Tn.o:return this.props.updateTrimRangeCreator(i);default:y.b(Vn,"bad trim operation",{operation:r})}}}},{key:"handleEndCurrentTrimRange",value:function(){var e=this.props.currentTrimRange;this.props.onEndCurrentTrimRange(e)}},{key:"handleDiscardSelectedTrimRange",value:function(){var e=this.props.selectedTrimRange;this.props.onDiscardTrimRange(e.id)}}]),t}(s.Component),Wn=Object(u.connect)(function(e){var t=e.onboarding,n=t.current_tour,o=t.show_tips,r=n==Ie.f&&!o;return{showCutActionDot:r,showPublishActionDot:r}},function(e){return{addTrimRangeCreator:function(t){return e(Object(pe.a)(t,!1,!1))},enterTrimModeCreator:function(t){return e(Object(pe.b)(t,!1))},leaveTrimModeCreator:function(t){return e(Object(pe.c)(t,!1))},redoTrimOperationCreator:function(){return e(Object(pe.e)(!1))},removeTrimRangeCreator:function(t){return e(Object(pe.f)(t,!1,!1))},undoTrimOperationCreator:function(){return e(Object(pe.g)(!1))},updateCurrentTrimRangeCreator:function(t){return e(Object(pe.i)(t,!1))},updateSelectedTrimBoundCreator:function(t){return e(Object(pe.j)(t,!1))},updateSelectedTrimRangeCreator:function(t){return e(Object(pe.k)(t,!1))},updateTrimRangeCreator:function(t){return e(Object(pe.l)(t,!1,!1))}}})(zn),Gn=(n(2050),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"enterTrimMode",function(){var e=n.props.video,t=e.id,o=e.processing_information.trim_ranges,r=void 0===o?[]:o;n.props.enterTrimModeCreator(r),n.props.onEnterTrimMode(),he.h(te.D,{id:t,has_been_trimmed:r.length>0})}),W()(V()(V()(n)),"publishChanges",function(){var e=n.props.video;n.props.patchTrimVideoCreator(e,n.props.onLeaveTrimMode)}),W()(V()(V()(n)),"handleEndCurrentTrimRange",function(e){var t=n.props.trimRanges;null!=We.a.find(t,function(t){return t.id===e.id})?n.props.updateTrimRangeCreator(e):n.props.addTrimRangeCreator(e)}),W()(V()(V()(n)),"onShowCtaClick",function(){var e=n.props.showCtaModal;he.h(te.d,{action:e?"close":"open"}),n.props.updateVideoCtaModalShow(!e)}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.currentTrimRange,n=e.duration,o=e.inTrimMode,r=e.newTrimChanges,a=e.redoStack,i=e.selectedTrimRange,s=e.undoStack,l=e.video,u=e.trimRanges,d=l.current_user_is_owner,m=null;return m=o?c.a.createElement(Wn,{currentTrimRange:t,duration:n,newTrimChanges:r,redoStack:a,selectedTrimRange:i,undoStack:s,trimRanges:u,onEndCurrentTrimRange:this.handleEndCurrentTrimRange,onCancelCurrentTrimRange:this.props.cancelCurrentTrimRange,onDiscardTrimRange:this.props.removeTrimRangeCreator,onPublishChanges:this.publishChanges,onRedoTrim:this.props.redoTrimOperationCreator,onUndoTrim:this.props.undoTrimOperationCreator}):c.a.createElement(kn,{currentUserIsOwner:d,useEmojis:l.use_emojis}),c.a.createElement("div",{className:"share-video-control-bar"},m)}}]),t}(s.Component)),qn=Object(u.connect)(function(e){var t=e.trimming,n=t.current_trim_range,o=t.in_trim_mode,r=t.new_changes,a=t.redo_stack,i=t.selected_trim_range,s=t.trim_ranges,c=t.undo_stack,l=e.user.current.has_named_video_views,u=e.multi_share.dm_content,d=e.share_video,m=d.cta_show,p=d.cta_modal_show,h=d.cta_enabled,f=e.onboarding,v=f.current_tour,g=f.show_tips,b=v==Ie.f,_=v==Ie.c&&!g,y=b||_;return{currentTrimRange:n,ctaEnabled:h,hasNamedVideoViews:l,hasSlackData:u&&u.length>1,inTrimMode:o,newTrimChanges:r,redoStack:a,selectedTrimRange:i,trimRanges:s,undoStack:c,showCta:m,showCtaModal:p,showTrimActionDot:y}},function(e){return{addTrimRangeCreator:function(t){return e(Object(pe.a)(t))},cancelCurrentTrimRange:function(){return e(Object(pe.i)(null))},enterTrimModeCreator:function(t){return e(Object(pe.b)(t))},patchTrimVideoCreator:function(t,n){return e(Object(pe.d)(t,n))},removeTrimRangeCreator:function(t){return e(Object(pe.f)(t))},redoTrimOperationCreator:function(){return e(Object(pe.e)())},undoTrimOperationCreator:function(){return e(Object(pe.g)())},updateTrimRangeCreator:function(t){return e(Object(pe.l)(t))},toggleSlackInviteModal:function(t,n){return e(Object(hn.c)(t,n))}}})(Gn),Kn=n(343),Jn=(n(2051),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"state",{background_color_err:!1,text_color_err:!1,border_radius_err:!1,url_err:!1,in_preview:!1}),W()(V()(V()(n)),"render",function(){var e=n.props,t=e.ctaModalShow,o=e.currentUserIsOwner;return t&&o?c.a.createElement("div",{className:"video-cta-modal in-preview"},c.a.createElement(Kn.a,null)):null}),n}return H()(t,e),t}(s.Component)),Yn=Object(u.connect)(function(e){var t=e.share_video.current_user_is_owner;return{ctaModalShow:e.editor.cta_flow,currentUserIsOwner:t}},null)(Jn),Qn=n(114),Xn=(n(2052),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"trackDownload",function(){var e=n.props,t=e.currentUserIsOwner,o=e.videoId;he.h(te.dc,{video_id:o,is_video_owner:t})}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.currentUserIsOwner,n=e.downloadEnabled,o=e.downloadName,r=e.downloadUrl,a=e.onDownloadUnverifiedClicked,i=e.ownerVerified;if(!(!ve.f&&(n||t)))return null;var s=["download-button","tooltip-target",null==r&&"preparing"].filter(Boolean);return i&&null!=r?c.a.createElement("a",{className:s.join(" "),href:r,target:"_blank",rel:"noopener noreferrer",download:o,onClick:this.trackDownload},c.a.createElement(Qn.a,null,"Download")):c.a.createElement("a",{className:s.join(" "),onClick:i?null:a},c.a.createElement(Qn.a,null,c.a.createElement("div",null,"Polishing pixels."),c.a.createElement("div",null,"Your download's coming up!")))}}]),t}(s.Component)),Zn=(n(111),n(112),n(2053),function(e){function t(){return I()(this,t),R()(this,F()(t).apply(this,arguments))}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.icon,o=e.onClick,r=e.renderButtonChildren,a=e.children,i=e.disabled,s=Ce()("fab-button",t,{"with-label":a,"fab-button--disabled":i});return c.a.createElement("div",{className:s,onClick:o},c.a.createElement("div",{className:"fab-button-button fab-button-icon-".concat(n)},r()),a)}}]),t}(c.a.Component));W()(Zn,"defaultProps",{className:null,renderButtonChildren:function(){return null},icon:"",onClick:function(){}});var $n=Zn,eo=(n(2054),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"handleClick",function(){n.props.startCTAFlow(!n.props.showCtaModal)}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.ctaEnabled,n=e.currentUserIsOwner,o=e.showCta,r=e.disabled,a=e.companyFeatureData;return Boolean(n&&(o||t||a))&&!ve.f&&c.a.createElement($n,{disabled:r,icon:"cta-wh",onClick:this.handleClick},t?"Edit CTA":c.a.createElement("span",null,"Call-to-",c.a.createElement("br",null),"action"))}}]),t}(c.a.Component)),to=Object(u.connect)(function(e){var t=e.share_video,n=t.cta_show,o=t.cta_modal_show,r=t.cta_enabled;return{currentUserIsOwner:t.current_user_is_owner,showCta:n,showCtaModal:o,ctaEnabled:r,companyFeatureData:e.share_video.video.company_feature_data}},function(e){return{startCTAFlow:function(){return e(Object(Y.h)())}}})(eo),no=(n(877),n(104)),oo=n(138);var ro=n(989),ao=n.n(ro),io=n(990),so=n.n(io),co=n(991),lo=n.n(co),uo=n(992),mo=n.n(uo),po=n(993),ho=n.n(po),fo=n(549),vo=n.n(fo),go=n(382),bo=n.n(go),_o=n(546),yo=n.n(_o),wo=n(541),Co=(n(2055),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"state",{left:void 0}),W()(V()(V()(n)),"moveIntoView",function(){var e=n.root.getBoundingClientRect(),t=e.width,o=e.left,r=document.body.getBoundingClientRect().width,a=o+-1*(n.state.left||0)+t-r;a>0?n.setState({left:-a}):n.setState({left:void 0})}),W()(V()(V()(n)),"handleClickOutside",function(){var e;(e=n.props).onClickOutside.apply(e,arguments)}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,o=yo()(t,["className"]),r={left:this.state.left};return c.a.createElement("div",{ref:function(t){return e.root=t},style:r,className:"color-picker".concat(this.props.show?" show":""," ").concat(n)},c.a.createElement(wo.SketchPicker,o))}},{key:"componentDidMount",value:function(){this.moveIntoView()}},{key:"componentDidUpdate",value:function(e){e.show!=this.props.show&&this.moveIntoView()}}]),t}(c.a.PureComponent));W()(Co,"defaultProps",{onClickOutside:function(){},show:!1,className:""});var Eo=Vt()(Co),ko=n(205),To=(n(2056),25),No=0,So=4,Oo=[oo.j,oo.e,oo.d,oo.c,oo.a,oo.k,oo.h],jo=function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"state",{corner_dropdown:!1,bg_color_picker:!1,text_color_picker:!1,text_color_err:!1,background_color_err:!1,url_err:!1,return_to_time:null}),W()(V()(V()(n)),"movePlayerToEnd",function(){n.props.requestVideoPlayerCurrentTime(n.props.videoDuration),n.setState({return_to_time:n.props.currentTime})}),W()(V()(V()(n)),"handleCornerClick",function(e){n.setState({corner_dropdown:!1}),n.handleCtaRadiusInput(e),n.validate()}),W()(V()(V()(n)),"getBorderRadiusLabel",function(e){switch(e){case No:return"Square";case To:return"Rounded";case So:default:return"Slightly rounded"}}),W()(V()(V()(n)),"handleCtaBackgroundColorInput",function(e){var t=n.props.ctaMods;n.setState({background_color_err:!1}),e.length>7||(n.props.updateVideoCtaMods(N()({},t,{background_color:e})),n.validate())}),W()(V()(V()(n)),"handleCtaTextColorInput",function(e){var t=n.props.ctaMods;n.setState({text_color_err:!1}),e.length>7||(n.props.updateVideoCtaMods(N()({},t,{color:e})),n.validate())}),W()(V()(V()(n)),"handleCtaRadiusInput",function(e){var t;if(n.setState({border_radius_err:!1}),Number.isInteger(Number(e))){t=e>200?199:e<0?0:e;var o=n.props.ctaMods;n.props.updateVideoCtaMods(N()({},o,{border_radius:t})),n.validate()}}),W()(V()(V()(n)),"handleCtaUrlInput",function(e){n.setState({url_err:!1}),n.props.updateVideoCtaUrl(e)}),W()(V()(V()(n)),"handleCtaTextInput",function(e){n.props.updateVideoCtaText(e),n.validate()}),W()(V()(V()(n)),"saveEligible",function(){var e=n.state,t=e.background_color_err,o=e.text_color_err,r=e.url_err,a=n.props,i=a.ctaMods,s=a.ctaText,c=a.ctaUrl;return!(t||o||r)&&i&&s&&c}),W()(V()(V()(n)),"save",M()(O.a.mark(function e(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.instantValidate(),n.saveEligible()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,n.props.saveCTA();case 5:n.props.showConfirmationModal("Call-to-action saved");case 6:case"end":return e.stop()}},e,this)}))),W()(V()(V()(n)),"clearSettings",function(){n.props.clearCTAWidgetState()}),W()(V()(V()(n)),"handleDelete",M()(O.a.mark(function e(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.props.clearCTAWidgetState(),e.next=3,n.props.updateVideoCtaCreator();case 3:n.props.showConfirmationModal("Call-to-action deleted");case 4:case"end":return e.stop()}},e,this)}))),W()(V()(V()(n)),"instantValidate",function(){var e=n.props,t=e.ctaMods,o=e.ctaUrl;t&&t.color&&!Object(Nt.m)(t.color)&&n.setState({text_color_err:!0}),t&&t.background_color&&!Object(Nt.m)(t.background_color)&&n.setState({background_color_err:!0}),t&&t.border_radius&&!Number.isInteger(Number(t.border_radius))&&n.setState({border_radius_err:!0}),o&&!Object(Nt.o)({exact:!0,strict:!1}).test(o)&&n.setState({url_err:!0})}),W()(V()(V()(n)),"validate",We.a.debounce(n.instantValidate,300)),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.corner_dropdown,o=t.bg_color_picker,r=t.text_color_picker,a=t.text_color_err,i=t.background_color_err,s=t.url_err,l=this.props,u=l.ctaEnabled,d=l.ctaText,m=l.ctaUrl,p=l.ctaMods,h=this.saveEligible();return c.a.createElement("div",{className:"cta-form"},c.a.createElement("div",{className:"edit-cta-header"},"Create a call-to-action"),c.a.createElement(Rt.a,{autoFocus:!0,onChange:function(t){return e.handleCtaTextInput(t)},fieldLabel:"Button text",inputClass:"new-style",fieldId:"button-text",fieldValue:d,isRequired:!1}),c.a.createElement(Rt.a,{inputClass:"new-style",onBlur:this.instantValidate,onChange:function(t){return e.handleCtaUrlInput(t)},fieldLabel:"Button link (URL)",fieldId:"button-link",status:s?"Yikes! Doesn’t look like a valid URL":null,severity:s?"error":null,fieldValue:m,isRequired:!1}),c.a.createElement("div",{className:"picker-input",onClick:function(){return e.setState({text_color_picker:!1,bg_color_picker:!0,corner_dropdown:!1})}},c.a.createElement(Rt.a,{inputClass:"new-style",onChange:function(t){return e.handleCtaBackgroundColorInput(t)},onFocus:function(){return e.setState({text_color_picker:!1,bg_color_picker:!0,corner_dropdown:!1})},onBlur:function(){return e.setState({bg_color_picker:!1})},fieldLabel:"Button color",fieldId:"button-color",status:i?"Yikes! Doesn’t look like a valid color":null,severity:i?"error":null,type:"color",fieldValue:(p||{}).background_color,isRequired:!1}),c.a.createElement("img",{src:bo.a,className:"picker-icon",onClick:function(){return document.getElementById("button-color").focus()}}),c.a.createElement("div",{className:"form-color-picker"},c.a.createElement(Eo,{onClickOutside:function(){return e.setState({bg_color_picker:!1})},show:o,disableAlpha:!0,presetColors:Oo,color:(p||{}).background_color,onChangeComplete:function(t){return e.handleCtaBackgroundColorInput(t.hex)}}))),c.a.createElement("div",{className:"picker-input",onClick:function(){return e.setState({text_color_picker:!0,bg_color_picker:!1,corner_dropdown:!1})}},c.a.createElement(Rt.a,{inputClass:"new-style",onChange:function(t){return e.handleCtaTextColorInput(t)},onFocus:function(){return e.setState({text_color_picker:!0,bg_color_picker:!1,corner_dropdown:!1})},onBlur:function(){return e.setState({text_color_picker:!1})},fieldLabel:"Text color",severity:a?"error":null,fieldId:"text-color",fieldValue:(p||{}).color,isRequired:!1}),c.a.createElement("img",{src:bo.a,className:"picker-icon",onClick:function(){return document.getElementById("text-color").focus()}}),c.a.createElement("div",{className:"form-color-picker"},c.a.createElement(Eo,{onClickOutside:function(){return e.setState({text_color_picker:!1})},show:r,disableAlpha:!0,presetColors:Oo,color:(p||{}).color,onChangeComplete:function(t){return e.handleCtaTextColorInput(t.hex)}}))),c.a.createElement("div",{className:"dropdown-div"},c.a.createElement("div",{className:"dropdown-corner"},c.a.createElement(Rt.a,{inputClass:"new-style",onFocus:function(){return e.setState({text_color_picker:!1,bg_color_picker:!1,corner_dropdown:!0})},fieldLabel:"Button corner style",fieldId:"button-corner-style",fieldType:"text",fieldValue:this.getBorderRadiusLabel((p||{}).border_radius),isRequired:!1}),c.a.createElement("img",{src:n?ao.a:so.a,className:"dropdown-arrow"})),c.a.createElement(ko.a,{show:n,outsideClickIgnoreClass:"dropdown-corner",onClickOutside:function(){return e.setState({corner_dropdown:!1})}},c.a.createElement("a",{key:"1",className:"dropdown-item",onClick:function(){return e.handleCornerClick(No)}},c.a.createElement("img",{src:ho.a,className:"sq-icon"}),c.a.createElement("div",null,"Square")),c.a.createElement("a",{key:"2",className:"dropdown-item",onClick:function(){return e.handleCornerClick(So)}},c.a.createElement("img",{src:mo.a,className:"sq-icon"}),c.a.createElement("div",null,"Slightly rounded")),c.a.createElement("a",{key:"3",className:"dropdown-item",onClick:function(){return e.handleCornerClick(To)}},c.a.createElement("img",{src:lo.a,className:"sq-icon"}),c.a.createElement("div",null,"Rounded")))),u&&c.a.createElement("div",{className:"delete-cta active",onClick:this.handleDelete},c.a.createElement("img",{src:vo.a,className:"trashcan"}),c.a.createElement("div",null,"Delete CTA")),c.a.createElement("div",{className:"button-actions"},c.a.createElement(Dt.a,{buttonClass:"action-button",buttonType:"rp-secondary-3",value:"Cancel",onClicked:this.clearSettings}),c.a.createElement(Dt.a,{buttonClass:"action-button",buttonType:"rp-primary-3",disabled:!h,value:"Save",onClicked:this.save})))}},{key:"componentDidMount",value:function(){this.props.videoDuration&&this.movePlayerToEnd()}},{key:"componentDidUpdate",value:function(e){!e.ctaMods&&this.props.ctaMods&&this.setState({button_corner_style:this.props.ctaMods.border_radius}),!e.videoDuration&&this.props.videoDuration&&this.movePlayerToEnd()}},{key:"componentWillUnmount",value:function(){this.state.return_to_time&&(this.props.requestVideoPlayerCurrentTime(this.state.return_to_time),this.setState({return_to_time:null}))}}]),t}(s.Component),Mo=Object(u.connect)(function(e){var t=e.share_video,n=t.cta_enabled,o=t.cta_mods,r=t.cta_text,a=t.cta_url,i=t.cta_modal_show,s=t.current_user_is_owner,c=t.video;return{ctaEnabled:n,ctaMods:o,ctaText:r,ctaUrl:a,ctaModalShow:i,currentUserIsOwner:s,videoDuration:(c&&c.video_properties||{}).duration,currentTime:e.video_player.current_time}},function(e){return{updateVideoCtaEnabled:function(t){return e(Object($.l)(t))},updateVideoCtaUrl:function(t){return e(Object($.q)(t))},updateVideoCtaText:function(t){return e(Object($.p)(t))},updateVideoCtaMods:function(t){return e(Object($.n)(t))},updateVideoCtaCreator:function(){return e(Object(de.h)())},updateVideoCtaModalShow:function(t){return e(Object($.m)(t))},endCTAFlow:function(){return e(Object(Y.a)())},requestVideoPlayerCurrentTime:function(t){return e(Object(Ee.b)(t))},requestVideoPlayerPlay:function(){return e(Object(Ee.g)())},clearCTAWidgetState:function(){return e(function(){return function(e){e(Object($.l)(!1)),e(Object($.p)("")),e(Object($.q)("")),e(Object($.n)(null)),e(Object(Y.a)())}}())},saveCTA:function(){return e(function(){return function(e){e(Object($.l)(!0)),e(Object(de.h)()),e(Object(Y.a)())}}())},showConfirmationModal:function(t){return e(Object(no.b)(t))}}})(jo),xo=n(295),Io=(n(2057),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"handleAddCoverClick",function(){he.h(te.t),n.props.startThumbnailFlow()}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.currentUserIsOwner,n=e.canModifyThumbnail,o=e.thumbnails,r=e.onRemoveCoverClick,a=e.videoId,i=e.disabled,s=o[xo.a],l=s?"Edit Thumbnail":"Remove Thumbnail",u=s?this.handleAddCoverClick:r.bind(null,a);return t&&!ve.f&&n&&(o[xo.b]?c.a.createElement($n,{disabled:i,icon:"thumbnail-wh",onClick:u},l):c.a.createElement($n,{disabled:i,icon:"thumbnail-wh",onClick:this.handleAddCoverClick},"Custom Thumbnail"))}}]),t}(c.a.Component)),Ao=Object(u.connect)(function(e){return{currentUserIsOwner:e.share_video,videoId:e.share_video.video.s3_id,canModifyThumbnail:e.user.capabilities.includes(xe.c),thumbnails:e.share_video.video.thumbnails}},function(e){return{onRemoveCoverClick:function(t){return e(Object(de.g)(t))},startThumbnailFlow:function(){return e(Object(Y.j)())}}})(Io),Lo=(n(2058),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"state",{password:null}),W()(V()(V()(n)),"handleUpdatePassword",function(e){n.setState({password:e})}),W()(V()(V()(n)),"handleRemovePasswordClick",function(){var e=n.props,t=e.video,o=e.updateVideoSettings,r=e.onSaveClick;he.h(te.Hb,{action:"removed",video_id:t.id}),o({},null),r()}),W()(V()(V()(n)),"handleSaveClick",function(){var e,t=n.state.password,o=n.props,r=o.onSaveClick,a=o.video,i=o.updateVideoSettings;(t||"").length>0&&(e=t),void 0!==e&&(he.h(te.Hb,{action:!a.is_protected&&(t||"").length>0?"added":"changed",video_id:a.id}),i({},e)),r()}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.video,n=e.validationError,o=e.onCancelClick;if(null==t)return null;var r=this.state.password,a=n?v.a:"";return c.a.createElement("div",{className:"edit-privacy-settings"},c.a.createElement("div",{className:"edit-privacy-settings-header"},"Password Protect"),c.a.createElement(Rt.a,{autoFocus:!0,fieldValue:r,fieldLabel:"Enter new password",fieldType:"password",inputClass:"new-style",status:n,severity:a,onChange:this.handleUpdatePassword,onEnter:this.handleSaveClick}),t.is_protected&&c.a.createElement("div",{className:"remove-password-button",onClick:this.handleRemovePasswordClick},"Remove password"),c.a.createElement("div",{className:"video-settings-buttons"},c.a.createElement(Dt.a,{buttonClass:"video-settings-cancel",buttonType:"rp-secondary-3",value:"Cancel",onClicked:o}),c.a.createElement(Dt.a,{buttonClass:"video-settings-save",buttonType:"rp-primary-3",value:"Save",onClicked:this.handleSaveClick})))}}]),t}(c.a.Component));W()(Lo,"defaultProps",{onCancelClick:function(){},onSaveClick:function(){}});var Do=Object(u.connect)(function(e){var t=e.share_video,n=t.settings_modal_err;return{show:t.show_pw_settings_modal,validationError:n,video:t.video}},function(e){return{updateVideoSettings:function(t,n){return e(Object(de.j)(t,n))}}})(Lo),Ro=(n(2059),function(e){var t=e.onClick;return c.a.createElement($n,{onClick:t,icon:"locked-rp"},"Password")}),Uo=n(994),Fo=n.n(Uo),Po=(n(2060),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"handleDeleteThumbnail",function(){var e=n.props.videoId;n.props.removeVideoThumbnail(e),n.props.setLocalThumbnail(null)}),W()(V()(V()(n)),"handleExitFlow",function(){n.props.setLocalThumbnail(null),n.props.endThumbnailFlow()}),W()(V()(V()(n)),"handleBrowseInput",function(e){var t=e.target.files[0];n.handleFile(t),e.target.value=null}),W()(V()(V()(n)),"readFile",function(e){var t=new FileReader;t.onload=function(e){var t=e.target.result,o=new Image;o.onload=function(){n.props.setLocalThumbnail(t,{width:o.width,height:o.height})},o.src=t},t.readAsDataURL(e)}),W()(V()(V()(n)),"handleFile",function(e){e&&n.readFile(e)}),W()(V()(V()(n)),"handleUploadCoverClick",function(e){e.stopPropagation()}),W()(V()(V()(n)),"handleAddCoverClick",function(){n.props.localThumbnail?n.props.initiateThumbnailSave():document.querySelector("#upload-thumbnail-file").click()}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.localThumbnail,n=e.uploading,o=e.thumbnails,r=e.preferredDims,a=(o||{})[xo.b];return c.a.createElement("div",{className:"thumbnail-form"},c.a.createElement("div",{className:"edit-thumbnail-header"},a?"Edit thumbnail":"Upload a thumbnail"),c.a.createElement("img",{src:Fo.a,className:"thumb-drag-and-drop-illo"}),!a&&c.a.createElement(s.Fragment,null,c.a.createElement("div",{className:"thumb-instructions"},"Drag and drop to upload"),c.a.createElement("div",{className:"thumb-fine-print"},r.width," x ",r.height,"px .pngs and .jpgs work best!")),a&&c.a.createElement(s.Fragment,null,c.a.createElement("div",{className:"thumb-instructions"},"Adjust positioning and zoom"),c.a.createElement("div",{className:"thumb-fine-print"},"delete to upload new thumbnail!")),a&&c.a.createElement("div",{className:"thumb-delete-section",onClick:this.handleDeleteThumbnail},c.a.createElement("img",{src:vo.a,className:"delete-trash-icon"}),c.a.createElement("div",null,"Delete thumbnail")),c.a.createElement("div",{className:"button-actions"},c.a.createElement(Dt.a,{buttonClass:"action-button",buttonType:"rp-secondary-3",value:"Cancel",disabled:n,onClicked:this.handleExitFlow}),c.a.createElement(Dt.a,{buttonClass:"action-button",buttonType:"rp-primary-3",disabled:n,value:t?"Save":"Browse",onClicked:this.handleAddCoverClick}),c.a.createElement("input",{type:"file",id:"upload-thumbnail-file",onClick:this.handleUploadCoverClick,onChange:this.handleBrowseInput,accept:"image/jpeg,image/pjpeg,image/png"})))}},{key:"componentDidMount",value:function(){var e=this,t=(this.props.thumbnails||{})[xo.a];t&&fetch(Object(Zt.b)(t)).then(function(e){if(!e.ok)throw new Error("Failed to fetch current thumbnail");return e.blob()}).then(function(t){e.readFile(t)}).catch(function(){e.props.showErrorBar(v.a,"Oops! failed to fetch current thumbnail, please delete current thumbnail to upload new image")})}}]),t}(c.a.Component)),Ho=Object(u.connect)(function(e){var t=e.share_video,n=t.currentUserIsOwner,o=t.video,r=e.video_player,a=r.width,i=r.height,s=e.editor.thumbnail_data;return{currentUserIsOwner:n,videoId:o.id,thumbnails:o.thumbnails,localThumbnail:s.thumbnail_local,uploading:s.uploading,preferredDims:{width:a,height:i}}},function(e){return{removeVideoThumbnail:function(t){return e(Object(de.g)(t))},endThumbnailFlow:function(){return e(Object(Y.c)())},setLocalThumbnail:function(t,n){return e(Object(Y.g)(t,n))},initiateThumbnailSave:function(){return e(Object(Y.f)())},showErrorBar:function(t,n){return e(Object(p.b)(t,n))}}})(Po),Bo=(n(2061),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"renderActionDot",function(){return n.props.showTrimActionDot?c.a.createElement(Mn,{position:"top-right"}):null}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.currentUserIsOwner,n=e.enterTrimEnabled,o=e.onClick,r=e.disabled;return!ve.f&&t&&c.a.createElement($n,{className:"trim-mode-button",disabled:r||!n,icon:"trim-rp",renderButtonChildren:this.renderActionDot,onClick:n?o:void 0},"Trim")}}]),t}(c.a.Component));W()(Bo,"defaultProps",{onClick:function(){}});var Vo=Object(u.connect)(function(e){var t=e.onboarding,n=t.current_tour,o=t.show_tips,r=n==Ie.f,a=n==Ie.c&&!o,i=r||a,s=e.share_video,c=s.player_ready,l=s.video,u=s.current_user_is_owner,d=l.processing_information,m=void 0===d?{}:d,p=m.trim_id,h=m.trim_progress;return{currentUserIsOwner:u,showTrimActionDot:i,enterTrimEnabled:c||null!=p&&100!==h}})(Bo),zo=n(183),Wo=n(214),Go=(n(2062),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"state",{comments_email_enabled:!0,comments_enabled:!0,download_enabled:!0,use_emojis:!0,use_emojis_default:!1,flipped_camera:!0,show_analytics_to_viewer:!0,original_comments_email_enabled:!0,original_comments_enabled:!0,original_download_enabled:!0,original_flipped_camera:!0,original_show_analytics_to_viewer:!0}),W()(V()(V()(n)),"handleUpdatePassword",function(e){n.setState({password:e,password_err:null})}),W()(V()(V()(n)),"toggleCommentsEnabled",function(){var e=n.state.comments_enabled;window.setTimeout(function(){n.setState({comments_email_enabled:!e})},200),n.setState({comments_enabled:!e})}),W()(V()(V()(n)),"togglecommentsEmailEnabled",function(){var e=n.state,t=e.comments_enabled,o=e.comments_email_enabled;(t||o)&&n.setState({comments_email_enabled:!n.state.comments_email_enabled})}),W()(V()(V()(n)),"handleSaveClick",function(){var e=n.state,t=e.comments_enabled,o=e.comments_email_enabled,r=e.download_enabled,a=e.flipped_camera,i=e.show_analytics_to_viewer,s=e.use_emojis,c=e.use_emojis_default,l=n.props,u=l.video,d=l.onSaveClick,m=l.updateVideoSettings,p=l.updateDefaultVideoSettings,h=function(e){return n.state[e]!==n.state["original_".concat(e)]};he.h(te.Ib,{comments_enabled:t,comments_email_enabled:o,download_enabled:r,flipped_camera:a,show_analytics_to_viewer:i,use_emojis:s,use_emojis_default:c,video_id:u.id,comments_enabled_changed:h("comments_enabled"),comments_email_enabled_changed:h("comments_email_enabled"),download_enabled_changed:h("download_enabled"),flipped_camera_changed:h("flipped_camera"),show_analytics_to_viewer_changed:h("show_analytics_to_viewer"),use_emojis_default_changed:h("use_emojis_default_changed")}),m({comments_enabled:t,comments_email_enabled:o,download_enabled:r,flipped_camera:a,show_analytics_to_viewer:i,use_emojis:s}),c&&p({use_emojis:s}),d()}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.video,o=t.validationError,r=t.onCancelClick;if(null==n)return null;var a=this.state,i=a.comments_enabled,s=a.comments_email_enabled,l=a.download_enabled,u=a.flipped_camera,d=a.show_analytics_to_viewer,m=a.use_emojis,p=a.use_emojis_default,h=(n.video_properties||{}).screen_type===ae.a,f=function(t){return function(){return e.setState(W()({},t,!e.state[t]))}};return c.a.createElement("div",{className:"edit-video-settings"},c.a.createElement("div",{className:"edit-video-header"},"Settings"),c.a.createElement("div",{className:"video-settings-setting"},"Comments",c.a.createElement(Wo.a,{index:"comments-enabled",status:i,onClick:this.toggleCommentsEnabled})),c.a.createElement("div",{className:"video-settings-setting"},"Comment email notifications",c.a.createElement(Wo.a,{index:"comments-email-enabled",status:s,onClick:this.togglecommentsEmailEnabled})),c.a.createElement("div",{className:"video-settings-setting video-settings-setting-wrap"},"Emoji Reactions",c.a.createElement(Wo.a,{index:"use-emojis",status:m,onClick:f("use_emojis")}),c.a.createElement("div",{className:"video-settings-setting-fullwidth",onClick:f("use_emojis_default")},c.a.createElement(zo.a,{isChecked:p,onEnable:f("use_emojis_default"),onDisable:f("use_emojis_default")}),"Use as default")),c.a.createElement("div",{className:"video-settings-setting"},"Viewer can download",c.a.createElement(Wo.a,{index:"download-enabled",status:l,onClick:f("download_enabled")})),c.a.createElement("div",{className:"video-settings-setting"},"Show analytics to viewer",c.a.createElement(Wo.a,{index:"analytics-to-viewer",status:d,onClick:f("show_analytics_to_viewer")})),h&&c.a.createElement("div",{className:"video-settings-setting"},"Flip camera",c.a.createElement(Wo.a,{index:"flipped-camera",status:u,onClick:f("flipped_camera")})),c.a.createElement("div",{className:"video-settings-buttons"},o&&c.a.createElement("span",{className:"validation-error"},"Oops! Could not update settings"),c.a.createElement(Dt.a,{buttonClass:"video-settings-cancel",buttonType:"rp-secondary-3",value:"Cancel",onClicked:r}),c.a.createElement(Dt.a,{buttonClass:"video-settings-save",buttonType:"rp-primary-3",value:"Save",onClicked:this.handleSaveClick})))}},{key:"componentDidMount",value:function(){var e=this.props.video,t=e.comments_email_enabled,n=e.comments_enabled,o=e.download_enabled,r=e.flipped_camera,a=e.show_analytics_to_viewer,i=e.use_emojis,s=void 0===i||i;this.setState({comments_email_enabled:t,comments_enabled:n,use_emojis:s,download_enabled:o,flipped_camera:r,show_analytics_to_viewer:a,original_comments_email_enabled:t,original_comments_enabled:n,original_download_enabled:o,original_flipped_camera:r,original_show_analytics_to_viewer:a})}}]),t}(c.a.Component));W()(Go,"defaultProps",{onCancelClick:function(){},onSaveClick:function(){}});var qo=Object(u.connect)(function(e){var t=e.share_video,n=t.settings_modal_err;return{show:t.show_pw_settings_modal,validationError:n,video:t.video}},function(e){return{updateDefaultVideoSettings:function(t){return e(Object(g.l)(t))},updateVideoSettings:function(t,n){return e(Object(de.j)(t,n))}}})(Go),Ko=(n(2063),function(e){var t=e.onClick;return c.a.createElement($n,{onClick:t,icon:"settings-rp"},"Settings")}),Jo=(n(2064),function(e){function t(){return I()(this,t),R()(this,F()(t).apply(this,arguments))}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.ctaFlow,n=e.thumbnailFlow,o=e.privacySettingsFlow,r=e.videoSettingsFlow,a=e.video,i=e.hasCustomThumbnail,l=e.hasCta,u=e.onEnterTrimMode,d=e.hasPremiumFeatures,m=e.inUploadMode,p=(t?" cta":"")+(n?" thumbnail":"")+(o?" privacy":"")+(r?" video-settings":""),h=[!(t||n||o||r)&&c.a.createElement(s.Fragment,{key:"edit-video"},c.a.createElement("div",{className:"edit-video-header"},"Edit Your Video",c.a.createElement("div",{className:"edit-video-header-status"},i&&c.a.createElement("div",{className:"edit-video-header-thumbnail"},c.a.createElement(Qn.a,null,"Video has a custom thumbnail")),l&&c.a.createElement("div",{className:"edit-video-header-cta"},c.a.createElement(Qn.a,null,"Video has call-to-action link")),a.is_protected&&c.a.createElement("div",{className:"edit-video-header-locked"},c.a.createElement(Qn.a,null,"Video has password")))),c.a.createElement("div",{className:"edit-video-buttons"},c.a.createElement(Ko,{onClick:this.props.startVideoSettingsFlow}),c.a.createElement(Ro,{onClick:this.props.startPrivacyFlow}),c.a.createElement(Vo,{onClick:u,disabled:m}),d&&c.a.createElement("div",{className:"premium-title"},c.a.createElement("span",null,"PRO")),c.a.createElement(to,{disabled:m}),c.a.createElement(Ao,{disabled:m}))),t&&c.a.createElement(Mo,{key:"cta-form"}),n&&c.a.createElement(Ho,{key:"thumbnail-widget"}),r&&c.a.createElement(qo,{key:"video-settings",video:a,onSaveClick:this.props.endVideoSettingsFlow,onCancelClick:this.props.endVideoSettingsFlow}),o&&c.a.createElement(Do,{key:"privacy-settings",video:a,onSaveClick:this.props.endPrivacyFlow,onCancelClick:this.props.endPrivacyFlow})].filter(Boolean);return c.a.createElement("div",{className:"edit-video".concat(p)},h.map(function(e){return c.a.createElement("div",{key:e.key},e)}))}},{key:"componentDidUpdate",value:function(e){if(this.props.editorMode!=e.editorMode){var t=document.documentElement;t.className=t.className.replace("editor-mode-enabled",""),this.props.editorMode&&(t.className+=" ".concat("editor-mode-enabled"))}}}]),t}(s.Component)),Yo=Object(u.connect)(function(e){var t=e.editor,n=e.user.capabilities,o=e.share_video,r=o.cta_enabled,a=o.video.thumbnails,i=void 0===a?{}:a,s=o.in_upload_mode,c=t.cta_flow,l=t.thumbnail_flow,u=t.privacy_settings_flow,d=t.video_settings_flow,m=t.editorMode,p=void 0===m?c||l:m;return{hasPremiumFeatures:n.includes(xe.c)||n.includes(xe.d),ctaFlow:c,thumbnailFlow:l,privacySettingsFlow:u,videoSettingsFlow:d,editorMode:p,hasCta:r,inUploadMode:s,hasCustomThumbnail:i.full}},function(e){return{startPrivacyFlow:function(){return e(Object(Y.i)())},startVideoSettingsFlow:function(){return e(Object(Y.k)())},endPrivacyFlow:function(){return e(Object(Y.b)())},endVideoSettingsFlow:function(){return e(Object(Y.d)())}}})(Jo),Qo=n(256),Xo=n(379),Zo=n(291),$o=n(995),er=n.n($o),tr=n(240),nr=n.n(tr),or=n(380),rr=function(e){function t(){return I()(this,t),R()(this,F()(t).apply(this,arguments))}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.currentTour,n=e.tourOpen,o=e.tourActive,r=Ce()(nr.a.container,!o&&nr.a.minimized,n&&nr.a.tourOpen),a=Xo.b[t],i=a.title,s=a.description;return c.a.createElement("div",{className:r},c.a.createElement("img",{className:nr.a.icon,src:er.a}),c.a.createElement("h3",{className:nr.a.heading},i),c.a.createElement("p",{className:nr.a.description},s),c.a.createElement("div",{className:nr.a.tryButton,onClick:this.props.activateTour},"Try it"),c.a.createElement("div",{className:nr.a.buttonContainer},c.a.createElement(Dt.a,{buttonType:Ce()("rp-secondary-4",nr.a.actionButton,nr.a.laterButton),value:"I’ll do it later",onClicked:this.props.deactivateTour}),c.a.createElement(Dt.a,{buttonType:Ce()("rp-primary-4",nr.a.actionButton),value:"Next tip",onClicked:function(){}})))}}]),t}(s.Component),ar=Object(u.connect)(function(e){var t=e.featureTour;return{currentTour:t.currentTour,tourOpen:t.tourOpen,tourActive:t.tourActive}},function(e){return{activateTour:function(){return e(Object(Qo.f)())},deactivateTour:function(){return e(Object(Qo.g)())}}})(rr),ir=Object(or.a)(c.a.createElement(ar,null),{featureName:Zo.a}),sr=n(996),cr=n.n(sr),lr=n(317),ur=n.n(lr),dr=function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"onSelfExplore",function(){n.props.onRecordedFirstVideo()}),W()(V()(V()(n)),"onTourStart",function(){n.props.onRecordedFirstVideo(),n.props.activateFeatureTour()}),n}return H()(t,e),L()(t,[{key:"render",value:function(){return c.a.createElement(He.a,{show:this.props.show,showClose:!0,onDismiss:this.props.onRecordedFirstVideo,className:ur.a.firstVideoModal},c.a.createElement("div",{className:ur.a.container},c.a.createElement("img",{src:cr.a}),c.a.createElement("span",{className:ur.a.heading},"Your first Loom video!"),c.a.createElement("p",{className:ur.a.description},"Congrats on your first video! Now see Loom’s editing suite and sharing options."),c.a.createElement("div",{className:ur.a.buttonsContainer},c.a.createElement(Dt.a,{buttonType:Ce()("rp-secondary-3",ur.a.actionButton),value:"I’ll explore on my own",onClicked:this.onSelfExplore}),c.a.createElement(Dt.a,{buttonType:Ce()("rp-primary-3",ur.a.actionButton),value:"Let's Go",onClicked:this.onTourStart}))))}}]),t}(s.Component),mr=Object(u.connect)(function(e){var t=e.user,n=e.share_video,o=t.is_logged_in_checked&&t.is_logged_in,r=n.current_user_is_owner,a=t.current.onboarding[Ie.d];return{show:o&&!a&&r}},function(e){return{onRecordedFirstVideo:function(){return e(Object(ue.c)(Ie.d,!0))},activateFeatureTour:function(){return e(Object(Qo.f)())}}})(dr),pr=Object(or.a)(c.a.createElement(mr,null),{featureName:Zo.a}),hr=n(455),fr=function(e){function t(){return I()(this,t),R()(this,F()(t).apply(this,arguments))}return H()(t,e),L()(t,[{key:"render",value:function(){return this.props.currentFolderId?c.a.createElement(hr.a,{currentFolderId:this.props.currentFolderId,onMove:this.props.onMove}):null}}]),t}(c.a.Component),vr=Object(u.connect)(function(e){var t=e.share_video.video_folders.slice(-1)[0];return{currentFolderId:t?t.id:null}},function(e){return{onMove:function(t,n){return e(Object(de.f)(t,n))}}})(fr),gr=n(12),br=(n(2065),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"getFolderUrl",function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.reduce(function(e,t,n){return 0==n?e.concat(t.special_id||t.id):e.concat(t.name)},[]).map(encodeURIComponent).join("/");return t?"/share/folder/".concat(n):"/".concat(n)}),W()(V()(V()(n)),"handleClickMove",function(e){var t=n.props,o=t.videoId,r=t.videoName,a=t.folders;e.preventDefault(),n.props.onClickMove(o,r,a)}),W()(V()(V()(n)),"handleClickFolderIcon",function(){n.props.showFolderHierarchy?n.props.onClickHideHierarchy():n.props.onClickShowHierarchy()}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.folders,o=t.prev,r=t.next,a=t.showMoveToFolder,i=t.usePublicLinks,l=n.slice(0,-1),u=n.slice(-1)[0],d=n.length-1;return n&&0!=n.length?c.a.createElement("div",{className:"move-to-folder"},c.a.createElement(ko.a,{outsideClickIgnoreClass:"move-to-folder-multiple-icon",onClickOutside:this.props.onClickHideHierarchy,className:"move-to-folder-dropdown",show:this.props.showFolderHierarchy},l.map(function(t,n){return c.a.createElement("a",{href:e.getFolderUrl(l.slice(0,n+1),i),className:"move-to-folder-dropdown-item",key:t.id},t.name)})),n.length>1&&c.a.createElement("div",{className:"move-to-folder-folders"},c.a.createElement("div",{className:"move-to-folder-multiple-icon ".concat(d>1?"":"disabled"),onClick:this.handleClickFolderIcon},c.a.createElement("span",null,d>1?d:"")),(n.length,c.a.createElement("a",{href:this.getFolderUrl(n,i),className:"folder-normal"},u.name))),c.a.createElement("div",{className:"move-to-folder-actions"},a&&c.a.createElement("span",{className:"move",onClick:this.handleClickMove},"Move to Folder"),(r||o)&&c.a.createElement(s.Fragment,null,c.a.createElement("a",{className:"prev",href:o&&o.url,disabled:!o},o&&c.a.createElement(Qn.a,null,o.name)),c.a.createElement("a",{className:"next",href:r&&r.url,disabled:!r},r&&c.a.createElement(Qn.a,null,r.name))))):null}}]),t}(c.a.PureComponent)),_r=Object(u.connect)(function(e,t){var n=e.share_video,o=t.folders||e.share_video.video_folders;return{folders:o,videoId:n.video?n.video.id:null,videoName:n.video?n.video.name:null,prev:n.video?n.video.prev:null,next:n.video?n.video.next:null,showFolderHierarchy:n.show_folder_hierarchy,showMoveToFolder:n.current_user_is_owner&&1==o.length,usePublicLinks:!n.current_user_is_owner}},function(e){return{onClickShowHierarchy:function(){return e(Object($.b)())},onClickHideHierarchy:function(){return e(Object($.a)())},onClickMove:function(t,n,o){he.h(te.Fb,{folder_id:o[0].id,folder_special_id:o[0].special_id,video_name:n,video_id:t}),e(Object(gr.E)([{id:t,name:n,type:"video"}])),e(Object(gr.R)(!0))}}})(br),yr=(n(2066),function(e){var t=e.video,n=e.currentUserIsOwner,o=t.owner_avatar,r=t.owner_full_name,a=t.createdAt,i=t.views;return c.a.createElement("div",{className:"owner-info-and-move"},c.a.createElement("div",{className:"owner-info"},o&&o.thumb?c.a.createElement("img",{src:Object(Zt.b)(o.thumb),className:"avatar"}):c.a.createElement("img",{src:en.a,className:"placeholder"}),c.a.createElement("div",{className:"by-date"},c.a.createElement("div",{className:"by"},c.a.createElement("span",null,"by "),c.a.createElement("span",{className:"name"},r)),c.a.createElement("div",{className:"date"},ht()(a).format("LL"),i&&!n&&c.a.createElement("span",{className:"analytics-icon"},c.a.createElement(Qn.a,null,i.total," Total Views,"," ",i.distinct," Unique",1===i.distinct?"":"s"))))),c.a.createElement(_r,null))}),wr=n(378),Cr=n(113),Er=n(122),kr=n(115),Tr=n(289),Nr=n(997),Sr=n.n(Nr),Or=n(550),jr=n.n(Or),Mr=function(e,t){return e.map(function(e,n){var o=e.active?"avatar active":"avatar",r=e.active?{background:"url(".concat(Sr.a,"),\n                     linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)),\n                     url(").concat(e.dm.profile.image_72,")"),backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"18px 18px, cover, cover"}:{backgroundImage:"url(".concat(e.dm.profile.image_72,")")};return c.a.createElement("div",{className:"item",key:n,onClick:function(){return t(e.dm.id)}},c.a.createElement("div",{className:o},c.a.createElement("div",{style:r,className:"avatar-image"})),c.a.createElement("div",{className:"name"},e.dm.profile.first_name||e.dm.name))})},xr=(n(2067),function(e){var t=e.multiShare,n=e.passiveClickHandler,o=e.activeClickHandler;return t.search_content.length>0?c.a.createElement("div",{className:"button-space"},c.a.createElement("div",{className:"passive-mode active",onClick:n},t.editor_mode?"Go Back":"Add a Message"),c.a.createElement("div",{className:"active-mode",onClick:o},"Share on Slack")):c.a.createElement("div",{className:"button-space"},c.a.createElement("div",{className:"passive-mode"},"Select a person or channel"))}),Ir=function(e){function t(){return I()(this,t),R()(this,F()(t).apply(this,arguments))}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{id:"contenteditable",ref:function(t){return e.composer=t},onInput:this.emitChange.bind(this),onBlur:this.emitChange.bind(this),"data-placeholder":this.props.dataPlaceholder,className:this.props.className,contentEditable:!0,dangerouslySetInnerHTML:{__html:this.props.html}})}},{key:"shouldComponentUpdate",value:function(e){return e.html!==this.composer.innerHTML}},{key:"componentDidUpdate",value:function(){this.props.html!==this.composer.innerHTML&&(this.composer.innerHTML=this.props.html)}},{key:"emitChange",value:function(){var e=this.composer.innerHTML,t=this.composer.innerText;this.props.onChange&&e!==this.lastHtml&&this.props.onChange({target:{value:e,text:t}}),this.lastHtml=e}}]),t}(s.Component),Ar=(n(2068),function(e){var t=e.messageHTML,n=e.changeHandler,o=e.typeaheadSuggestions,r=e.mentionSelectionHandler,a=e.parent;return c.a.createElement("div",{className:"editor-pane"},c.a.createElement(Ir,{ref:function(e){return a.editor=e},className:"editor",html:t,dataPlaceholder:"Share a message…",onChange:n}),c.a.createElement(Gt,{title:"People",editorClass:".editor",trigger:"@",selfPositioning:!0,handleSelection:r,suggestions:o[0].channels.map(function(e){return{username:e.name,name:e.real_name||e.name,avatar:e.avatar,id:e.id}})}))}),Lr=(n(2069),function(e){function t(e){var n;I()(this,t),n=R()(this,F()(t).call(this,e)),W()(V()(V()(n)),"showModal",function(){n.props.toggleSlackInviteModal(!0)});var o=n.props,r=o.user,a=o.multiShare,i=o.slackUser,s=o.slack,c=r.oauth[k.d].team_domain,l=a.dm_content.length,u=r.company_position||i.profile.title,d=e.user.oauth[k.d].id,m=e.multiShare.dm_content;return n.state={dms:Mr(m.filter(function(e){return e.dm.id!==d}).slice(0,3),function(){})},he.h(te.Pb,{slack_subdomain:c,total_signups:s.users_on_loom.length,team_size:l,inviter_position:u}),n}return H()(t,e),L()(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"slack-invite-prompt"},c.a.createElement("div",{className:"close",onClick:this.props.onClose}),c.a.createElement("div",{className:"coworker-avatars"},this.state.dms),c.a.createElement("h3",{className:"prompt"},"Who's viewing your videos?"),c.a.createElement("p",{className:"instructions"},"See who's viewing instantly by inviting ",kr.c," teammates to Loom."),c.a.createElement(Dt.a,{buttonType:"a1",buttonClass:"invite-button",value:"🔓 Unlock Now",onClicked:this.showModal}))}}]),t}(s.Component));Lr.propTypes={onClose:gn.a.func},Lr.defaultProps={onClose:function(){}};var Dr=Object(u.connect)(function(e){var t=e.slack,n=e.user,o=e.multi_share,r=n.current.oauth[k.d].id;return{slack:t,slackUser:o.dm_content.find(function(e){return e.dm.id===r}).dm,user:n.current,multiShare:o}},function(e){return{toggleSlackInviteModal:function(t){return e(Object(hn.c)(t,te.Lb))}}})(Lr),Rr=(n(2070),function(e){var t=e.channels,n=e.dms,o=e.channelClickHandler,r=e.dmClickHandler,a=function(e,t){return e.map(function(e,n){var o=e.active?"item active":"item";return c.a.createElement("div",{className:o,key:n,onClick:function(){return t(e.channel.id)}},e.channel.is_private?c.a.createElement("img",{src:jr.a,className:"locked"}):"#"," ",e.channel.name)})}(t,o),i=Mr(n,r);return c.a.createElement("div",{className:"pick-pane"},c.a.createElement("div",{className:"channels"},c.a.createElement("div",{className:"title"},"Channels"),c.a.createElement("div",{className:"content-box"},a)),c.a.createElement("div",{className:"dms"},c.a.createElement("div",{className:"title"},c.a.createElement("span",null,c.a.createElement(Qn.a,null,"Send individually"),"Direct Messages")),c.a.createElement("div",{className:"content-box"},i)))}),Ur=n(998),Fr=n.n(Ur),Pr=n(999),Hr=n.n(Pr),Br=(n(2071),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"state",{suggestions:[],selection:{pos:0,sec:0}}),W()(V()(V()(n)),"slackSearchTimer",null),W()(V()(V()(n)),"onInputChange",function(e){var t=e.target.textContent.toLowerCase().trim();n.props.updateShareModalSearchQuery(t),n.debounceSearch()}),W()(V()(V()(n)),"debounceSearch",We.a.debounce(function(){n.props.getSlackSearchCreator(n.props.query)},500)),W()(V()(V()(n)),"handleKeyboardEvents",function(e){if(0!==n.state.suggestions.length&&0!==n.props.query.length){var t=n.state,o=t.suggestions,r=t.selection,a=o.map(function(e){return e.channels.length-1}),i=a.length-1,s=r.pos,c=r.sec;switch(e.key){case"ArrowDown":s===a[c]?c===i?n.setState({selection:{pos:0,sec:0}}):n.setState({selection:{pos:0,sec:c+1}}):n.setState({selection:{pos:s+1,sec:c}});break;case"ArrowUp":0===s?0===c?n.setState({selection:{pos:a[i],sec:i}}):n.setState({selection:{pos:a[c-1],sec:c-1}}):n.setState({selection:{pos:s-1,sec:c}});break;case"Enter":n.handleDropDownSelection(o[c].type,o[c].channels[s].id);break;case"Escape":n.setState({selection:{sec:0,pos:0}}),n.props.updateShareModalSearchQuery(""),n.props.shareModalUpdateServerResults([]);break;default:return}e.preventDefault()}}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.multiShare,o=t.query,r=null;if(o.length>0){var a=this.state.suggestions.map(function(t,n){var r=[],a=0===n?"section-title first":"section-title";return r.push(c.a.createElement("div",{className:a},t.title)),t.channels.forEach(function(a,i){var s="#"===o.slice(0,1),l=s?a.name:a.value,u=c.a.createElement("span",{className:"emphasis"},l.slice(0,o.length)),d=l.slice(o.length),m=n===e.state.selection.sec&&i===e.state.selection.pos?" selected":"";t.type===kr.a?r.push(c.a.createElement("div",{className:"channel".concat(m),onMouseDown:function(){return e.handleDropDownSelection(kr.a,a.id)},onMouseOver:function(){return e.setState({selection:{sec:n,pos:i}})}},s?u:c.a.createElement("span",null,"#",u),d,a.is_private?c.a.createElement("img",{src:Hr.a,className:"locked"}):null)):r.push(c.a.createElement("div",{className:"people".concat(m),onMouseDown:function(){return e.handleDropDownSelection(kr.b,a.id)},onMouseOver:function(){return e.setState({selection:{sec:n,pos:i}})}},c.a.createElement("img",{src:a.avatar,className:"avatar"}),c.a.createElement("span",{className:"username"},u,d),c.a.createElement("span",{className:"name"},a.name)))}),r});a.length>0&&(r=c.a.createElement("div",{className:"drop-down",ref:function(t){return e.dropDown=t}},a))}var i=n.search_content.map(function(t,n){return c.a.createElement("div",{key:n,className:"token",onClick:e.closeTokenHandler.bind(e,t)},t.type===kr.a?t.is_private?c.a.createElement("div",{className:"locked"},c.a.createElement("img",{src:jr.a,className:"lock"})," ",t.name):"# "+t.name:t.profile.real_name_normalized||t.name,c.a.createElement("img",{src:Fr.a,className:"close-token"}))}),s=i.length>0?"search-typeahead":"search-typeahead empty";return c.a.createElement("div",{className:"search"},c.a.createElement("div",{className:"input-bar",ref:function(t){return e.inputBar=t}},i,c.a.createElement("div",{ref:function(t){return e.inputDiv=t},contentEditable:!0,"data-placeholder":"Search people and channels",onFocus:function(){return he.h(te.Ub,{query:o})},onBlur:function(){return he.h(te.Rb,{query:o})},onInput:this.onInputChange,onKeyDown:this.handleKeyboardEvents,className:s})),r)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.query,n=e.suggestions,o=e.multiShare,r=e.slack,a=o.server_results,i=a.people,s=a.channels,c=i?i.filter(function(e){return!r.team_info.people.find(function(t){return t.id===e.id})}):[],l=s?s.filter(function(e){return!r.team_info.channels.find(function(t){return t.id===e.id})}):[];this.setState({suggestions:n.map(function(e){return{title:e.title,type:e.type,channels:e.channels.filter(function(e){var n="#"===t.slice(0,1),o=e.value.toLowerCase().startsWith(t),r=e.name.toLowerCase().startsWith(t);return n?r:o}).concat(e.type===kr.b?function(e){return e.map(function(e){return{name:e.name,real_name:e.profile.real_name_normalized,avatar:e.profile.image_72,value:e.profile.real_name_normalized||e.name,id:e.id}})}(c):function(e){return e.map(function(e){return{name:"#".concat(e.name),value:e.name,id:e.id}})}(l))}}).filter(function(e){return e.channels.length>0})})}},{key:"componentDidUpdate",value:function(e){if(e.query!==this.props.query&&this.dropDown){var t=Object(vt.d)(window),n=t.x,o=t.y;n&&o&&(this.dropDown.style.left="".concat(n,"px"),this.dropDown.style.top="".concat(o+28,"px"))}}},{key:"componentDidMount",value:function(){var e=this;this.inputBar.addEventListener("click",function(){e.inputDiv.focus(),Object(vt.k)(e.inputDiv)}),this.inputDiv.addEventListener("keydown",function(t){switch(t.key){case"Backspace":var n=e.props.multiShare,o=n.search_content,r=n.editor_mode,a=We.a.last(o);0===e.props.query.length&&a&&(1===o.length&&r&&e.props.shareModalToggleEditorMode(),e.props.shareModalClickHandler(a.type,a.id));break;default:return}})}},{key:"handleDropDownSelection",value:function(e,t){this.setState({selection:{sec:0,pos:0}}),this.inputDiv.textContent="",he.h(te.Tb,{query:this.props.query,results:this.state.suggestions.reduce(function(e,t){return e+t.channels.length},0)}),this.props.shareModalClickHandler(e,t),this.props.updateShareModalSearchQuery(""),this.props.shareModalUpdateServerResults([])}},{key:"closeTokenHandler",value:function(e){var t=this.props.multiShare,n=t.search_content,o=t.editor_mode;1===n.length&&o&&this.props.shareModalToggleEditorMode(),this.props.shareModalClickHandler(e.type,e.id)}},{key:"handleClickOutside",value:function(e){!this.dropDown||this.dropDown&&i()(e.target).parents(".drop-down").length||(this.setState({selection:{sec:0,pos:0}}),this.props.updateShareModalSearchQuery(""),this.props.shareModalUpdateServerResults([]))}}]),t}(s.Component)),Vr=Object(u.connect)(function(e){var t=e.multi_share,n=e.slack;return{multiShare:t,query:t.search_query,slack:n}},function(e){return{shareModalClickHandler:function(t,n){return e(Object(Tr.a)(t,n))},updateShareModalSearchQuery:function(t){return e(Object(Er.j)(t))},getSlackSearchCreator:function(t){return e(Object(Ht.b)(t))},shareModalToggleEditorMode:function(){return e(Object(Er.e)())},shareModalUpdateServerResults:function(t){return e(Object(Er.i)(t))}}})(Vt()(Br)),zr=n(1e3),Wr=n.n(zr),Gr=(n(2072),function(e){return c.a.createElement("div",{className:"success-pane"},c.a.createElement("div",{className:"close"},c.a.createElement("div",{className:"close-button",onClick:e.clickHandler})),c.a.createElement("img",{src:Wr.a,className:"success-image"}),c.a.createElement("div",{className:"success-text"},"Your message was successfully sent!"))}),qr=(n(2073),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"state",{showSuccessPane:!0,showInviteFlow:!1}),W()(V()(V()(n)),"mentionSelectionHandler",function(e){var t=e.result,o=e.query,r=n.props.multiShare.message,a=r.text.slice(0,-1*o.length),s="@".concat(t.name),c="".concat(a," ").concat(s),l=N()({},r.mentions,W()({},s,"@".concat(t.id))),u=document.createElement("div"),d="<span class='mention' contentEditable=\"false\">".concat(s,"</span> ");n.editor.lastHtml&&(u.innerHTML=n.editor.lastHtml,u.lastChild.innerText?(u.lastChild.innerText=u.lastChild.innerText.slice(0,-1*o.length),u.lastChild.innerHTML="".concat(u.lastChild.innerHTML).concat(d)):(u.innerHTML=u.innerHTML.slice(0,-1*o.length),u.innerHTML="".concat(u.innerHTML).concat(d)),n.props.shareModalUpdateMessage(c,l),i()(".editor").each(function(){this.innerHTML=u.innerHTML}),n.props.shareModalUpdateMessageHTML(u.innerHTML),Object(vt.k)(n.editor.composer))}),W()(V()(V()(n)),"updateMessage",function(e){n.props.shareModalUpdateMessageHTML(e.target.value),n.props.shareModalUpdateMessage(e.target.text)}),W()(V()(V()(n)),"onShareClick",function(){var e=n.props,t=e.video,o=e.user,r=e.multiShare,a=r.search_content,i=r.message;a.forEach(function(e){n.props.postSlackShareCreator({video_id:t.id,sharer_id:o.id,sharee_slack_id:e.id,channel_type:e.type,message:{text:"".concat(i.text," ").concat(ot(t.id)),mentions:i.mentions,is_custom:""!==i.text}})}),n.props.shareModalToggleShareSuccess(),n.setState({showSuccessPane:!0})}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.multiShare,n=e.className;if(t.share_success)return c.a.createElement("div",{className:"multi-share-modal ".concat(n)},c.a.createElement(Cr.CSSTransitionGroup,{className:"success-container",transitionName:"success-pane",transitionEnterTimeout:400,transitionLeaveTimeout:400},this.state.showSuccessPane&&c.a.createElement(Gr,{clickHandler:this.props.shareModalToggleShareSuccess}),this.state.showInviteFlow&&c.a.createElement(Dr,{onClose:this.props.shareModalToggleShareSuccess})));var o=function(e){return[{title:"People",type:kr.b,channels:e.dm_content.map(function(e){return{name:e.dm.name,real_name:e.dm.profile.real_name_normalized,avatar:e.dm.profile.image_72,value:e.dm.profile.real_name_normalized||e.dm.name,id:e.dm.id}})},{title:"Channels",type:kr.a,channels:e.channel_content.map(function(e){return{name:"#".concat(e.channel.name),value:e.channel.name,id:e.channel.id,is_private:e.channel.is_private}})}]}(t),r=t.editor_mode?c.a.createElement(Ar,{messageHTML:t.messageHTML,changeHandler:this.updateMessage.bind(this),typeaheadSuggestions:o,mentionSelectionHandler:this.mentionSelectionHandler.bind(this),parent:this}):c.a.createElement(Rr,{channels:t.channel_content.slice(0,10),dms:t.dm_content.slice(0,10),channelClickHandler:this.props.shareModalClickHandler.bind(this,kr.a),dmClickHandler:this.props.shareModalClickHandler.bind(this,kr.b)});return c.a.createElement("div",{className:"multi-share-modal ".concat(n)},c.a.createElement("div",{className:"share-modal-title-outer"},c.a.createElement("div",{className:"share-modal-title"},"Share on Slack")),c.a.createElement(Vr,{suggestions:o}),r,c.a.createElement(xr,{multiShare:t,passiveClickHandler:this.props.shareModalToggleEditorMode.bind(this),activeClickHandler:this.onShareClick.bind(this)}))}},{key:"UNSAFE_componentWillMount",value:function(){var e=this.props.slack;e.team_info||e.fetching||this.props.getSlackInfoCreator()}},{key:"UNSAFE_componentWillUpdate",value:function(e){var t=this;!this.props.multiShare.share_success&&e.multiShare.share_success?this.shareSuccessTimeout||(this.shareSuccessTimeout=window.setTimeout(function(){t.props.multiShare.share_success&&(t.setState({showSuccessPane:!1}),e.user.has_named_video_views?t.props.shareModalToggleShareSuccess():window.setTimeout(function(){t.setState({showInviteFlow:!0})},400),t.shareSuccessTimeout=null)},1500)):this.props.multiShare.share_success&&!e.multiShare.share_success&&this.setState({showSuccessPane:!0,showInviteFlow:!1})}}]),t}(s.Component)),Kr=Object(u.connect)(function(e){var t=e.slack,n=e.user,o=e.multi_share;return{slack:t,user:n.current,multiShare:o}},function(e){return{getSlackInfoCreator:function(){return e(Object(Ht.a)())},shareModalUpdateMessage:function(t,n){return e(Object(Er.g)(t,n))},shareModalUpdateMessageHTML:function(t){return e(Object(Er.h)(t))},shareModalToggleEditorMode:function(){return e(Object(Er.e)())},shareModalClickHandler:function(t,n){return e(Object(Tr.a)(t,n))},postSlackShareCreator:function(t){return e(Object(Ht.e)(t))},shareModalToggleShareSuccess:function(){return e(Object(Er.f)())},completeTriggerCreator:function(t){return e(Object(me.a)(t))}}})(qr),Jr=(n(2074),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"state",{resultText:null}),W()(V()(V()(n)),"copy",function(){var e,t=i()(n.rootElement).find(".input");n.copyTimeout&&(window.clearTimeout(n.copyTimeout),n.copyTimeout=null),e=fe.a(t[0])?"Link Copied!":"Error! :-(",n.setState({resultText:e}),n.copyTimeout=window.setTimeout(function(){n.setState({resultText:null}),n.copyTimeout=null},2e3),n.trackEvent(te.rb)}),n}return H()(t,e),L()(t,[{key:"trackEvent",value:function(e){he.h(e,{video_id:this.props.video.id})}},{key:"render",value:function(){var e=this,t=this.props,n=t.withActionDot,o=t.withLinkActionDot,r=t.className,a=this.state.resultText,i=null;return null!==this.state.ctaType&&(i=c.a.createElement("div",{className:"share-video-methods ".concat(r," ").concat(a?"share-widget-activated":""),ref:function(t){return e.rootElement=t}},n&&c.a.createElement(Mn,{position:"top-left"}),c.a.createElement("div",{className:"title"},"Send Your Video"),c.a.createElement("div",{className:"link-and-buttons"},c.a.createElement("span",{className:"link-box",onClick:function(){return e.copy()}},o&&c.a.createElement(Mn,{position:"top-right"}),c.a.createElement("input",{className:"input",readOnly:!0,value:window.location.href})),c.a.createElement(Dt.a,{onClicked:this.copy,buttonClass:"rp-primary-3 copy-button copy-link",value:a||"Copy Link"})))),i}}]),t}(s.PureComponent));W()(Jr,"defaultProps",{video:{},withActionDot:!1,withLinkActionDot:!1,className:""});var Yr=Jr,Qr=(n(2075),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"defaultStyle",{width:"auto",height:"auto",overflow:"auto"}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.isLoggedInChecked,n=e.isLoggedIn,o=e.currentUserIsOwner,r=e.user,a=e.video,i=this.props.completeTriggerCreator.bind(this,se.f),s=null,l=!1;if(t&&n&&o){l=null!=r.oauth[k.d]&&Object(wr.a)(r.oauth[k.d].scopes);var u=c.a.createElement(Kr,{video:a,className:this.constructor.shareMethodsClassName,key:"multi-share"});l&&(s=u)}var d=c.a.createElement("div",{className:"connect-to-slack",key:"connect-to-slack"},c.a.createElement("div",{className:"connect-to-slack-header"},"Easily Send to Slack"),c.a.createElement("button",{onClick:this.connect.bind(this,i),className:"slack-button"},"Connect Slack")),m=c.a.createElement(Yr,{key:"share-widget",className:this.constructor.shareMethodsClassName,video:a,withActionDot:this.props.shareVideoActionDot,withLinkActionDot:this.props.shareVideoLinkActionDot});return c.a.createElement("div",{className:"right-panel"},m,c.a.createElement(Yo,{key:"editor-widget",onEnterTrimMode:this.props.onEnterTrimMode,video:a}),s,!l&&d)}},{key:"connect",value:function(e){var t=this;Lt.c(k.e,function(n){var o,r=Object(C.d)("redirect_after");t.trackEvent(te.sb),e(),o=decodeURIComponent(r),null!=n.error&&(o+="?oauth_error="+n.error),n.loginSuccess?ge.d(function(){window.location.href=o}):window.location.href=o})}},{key:"componentDidUpdate",value:function(e){!e.editorActive&&this.props.editorActive&&(this.exitAnimation=q.a.timeline({targets:".right-panel>*:not(.edit-video)"}).add({opacity:0,duration:10,easing:"linear",offset:75}).add({easing:"easeInOutQuart",marginBottom:0,marginTop:0,paddingTop:0,paddingBottom:0,minHeight:0,height:0,duration:350,offset:350})),e.editorActive&&!this.props.editorActive&&this.exitAnimation&&(this.exitAnimation.reverse(),this.exitAnimation.play())}},{key:"trackEvent",value:function(e){he.h(e,{video_id:this.props.video.id})}}]),t}(s.Component));W()(Qr,"shareMethodsClassName","share-methods");var Xr=Object(u.connect)(function(e){var t=e.share_video,n=t.current_user_is_owner,o=t.video,r=e.user,a=r.is_logged_in,i=r.is_logged_in_checked,s=r.current,c=e.triggers.triggers,l=e.editor,u=l.cta_flow,d=l.thumbnail_flow,m=e.onboarding,p=m.current_tour,h=m.tip,f=m.show_tips,v=m.show_chat_modal;return{currentUserIsOwner:n,isLoggedIn:a,isLoggedInChecked:i,shareVideoActionDot:h==re.n&&!f&&!v,shareVideoLinkActionDot:p==Ie.e&&v,triggers:c,video:o,user:s,editorActive:u||d}},function(e){return{completeTriggerCreator:function(t){return e(Object(me.a)(t))}}})(Qr),Zr=n(21),$r=n.n(Zr),ea=(n(2076),2e3),ta=function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"state",{copied:null}),W()(V()(V()(n)),"handleClick",function(e){e.stopPropagation(),fe.b(n.input);var t=fe.a(n.input);n.setState({copied:t},function(){setTimeout(function(){n.setState({copied:null},function(){n.props.onClick(e,t)})},ea)})}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this,t=this.props.video,n=this.state.copied,o=["copy-link-item",this.state.copied&&"success"].filter(Boolean).join(" ");return c.a.createElement("li",{className:o,onClick:this.handleClick},c.a.createElement("div",{className:"icon"}),c.a.createElement("span",null,null===n&&"Link",!0===n&&"Link copied!",!1===n&&"Error, try again"),c.a.createElement("input",{ref:function(t){return e.input=t},readOnly:!0,value:"".concat(ie.w,"/share/").concat(t.id)}))}}]),t}(s.Component);W()(ta,"defaultProps",{onClick:function(){}});var na=ta,oa=n(117),ra=(n(2077),{onClose:gn.a.func,onOpen:gn.a.func,closeHandler:gn.a.func,vAlign:gn.a.oneOf(["auto","top","bottom"])}),aa=function(e){function t(e){var n;return I()(this,t),(n=R()(this,F()(t).call(this,e))).state={position_rerender:!1},n.onTransitionEnd=n.onTransitionEnd.bind(V()(V()(n))),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.children,o=t.show,r=this.getPositionStyles(),a=o?"show":"",i=this.props.additionalClass,s=void 0===i?"":i;return c.a.createElement("div",{className:"dropdown-menu ".concat(a," ").concat(s),ref:function(t){return e.menu=t},onTransitionEnd:this.onTransitionEnd,style:r},n)}},{key:"componentDidMount",value:function(){this.setState({position_rerender:!0})}},{key:"onTransitionEnd",value:function(){var e=this.props,t=e.onClose,n=e.onOpen,o=e.show;o&&n?We.a.defer(n):!o&&t&&We.a.defer(t)}},{key:"getPositionStyles",value:function(){if(this.menu){var e=this.props,t=e.align,n=e.show,o=this.props.vAlign,r={},a=this.menu.parentNode,i=a.getBoundingClientRect(),s=i.right-(this.menu.clientWidth+5),c=document.body.offsetWidth-i.left-(this.menu.clientWidth+5),l=-(this.menu.clientWidth/2-a.clientWidth/2);switch(t){case"right":r.right=Math.min(0,s);break;case"center":r.left=Math.min(l,c);break;case"left":default:r.left=Math.min(0,c)}var u=document.body.clientHeight,d=i.top+i.height/2;"auto"===o&&(o=d>u/2?"bottom":top);var m=("top"==o?1:-1)*((n?7:-7)-7);switch(o){default:case"top":r.top=a.clientHeight+m+4;break;case"bottom":r.top=-this.menu.clientHeight+m-4}if(null!=r.left){var p=this.menu.getBoundingClientRect().left-parseInt(this.menu.style.left,10)+r.left;p<0&&(r.left+=Math.abs(p))}return r}}}]),t}(s.PureComponent);aa.propTypes=ra;var ia=aa,sa=(n(2078),function(e){var t=e.label,n=e.selected,o=e.value,r=e.onSelection;return c.a.createElement("div",{className:"radio-button-container","data-val":o,onClick:r},c.a.createElement("div",{"data-val":o,className:"radio-button-check".concat(n?" radio-selected":"")},c.a.createElement("div",{"data-val":o,className:"radio-button-check-center"})),c.a.createElement("span",{"data-val":o,className:"radio-label"},t))}),ca=function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"onSelectRadioButton",function(e){n.props.onSelection(e.target.dataset.val)}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.selectedValue,o=t.options,r=t.groupClass;return c.a.createElement("div",{className:r},o.map(function(t){var o=t.label,r=t.value;return c.a.createElement(sa,{label:o,value:r,key:r,onSelection:e.onSelectRadioButton,selected:r===n})}))}}]),t}(s.Component),la=(n(2079),1280),ua=800,da=[{label:"Responsive",value:"responsive"},{label:"Fixed Size",value:"fixed"}],ma=function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"state",{embedCopied:!1,showEmbedCode:!1,sizeType:"responsive",initialHeight:ua,initialWidth:la,height:ua,width:la}),W()(V()(V()(n)),"selectAndCopyEmbedCode",function(){if(n.embedNode){var e=fe.a(n.embedNode);n.setState({embedCopied:e}),n.copyTimeout&&(window.clearTimeout(n.copyTimeout),n.copyTimeout=null),n.copyTimeout=window.setTimeout(function(){n.setState({embedCopied:!1})},3e3)}}),W()(V()(V()(n)),"onSizeSelection",function(e){n.setState({sizeType:e,embedCopied:!1})}),W()(V()(V()(n)),"toggleEmbedCodeView",function(){return n.setState({showEmbedCode:!n.state.showEmbedCode})}),W()(V()(V()(n)),"onMenuClick",function(e){return e.stopPropagation()}),W()(V()(V()(n)),"onWidthChange",function(e){var t=n.state.aspectRatio,o=Math.ceil(e/t);n.setState({width:e,height:o})}),W()(V()(V()(n)),"onHeightChange",function(e){var t=n.state.aspectRatio,o=Math.ceil(e*t);n.setState({width:o,height:e})}),n}return H()(t,e),L()(t,[{key:"componentDidUpdate",value:function(e){!e.embedDropdownOpen&&this.props.embedDropdownOpen&&this.selectAndCopyEmbedCode()}},{key:"render",value:function(){var e=this,t=this.props,n=t.embedDropdownOpen,o=t.align,r=t.vAlign,a=t.video,i=this.state,s=i.showEmbedCode,l=i.embedCopied,u=i.sizeType,d=i.width,m=i.height,p=i.aspectRatio,h="responsive"===u,f=h?Object(oa.g)(a.id,1/p):Object(oa.e)(a.id,d,m),v=!!h,g=s?"":" hide-code";return c.a.createElement(ia,{show:n,align:o,vAlign:r,additionalClass:"embed-dropdown"},c.a.createElement("div",{className:"embed-dropdown-contents ".concat(s?"code-expanded":""),onClick:this.onMenuClick},c.a.createElement("div",{className:"embed-code-container",onClick:this.selectAndCopyEmbedCode},c.a.createElement("div",{className:"embed-code".concat(g),ref:function(t){return e.embedNode=t}},f)),c.a.createElement("div",{className:"embed-menu"},c.a.createElement("div",{className:"embed-dropdown-title"},"Embed code"),c.a.createElement(ca,{groupClass:"embed-radio-group",options:da,selectedValue:this.state.sizeType,onSelection:this.onSizeSelection}),c.a.createElement("div",{className:"embed-code-size-group"},c.a.createElement(Rt.a,{fieldValue:this.state.width,fieldId:"embed-code-width",fieldType:"number",inputClass:"embed-code-size-input",onChange:this.onWidthChange,disabled:v}),c.a.createElement("span",{className:"embed-code-symbol"},"×"),c.a.createElement(Rt.a,{fieldValue:this.state.height,fieldId:"embed-code-height",fieldType:"number",inputClass:"embed-code-size-input",onChange:this.onHeightChange,disabled:v})),c.a.createElement(Dt.a,{buttonClass:"copy-embed-button ".concat(l?"embed-copied":""),buttonType:"rp-primary-4",value:l?"Code Copied!":"Copy Code",onClicked:this.selectAndCopyEmbedCode}),c.a.createElement("div",{className:"embed-show-code-button",onClick:this.toggleEmbedCodeView},s?"Hide Code":"Preview Code"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.video.video_properties,o=n.width,r=n.height;if(!(o!==t.initialWidth||r!==t.initialHeight))return null;var a=o/r,i=o,s=r;return o>630&&(i=630,s=Math.ceil(i/a)),{initialWidth:o,initialHeight:r,width:i,height:s,aspectRatio:a}}}]),t}(s.Component),pa=(n(2080),function(e){function t(){return I()(this,t),R()(this,F()(t).apply(this,arguments))}return H()(t,e),L()(t,[{key:"render",value:function(){return c.a.createElement("li",{className:"share-video-embed-code-dropdown-item",onClick:this.props.onClick},c.a.createElement("div",{className:"icon"}),c.a.createElement("span",null,"Embed"))}}]),t}(s.Component)),ha=(n(2081),function(e){function t(e){var n;return I()(this,t),(n=R()(this,F()(t).call(this,e))).onClick=n.onClick.bind(V()(V()(n))),n}return H()(t,e),L()(t,[{key:"render",value:function(){return c.a.createElement("li",{className:"share-video-facebook-dropdown-item",onClick:this.onClick},c.a.createElement("div",{className:"icon"}),c.a.createElement("span",null,"Facebook"))}},{key:"onClick",value:function(){var e=M()(O.a.mark(function e(){var t,n,o,r;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.currentUserIsOwner,o=t.video,r=n?"recorded via":"saw on",e.next=4,new Promise(function(e){window.fbReady(e)});case 4:window.FB.ui({method:"share",display:"popup",quote:"Check out this video I ".concat(r," Loom."),href:"".concat(ie.w,"/share/").concat(o.id)}),this.props.onClick&&this.props.onClick();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}(s.Component)),fa=(n(2082),function(e){function t(e){var n;return I()(this,t),(n=R()(this,F()(t).call(this,e))).onClick=n.onClick.bind(V()(V()(n))),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props.video,t="".concat(ie.w,"/share/").concat(e.id),n="https://mail.google.com/mail/?view=cm&fs=1&"+["su=".concat(window.encodeURIComponent("".concat(e.name," [video]"))),"body=".concat(window.encodeURIComponent(t))].join("&");return c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:n,onClick:this.onClick},c.a.createElement("li",{className:"share-video-gmail-dropdown-item"},c.a.createElement("div",{className:"icon"}),c.a.createElement("span",null,"Gmail")))}},{key:"onClick",value:function(){this.props.onClick&&this.props.onClick()}}]),t}(s.Component)),va=(n(2083),function(e){function t(e){var n;return I()(this,t),(n=R()(this,F()(t).call(this,e))).onClick=n.onClick.bind(V()(V()(n))),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.currentUserIsOwner,n=e.video,o=t?"recorded via":"saw on",r="".concat(ie.w,"/share/").concat(n.id),a=window.encodeURI("https://twitter.com/share?text="+"Check out this video I ".concat(o," @useloom.")+"&url=".concat(r,"&hashtags=productivity,video"));return c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:a,onClick:this.onClick},c.a.createElement("li",{className:"share-video-twitter-dropdown-item"},c.a.createElement("div",{className:"icon"}),c.a.createElement("span",null,"Twitter")))}},{key:"onClick",value:function(){this.props.onClick&&this.props.onClick()}}]),t}(s.Component)),ga=(n(2084),{embed_dropdown_open:!1}),ba=function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"state",ga),W()(V()(V()(n)),"handleClickOutside",function(){n.setState(ga),n.props.show&&n.props.onHide()}),W()(V()(V()(n)),"handleCopyLinkClick",function(e){e.stopPropagation(),he.h(te.Bb),n.props.onHide()}),W()(V()(V()(n)),"handleEmbedCodeClick",function(e){e.stopPropagation(),n.setState({embed_dropdown_open:!0}),he.h(te.yb),n.props.onHide()}),W()(V()(V()(n)),"trackFacebookClick",function(){n.props.isLoggedIn&&$r()("/api/users/shared-video-on-fb",{method:"POST",credentials:"include"}).catch(function(e){y.b(e,"error POST /api/users/shared-video-on-fb")}),he.h(te.zb)}),W()(V()(V()(n)),"trackTwitterClick",function(){n.props.isLoggedIn&&$r()("/api/users/tweeted-video",{method:"POST",credentials:"include"}).catch(function(e){y.b(e,"error POST /api/users/tweeted-video")}),he.h(te.Db)}),W()(V()(V()(n)),"trackGmailClick",function(){he.h(te.Ab)}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.currentUserIsOwner,n=e.hasGmailAccount,o=e.video,r=this.state.embed_dropdown_open,a=this.props,i=a.show,s=a.align,l=a.vAlign,u=null;return n&&(u=c.a.createElement(fa,{onClick:this.trackGmailClick,video:o})),c.a.createElement("div",{className:"share-video-share-dropdown-menu"},c.a.createElement(ia,{show:i,align:s,vAlign:l,additionalClass:"share-dropdown"},c.a.createElement(na,{onClick:this.handleCopyLinkClick,video:o}),c.a.createElement(pa,{onClick:this.handleEmbedCodeClick}),c.a.createElement("div",{className:"embed"}),c.a.createElement(va,{currentUserIsOwner:t,onClick:this.trackTwitterClick,video:o}),c.a.createElement(ha,{currentUserIsOwner:t,onClick:this.trackFacebookClick,video:o}),u),c.a.createElement(ma,{embedDropdownOpen:r,align:s,vAlign:l,video:o}))}},{key:"componentDidUpdate",value:function(e){!e.show&&this.props.show&&this.setState(ga)}}]),t}(s.Component);W()(ba,"defaultProps",{show:!1,onHide:function(){},align:"left",vAlign:"auto"});var _a=Vt()(ba),ya=n(1001),wa=n.n(ya),Ca=n(1002),Ea=n.n(Ca),ka=n(1003),Ta=n.n(ka),Na=n(1004),Sa=n.n(Na),Oa=(n(2085),function(e){var t={width:e.percentage};return c.a.createElement("div",{className:"thumb-zoom-level",style:t},c.a.createElement("span",null))}),ja=n(292),Ma=n(142),xa=(n(2086),4),Ia=1,Aa=function(e){var t=e.height,n=e.width;return c.a.createElement("div",{className:"rule-of-thirds-container",style:{width:n,height:t}},c.a.createElement("div",{className:"rule-of-thirds-line horizontal",style:{top:t/3,width:n}}),c.a.createElement("div",{className:"rule-of-thirds-line horizontal",style:{top:2*t/3,width:n}}),c.a.createElement("div",{className:"rule-of-thirds-line vertical",style:{left:n/3,height:t}}),c.a.createElement("div",{className:"rule-of-thirds-line vertical",style:{left:2*n/3,height:t}}))},La=function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"state",{window_dims:{height:0,width:0},scale:1,position:{x:0,y:0},dragging:!1}),W()(V()(V()(n)),"onPositionChange",function(e){n.setState({position:e})}),W()(V()(V()(n)),"handleMove",function(){n.state.dragging||n.setState({dragging:!0})}),W()(V()(V()(n)),"handleInteractionEnd",function(){n.setState({dragging:!1})}),W()(V()(V()(n)),"onZoomSliderMove",function(e){var t=n.zoomSlider.calculateDistance(e);n.setState({scale:Ia+t*(xa-Ia)})}),W()(V()(V()(n)),"getZoomPercent",function(){return(n.state.scale-Ia)/(xa-Ia)}),W()(V()(V()(n)),"zoomIn",function(){var e=n.state.scale;n.setState({scale:Math.min(e+.1,xa)})}),W()(V()(V()(n)),"zoomOut",function(){var e=n.state.scale;n.setState({scale:Math.max(e-.1,Ia)})}),W()(V()(V()(n)),"handleThumbnailUpload",function(){if(!n.props.currentlyUploading){var e=n.props,t=e.videoId,o=e.thumbnailLocalUrl,r=e.ogImageDimensions,a=n.state,i=a.scale,s=a.position,c=r.width,l=r.height,u=n.cropper.getCroppingRect(),d=u.x,m=u.y,p=u.width,h=u.height;n.props.uploadVideoThumbnail(t,o,{x:d,y:m,width:p,height:h,full_width:c,full_height:l,position_info:{scale:i,position:s}})}}),W()(V()(V()(n)),"updateDimension",function(){var e=n.container.getBoundingClientRect(),t=e.height,o=e.width;n.setState({window_dims:{height:t,width:o}})}),W()(V()(V()(n)),"setOgThumbnailPositioning",function(){var e=n.props.ogThumbnailDims.position_info,t=e.position,o=e.scale;n.setState({position:t,scale:o})}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.thumbnailLocalUrl,o=t.currentlyUploading,r=this.state,a=r.window_dims,i=r.scale,s=r.dragging,l=r.position;return c.a.createElement("div",{ref:function(t){return e.container=t},className:"thumbnail-cropper-window"},n&&c.a.createElement(wa.a,{position:l,ref:function(t){return e.cropper=t},image:n,width:a.width,height:a.height,scale:i,style:{cursor:"move"},onMouseMove:this.handleMove,onMouseUp:this.handleInteractionEnd,onPositionChange:this.onPositionChange,border:0}),!s&&!o&&n&&c.a.createElement("img",{src:Sa.a,className:"thumb-drag-instructions"}),n&&!o&&c.a.createElement(Aa,{height:a.height,width:a.width}),o&&c.a.createElement(Ma.a,null),n&&!o&&c.a.createElement("div",{className:"thumb-zoom-pill"},c.a.createElement("img",{src:Ta.a,className:"thumb-zoom-pill-scale",onClick:this.zoomOut}),c.a.createElement(ja.a,{ref:function(t){return e.zoomSlider=t},label:"Date Range",getPercent:this.getZoomPercent,valueNow:this.getZoomPercent,onMouseMove:this.onZoomSliderMove},c.a.createElement(Oa,null)),c.a.createElement("img",{src:Ea.a,className:"thumb-zoom-pill-scale",onClick:this.zoomIn})))}},{key:"componentDidMount",value:function(){this.updateDimension(),window.addEventListener("resize",this.updateDimension),this.props.ogThumbnailDims&&this.setOgThumbnailPositioning()}},{key:"componentDidUpdate",value:function(e){!e.shouldSave&&this.props.shouldSave&&this.handleThumbnailUpload(),!e.ogThumbnailDims&&this.props.ogThumbnailDims&&this.setOgThumbnailPositioning()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimension)}}]),t}(s.Component),Da=Object(u.connect)(function(e){var t=e.editor.thumbnail_data,n=e.share_video.video,o=n&&n.thumbnails||{};return{thumbnailLocalUrl:t.thumbnail_local,ogImageDimensions:t.og_dims,shouldSave:t.initiate_save,currentlyUploading:t.uploading,ogThumbnailDims:(o||{}).og_thumbnail_crop_dims}},function(e){return{uploadVideoThumbnail:function(t,n,o){return e(Object(de.k)(t,n,o))}}})(La),Ra=n(301),Ua=n.n(Ra),Fa=(n(2087),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"state",{new_title:null,should_select_input:!1,title_initial_focus:!1,title_focused:!1}),W()(V()(V()(n)),"updateInputRef",function(e){n.input=e,Ua()(e)}),W()(V()(V()(n)),"updateMouseDown",function(e){n.lastElementClicked=e.target}),W()(V()(V()(n)),"updateMouseUp",function(){n.lastElementClicked=null}),W()(V()(V()(n)),"focusTitle",function(){if(!n.state.title_focused){var e=n.props.video.name||n.getDefaultTitleName();n.setState({new_title:e,title_focused:!0,should_select_input:!0})}}),W()(V()(V()(n)),"handleInputBlur",function(){var e=n.state,t=e.new_title;e.title_focused&&(Object(vt.h)(n.lastElementClicked,"share-video-title-bar",10)||(n.props.onTitleUpdate(t),n.setState({new_title:null,title_focused:!1,should_select_input:!1})))}),W()(V()(V()(n)),"handleNewTitleUpdate",function(e){var t=e.target.value.replace(/\n/g," ").trimLeft();n.setState({new_title:t})}),W()(V()(V()(n)),"handleTitleKeyPress",function(e){if(xt.g.includes(e.key)){var t=n.state.new_title;n.props.onTitleUpdate(t),n.setState({new_title:null,title_focused:!1,should_select_input:!1})}}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.currentUserIsOwner,o=t.video,r=t.titleTourTipIsActive;if(null==o||null==o.name)return c.a.createElement("div",{className:"share-video-title-bar empty"});var a=this.state,i=a.new_title,s=a.title_focused,l=o.name||this.getDefaultTitleName(),u="",d="",m="";return s?m="hidden":(u=n?"editable":"",d="hidden"),c.a.createElement("div",{className:"share-video-title-bar",ref:function(t){return e.titleBar=t}},r&&c.a.createElement(Mn,{position:"outsideLeftCenter"}),c.a.createElement("textarea",{className:"share-video-title-bar-input ".concat(d),ref:this.updateInputRef,value:i||"",rows:1,maxLength:Nt.g,onBlur:this.handleInputBlur,onChange:this.handleNewTitleUpdate,onKeyPress:this.handleTitleKeyPress}),c.a.createElement("h1",{className:"".concat(u," ").concat(m),ref:function(t){return e.title=t},onClick:n?this.focusTitle:null},l))}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.state,o=n.new_title,r=n.should_select_input;if(this.props.shouldFocusTitle&&!this.state.title_initial_focus)return this.setState({title_initial_focus:!0}),this.focusTitle();null!=o&&r&&null!=this.input&&(this.input.select(),this.setState({should_select_input:!1},function(){Ua.a.update(t.input)}));var a=e.titleTourTipIsActive!==this.props.titleTourTipIsActive;this.props.titleTourTipIsActive&&a&&this.focusTitle()}},{key:"componentDidMount",value:function(){this.props.shouldFocusTitle&&!this.state.title_initial_focus&&(this.setState({title_initial_focus:!0}),this.focusTitle()),document.addEventListener("mousedown",this.updateMouseDown,!1),document.addEventListener("mouseup",this.updateMouseUp,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.updateMouseDown),document.removeEventListener("mouseup",this.updateMouseUp)}},{key:"getDefaultTitleName",value:function(){var e=this.props.video;return ht()(e.createdAt).format("hh:mm A - MM/DD/YY")}}]),t}(s.Component)),Pa=Object(u.connect)(function(e){var t=e.featureTour,n=t.currentTour,o=t.tourOpen,r=t.tourActive;return{titleTourTipIsActive:n===Xo.a&&o&&r}})(Fa),Ha=(n(2088),function(e){var t=e.onClick;return c.a.createElement("div",{className:"trash-button",onClick:t},c.a.createElement(Qn.a,null,"Delete video"))}),Ba=(n(2089),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"state",{show_confirmation_modal:!1}),W()(V()(V()(n)),"leaveTrimMode",function(){n.props.leaveTrimModeCreator(),n.props.onLeave()}),W()(V()(V()(n)),"onReturnClicked",function(){if(!n.state.show_confirmation_modal){if(n.props.newChanges)return n.setState({show_confirmation_modal:!0});n.leaveTrimMode()}}),W()(V()(V()(n)),"onPublishClicked",function(){var e=n.props.video;n.props.patchTrimVideoCreator(e,n.props.onLeave)}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.state.show_confirmation_modal,t="";return this.props.newChanges&&e&&(t="show"),c.a.createElement("div",{className:"return-to-video-react-container"},c.a.createElement("div",{className:"return-to-video-button",onClick:this.onReturnClicked},c.a.createElement("span",{className:"arrow"}),c.a.createElement("span",null,"Return to video")),c.a.createElement("div",{className:"return-to-video-confirmation-modal ".concat(t)},c.a.createElement("p",null,"Are you sure you'd like to discard your changes?"),c.a.createElement("div",{className:"button-bar"},c.a.createElement(Dt.a,{buttonClass:"return-button",value:"Discard",buttonType:"rp-secondary-3",onClicked:this.leaveTrimMode}),c.a.createElement(Dt.a,{buttonClass:"publish-button",value:"Publish Changes",buttonType:"rp-primary-3",onClicked:this.onPublishClicked}))))}},{key:"componentDidUpdate",value:function(e){!e.newChanges&&this.props.newChanges&&this.state.show_confirmation_modal&&this.setState({show_confirmation_modal:!1})}},{key:"handleClickOutside",value:function(){this.state.show_confirmation_modal&&this.setState({show_confirmation_modal:!1})}}]),t}(s.Component)),Va=Object(u.connect)(function(e){return{newChanges:e.trimming.new_changes}},function(e){return{leaveTrimModeCreator:function(){return e(Object(pe.c)())},patchTrimVideoCreator:function(t,n){return e(Object(pe.d)(t,n))}}})(Vt()(Ba)),za=(n(2090),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"onRevertToOriginalClicked",M()(O.a.mark(function e(){var t;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props.video,window.confirm("Are you sure you'd like to delete all of your edits?")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,n.props.updateTrimRangesCreator([]);case 5:return e.next=7,n.props.patchTrimVideoCreator(t,n.props.onRevertClicked);case 7:case"end":return e.stop()}},e,this)}))),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.originalRanges,n=e.video,o=t.length>0?"enabled":"";return c.a.createElement("div",{className:"trim-footer"},c.a.createElement("div",{className:"left-section"},c.a.createElement(Va,{onLeave:this.props.onRevertClicked,video:n})),c.a.createElement("div",{className:"middle-section"},c.a.createElement("div",{className:"".concat(this.constructor.className," ").concat(o),onClick:this.onRevertToOriginalClicked},c.a.createElement("span",{className:"revert-icon"}),c.a.createElement("span",null,"Revert to Original"))),c.a.createElement("div",{className:"right-section"},c.a.createElement("a",{className:"trim-help",href:ie.I,target:"_blank",rel:"noreferrer noopener"},"Help Center")))}}]),t}(s.Component));W()(za,"className","revert-to-original-button");var Wa=Object(u.connect)(function(e){return{originalRanges:e.trimming.original_ranges}},function(e){return{patchTrimVideoCreator:function(t,n){return e(Object(pe.d)(t,n))},updateTrimRangesCreator:function(t){return e(Object(pe.m)(t))}}})(za),Ga=(n(2091),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"state",{loading:!1}),W()(V()(V()(n)),"handleArchiveClick",M()(O.a.mark(function e(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loading:!0}),e.prev=1,e.next=4,n.props.onArchiveButtonClicked(n.props.videoId);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),n.setState({loading:!1});case 9:case"end":return e.stop()}},e,this,[[1,6]])}))),W()(V()(V()(n)),"handleDeleteClick",M()(O.a.mark(function e(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loading:!0}),e.prev=1,e.next=4,n.props.onDeleteButtonClicked(n.props.videoId);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),n.setState({loading:!1});case 9:case"end":return e.stop()}},e,this,[[1,6]])}))),n}return H()(t,e),L()(t,[{key:"render",value:function(){return c.a.createElement(He.a,{show:!0,showClose:!1,onDismiss:this.props.onCloseModal},c.a.createElement("div",{className:"video-remove-modal"},c.a.createElement("p",null,"How would you like to remove this video?"),c.a.createElement("div",{className:"button-bar"},c.a.createElement(Dt.a,{disabled:this.state.loading,onClicked:this.handleArchiveClick,buttonClass:"rp-secondary-4",value:"Archive"}),c.a.createElement(Dt.a,{disabled:this.state.loading,onClicked:this.handleDeleteClick,buttonClass:"rp-primary-4",value:"Delete"}))))}}]),t}(s.Component)),qa=Object(u.connect)(null,function(e){return{onArchiveButtonClicked:function(t){return e(Object(de.a)(t))},onDeleteButtonClicked:function(t){return e(Object(de.c)(t))}}})(Ga),Ka=n(448),Ja=n(315),Ya=n(449),Qa=n(540),Xa=(n(2092),function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"state",{fadeLeft:0}),W()(V()(V()(n)),"viewersRef",function(e){n.viewers&&n.viewers.removeEventListener("scrol",n.handleScroll),n.viewers=e,n.viewers&&n.viewers.addEventListener("scroll",n.handleScroll)}),W()(V()(V()(n)),"handleScroll",function(e){var t=e.target.scrollWidth;n.setState({fadeLeft:t-56})}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.hasNamedVideoViews,o=t.views,r=t.trimMode,a=t.inviteProvider,i=void 0===a?null:a;if(!o)return null;if(r)return 0===o.total?c.a.createElement("div",{className:"viewer-list"}):c.a.createElement("div",{className:"viewer-list views"});var s=null;if(!n){he.h(te.gc,{source:te.W,provider:i}),s=c.a.createElement("a",{href:"#",className:"viewer-list-locked",onClick:function(t){t.preventDefault(),i===k.a?e.props.toggleGoogleInviteModal():e.props.toggleSlackInviteModal()}},"Find out who viewed your video")}var l=(o.named||[]).map(function(e){if(e.avatar)return e;var t=e.firstName||"",n=e.lastName||"";return{firstName:t,lastName:n,picText:t.charAt(0)+n.charAt(0),avatarClass:"no-pic"}});o.distinct>l.length&&l.push({firstName:"Anonymous",picText:"+"+(o.distinct-l.length),avatarClass:"anon"});var u=c.a.createElement("div",{className:"viewers-outer"},c.a.createElement("div",{className:"viewers",ref:this.viewersRef},l.map(function(e,t){return c.a.createElement("div",{className:"viewer",key:t},e.avatar&&c.a.createElement("img",{className:"avatar",src:Object(Zt.b)(e.avatar)}),!e.avatar&&c.a.createElement("div",{className:"avatar ".concat(e.avatarClass)},e.picText),c.a.createElement("span",{className:"viewer-name"},e.firstName))}),c.a.createElement("div",{className:"viewer viewer-empty"})),c.a.createElement("div",{className:"viewers-fade"}));return c.a.createElement("div",{className:"viewer-list"},c.a.createElement("div",{className:"info-bar"},c.a.createElement("span",{className:"title"},"Video Views"),c.a.createElement("span",{className:"view-count"},o.total," total,"," ",o.distinct," unique")),s||o.total>0&&u)}}]),t}(c.a.PureComponent)),Za=Object(u.connect)(function(e){return{hasNamedVideoViews:e.user.current.has_named_video_views,views:(e.share_video.video||{}).views,trimMode:e.trimming.in_trim_mode}},function(e){return{toggleSlackInviteModal:function(){return e(Object(hn.c)(!0,te.W))},toggleGoogleInviteModal:function(){return e(Object(h.d)(!0,te.W))}}})(Xa),$a=(n(2093),"Share Video"),ei="has-status-bar",ti=function(e){function t(){var e,n;I()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=R()(this,(e=F()(t)).call.apply(e,[this].concat(r))),W()(V()(V()(n)),"state",{dragging:!1,show_create_recording_tooltip:!1,show_ext_install_bubb:!1,show_signup_modal:!1,show_share_dropdown:!1,startTimeParam:Object(C.d)("t"),video_id:window.location.pathname.replace("/share/","")}),W()(V()(V()(n)),"handleFetchVideo",M()(O.a.mark(function e(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.fetchVideoCreator(n.state.video_id);case 2:n.props.fetchShareVideoDownloadUrlCreator();case 3:case"end":return e.stop()}},e,this)}))),W()(V()(V()(n)),"handleDropzoneDrop",function(e){n.setState({dragging:!1}),n.handleThumbnailFile(e[0])}),W()(V()(V()(n)),"handleThumbnailFile",function(e){if(e){var t=new FileReader;t.onload=function(e){var t=e.target.result,o=new Image;o.onload=function(){n.props.setLocalThumbnail(t,{width:o.width,height:o.height})},o.src=t},t.readAsDataURL(e)}}),W()(V()(V()(n)),"handleInstallModalButtonClick",function(){var e=n.props.video.id;he.h(te.Eb,{video_id:e})}),W()(V()(V()(n)),"handleAccountOverlayClose",function(){n.setState({show_signup_modal:!1})}),W()(V()(V()(n)),"handleExtensionInstalled",function(){var e=n.props.isLoggedIn;if(n.setState({show_ext_install_bubb:!1}),!e)return n.props.updateLoginOrSignUp(!1),n.setState({show_signup_modal:!0});ge.a&&n.setState({show_create_recording_tooltip:!0})}),W()(V()(V()(n)),"handleExtensionInstallError",function(e){var t=n.props.isLoggedIn;n.props.showErrorBar(v.a,e),t||(n.props.updateLoginOrSignUp(!1),n.setState({show_signup_modal:!0}))}),W()(V()(V()(n)),"handleDeleteButtonClicked",function(){n.props.updateShareVideoShowRemoveModal(!0)}),W()(V()(V()(n)),"handleLeaveRemoveModal",function(){n.props.updateShareVideoShowRemoveModal(!1)}),W()(V()(V()(n)),"handleEnterTrimMode",function(){var e=n.props.video,t=e.id,o=e.processing_information.trim_ranges,r=void 0===o?[]:o;n.props.enterTrimModeCreator(r),n.props.updateShareVideoInTrimMode(!0),he.h(te.D,{id:t,has_been_trimmed:r.length>0}),n.props.onEnterTrimMode()}),W()(V()(V()(n)),"handleLeaveTrimMode",function(){n.props.updateShareVideoInTrimMode(!1),n.props.onLeaveTrimMode()}),W()(V()(V()(n)),"handleDownloadUnverifiedClicked",function(e){if(e.preventDefault(),!n.props.video.owner_verified){var t=n.props.currentUserIsOwner?"you":"the sender",o=n.props.currentUserIsOwner?"your":"their";window.alert("In order to download this video, "+t+" must verify "+o+" email.")}return!1}),W()(V()(V()(n)),"handleNotificationDialogPromptAction",function(){var e=n.props,t=e.isLoggedInChecked,o=e.isLoggedIn,r=e.triggers;if(t&&o){var a=r[se.d];!1===a.complete&&!0===a.show&&(he.h(te.nb),n.props.updateNotificationSettings(oe.i),n.props.postNotificationSettings(oe.i))}}),W()(V()(V()(n)),"handleNotificationDialogPromptClose",function(){var e=n.props,t=e.isLoggedInChecked,o=e.isLoggedIn,r=e.triggers;if(t&&o){var a=r[se.d];!1===a.complete&&!0===a.show&&(he.h(te.ob),n.props.completeTriggerCreator(se.d))}}),W()(V()(V()(n)),"handleNotificationStatusBarAction",function(){var e=n.props,t=e.isLoggedInChecked,o=e.isLoggedIn,r=e.triggers;if(t&&o){var a=r[se.c];!1===a.complete&&!0===a.show&&(he.h(te.Z,{go_to_use_cases:!0,from_page:$a}),n.props.completeTriggerCreator(se.c),be.a(i()(".status-bar"),function(){i()("#container").removeClass(ei)}),Object(C.e)("".concat(ie.w).concat(ie.K)))}}),W()(V()(V()(n)),"handleNotificationStatusBarClose",function(){var e=n.props,t=e.isLoggedInChecked,o=e.isLoggedIn,r=e.triggers;if(t&&o){var a=r[se.c];!1===a.complete&&!0===a.show&&(he.h(te.Z,{go_to_use_cases:!1,from_page:$a}),n.props.completeTriggerCreator(se.c),be.a(i()(".status-bar"),function(){i()("#container").removeClass(ei)}))}}),W()(V()(V()(n)),"toggleShareDropdown",function(){n.state.show_share_dropdown||he.h(te.Cb),n.setState({show_share_dropdown:!n.state.show_share_dropdown})}),W()(V()(V()(n)),"hideShareDropdown",function(){n.setState({show_share_dropdown:!1})}),W()(V()(V()(n)),"handleClickCopyLink",function(){q.a.timeline({targets:".mobile-actions-link-success",easing:"easeInOutQuad",duration:250}).add({opacity:[0,1]}).add({delay:2500,opacity:[1,0]}),fe.b(n.copyLinkInput);var e=fe.a(n.copyLinkInput);n.props.onClick&&n.props.onClick(e)}),W()(V()(V()(n)),"handleShareVideoEvents",function(e){var t=e.origin||e.originalEvent&&e.originalEvent.origin||"",o=e.data||e.originalEvent&&e.originalEvent.data||{};if(!(t.indexOf(ie.w)<0))switch(o.type){case ne.c:n.props.updateShareVideo(N()({},n.props.video,{video_properties:N()({},n.props.video.video_properties,{height:o.height,width:o.width})}));break;case ne.d:n.inlineInstall(o.source);break;case ne.g:n.props.updateShareVideoPassword(o.password),n.props.fetchShareVideoDownloadUrlCreator();break;case ne.h:n.props.updateShareVideo(N()({},n.props.video,{video_properties:N()({},n.props.video.video_properties,{duration:o.duration})}));break;case ne.l:n.props.updateShareVideo(N()({},n.props.video,{processing_information:o.processing_information})),n.props.fetchShareVideoDownloadUrlCreator();break;case ne.s:n.setState({show_create_recording_tooltip:!1})}}),n}return H()(t,e),L()(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.video_id,o=t.show_share_dropdown,r=t.dragging,a=this.props,i=a.currentUserIsOwner,l=a.downloadUrl,u=a.errorBarShown,d=a.focusTitle,m=a.iframeLoaded,p=a.inTrimMode,h=a.isLoggedIn,f=a.isLoggedInChecked,v=a.localThumbnail,g=a.playerReady,b=a.showCtaModal,_=a.showRemoveModal,y=a.slackTeammates,w=a.user,C=a.showThumbnailCropper,E=a.uploadProgressEnabled,T=w.has_named_video_views,N=this.state,S=N.show_create_recording_tooltip,O=N.show_ext_install_bubb,j=N.show_signup_modal,M=N.startTimeParam,x=this.props.video||{id:n,is_protected:!1,video_properties:{},views:{}},I=x.company_feature_data||null,A="";x.video_properties.screen_type===ae.a&&(A="is-cam");var L=[i&&"current-user-is-owner",u&&"error-bar-shown"].filter(Boolean).join(" "),D=f&&i&&(y.length>0||w.oauth[k.a]),R=y.length>0?k.d:k.a,U="".concat(x.name||x.id,".mp4"),F=x.owner_verified;return c.a.createElement(s.Fragment,null,c.a.createElement(Ue.a,{companyFeatureData:I}),c.a.createElement(De.a,null),c.a.createElement(pr,null),c.a.createElement(ir,null),c.a.createElement(Ya.a,null,c.a.createElement("div",{className:"share-video-container ".concat(L)},c.a.createElement("div",{className:"left-panel ".concat(A)},c.a.createElement(Qa.a,{videoId:n,startTime:M},E&&c.a.createElement(Me,{handleFetchVideo:this.handleFetchVideo}),c.a.createElement("div",null),b&&c.a.createElement(Yn,null),(p||!i)&&c.a.createElement(qn,{duration:x.video_properties.duration,hasGmailAccount:w.has_gmail_account,isLoggedIn:h,isProtected:x.is_protected,onLeaveTrimMode:this.handleLeaveTrimMode,playerReady:g,video:x}),C&&c.a.createElement(Da,{videoId:x.id})),p&&c.a.createElement(Wa,{onRevertClicked:this.handleLeaveTrimMode,video:x}),c.a.createElement("div",{className:"below-video"},c.a.createElement("div",{className:"share-video-title-tools"},c.a.createElement(Pa,{currentUserIsOwner:i,shouldFocusTitle:i&&d,video:x,onTitleUpdate:this.props.updateVideoNameCreator}),c.a.createElement("div",{className:"share-video-tools"},c.a.createElement(Xn,{currentUserIsOwner:i,downloadEnabled:x.download_enabled,downloadName:U,downloadUrl:l,onDownloadUnverifiedClicked:this.handleDownloadUnverifiedClicked,ownerVerified:F,useBorder:!1,videoId:x.id}),i&&c.a.createElement(Ha,{onClick:this.handleDeleteButtonClicked}),c.a.createElement("div",{className:"round-button round-button-share ignore-react-onclickoutside-share",onClick:this.toggleShareDropdown},c.a.createElement(Qn.a,null,"Share"),c.a.createElement(_a,{align:"right",vAlign:"auto",outsideClickIgnoreClass:"ignore-react-onclickoutside-share",onHide:this.hideShareDropdown,show:o,currentUserIsOwner:i,hasGmailAccount:w.has_gmail_account,video:x})))),c.a.createElement(yr,{currentUserIsOwner:i,video:x}),c.a.createElement("div",{className:"mobile-actions"},c.a.createElement("div",{className:"mobile-actions-share ignore-react-onclickoutside-share",onClick:this.toggleShareDropdown},c.a.createElement(_a,{align:"center",vAlign:"auto",outsideClickIgnoreClass:"ignore-react-onclickoutside-share",onHide:this.hideShareDropdown,show:o,currentUserIsOwner:i,hasGmailAccount:w.has_gmail_account,video:x}),c.a.createElement("span",null,"Share")),c.a.createElement("div",{className:"mobile-actions-link",onClick:this.handleClickCopyLink},c.a.createElement("div",{className:"mobile-actions-link-success"},"Link copied to clipboard!"),"Copy Link",c.a.createElement("input",{ref:function(t){return e.copyLinkInput=t},readOnly:!0,value:"".concat(ie.w,"/share/").concat(x.id)})))),i&&c.a.createElement("div",{className:"tablet-actions"},c.a.createElement(Yo,{onEnterTrimMode:this.handleEnterTrimMode,video:x}),c.a.createElement(Yr,{className:this.constructor.shareMethodsClassName,video:x,withActionDot:this.props.shareVideoActionDot,withLinkActionDot:this.props.shareVideoLinkActionDot})),null!=x&&c.a.createElement(c.a.Fragment,null,D&&T&&c.a.createElement(Za,{inviteProvider:R}),D&&!T&&c.a.createElement(Za,{inviteProvider:R}),(i||x.comments_enabled)&&c.a.createElement(pn,{iframeLoaded:m}),c.a.createElement(Ae.a,null),c.a.createElement(vr,null))),i&&c.a.createElement(Xr,{onEnterTrimMode:this.handleEnterTrimMode}),h&&c.a.createElement(s.Fragment,null,c.a.createElement(Le.a,{onAction:this.handleNotificationDialogPromptAction,onClose:this.handleNotificationDialogPromptClose}),c.a.createElement(Ka.a,{onAction:this.handleNotificationStatusBarAction,onClose:this.handleNotificationStatusBarClose}),c.a.createElement(Ve.a,null)),_&&c.a.createElement(qa,{videoId:n,onCloseModal:this.handleLeaveRemoveModal}),!ve.f&&O&&!I&&c.a.createElement(Re.a,{onButtonClicked:this.handleInstallModalButtonClick,onExtensionIntalled:this.handleExtensionInstalled,onExtensionInstallError:this.handleExtensionInstallError,fadeInInterval:1e4,user:w,video:x,source:te.O})),!v&&C&&c.a.createElement(J.a,{className:"thumbnail-image-dropzone",disableClick:!0,multiple:!1,disabled:Boolean(v),activeStyle:{zIndex:1002},onDragEnter:function(){return e.setState({dragging:!0})},onDragLeave:function(){return e.setState({dragging:!1})},onDrop:this.handleDropzoneDrop},r&&c.a.createElement("div",{className:"thumb-drag-and-drop-overlay"}),r&&c.a.createElement("img",{src:ye.a,className:"drag-and-drop-overlay-image"})),j&&c.a.createElement(Be,{onClose:this.handleAccountOverlayClose}),S&&c.a.createElement(Ja.a,{onClose:function(){e.setState({show_create_recording_tooltip:!1})}}),c.a.createElement(Fe.a,null)))}},{key:"UNSAFE_componentWillUpdate",value:function(e){!this.analyticsSent&&e.video&&e.video.id&&e.isLoggedInChecked&&(this.analyticsSent=!0,he.e("Individual Video",{url:null,is_owner:Boolean(e.video.current_user_is_owner),is_logged_in:e.isLoggedIn}));var t=this.props.user,n=e.user;t.capabilities[xe.d]!==n.capabilities[xe.d]&&!0===n.capabilities[xe.d]&&this.props.updateVideoCtaShow(!0)}},{key:"componentDidMount",value:function(){var e=M()(O.a.mark(function e(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.addEventListener("message",this.handleShareVideoEvents),!this.props.uploadProgressEnabled&&this.handleFetchVideo(),e.next=4,new Promise(function(e){ge.c(e)});case 4:e.sent||!ge.a&&(ve.f||ve.a)||this.setState({show_ext_install_bubb:!0}),this.setState({startTimeParam:Object(C.d)("t")});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){if(!this.props.user.oauth||e.user.oauth||this.props.user.has_named_video_views||this.props.fetchGoogleInfoCreator(),this.props.inTrimMode!=e.inTrimMode){var t=document.documentElement;t.className=t.className.replace("trim-mode-enabled",""),this.props.inTrimMode&&(t.className+=" ".concat("trim-mode-enabled"))}var n=this.props.currentUserIsOwner;e.currentUserIsOwner!==n&&n&&this.props.onboardingUpdatePage(re.e)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.handleShareVideoEvents)}},{key:"inlineInstall",value:function(){var e=M()(O.a.mark(function e(t){var n=this;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ge.a){e.next=2;break}return e.abrupt("return",this.handleExtensionInstalled());case 2:return e.next=4,new Promise(function(e){ge.c(e)});case 4:if(!e.sent){e.next=7;break}return e.abrupt("return",this.handleExtensionInstalled());case 7:ge.b(t,function(){n.handleExtensionInstalled()});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),t}(s.Component);W()(ti,"shareMethodsClassName","share-methods");var ni=Object(u.connect)(function(e){var t=e.share_video,n=t.current_user_is_owner,o=t.download_url,r=t.iframe_loaded,a=t.player_ready,i=t.show_remove_modal,s=t.video,c=e.user,l=c.is_logged_in,u=c.is_logged_in_checked,d=c.current,m=e.slack,p=m.show_invite_modal,h=(m.team_info||{}).people||[],f=e.triggers.triggers,v=e.trimming.in_trim_mode,g=e.error_bar.showing,b=e.multi_share.dm_content,_=void 0===b?[]:b,y=e.editor,w=y.cta_flow,C=y.thumbnail_flow,E=y.thumbnail_data,k=e.onboarding,T=k.current_tour,N=k.tip,S=k.show_tips,O=k.show_chat_modal;return{currentUserIsOwner:n,dm_content:_,downloadUrl:o,errorBarShown:g,iframeLoaded:r,inTrimMode:v,isLoggedIn:l,isLoggedInChecked:u,playerReady:a,shareVideoActionDot:N==re.n&&!S&&!O,shareVideoLinkActionDot:T==Ie.e&&O,showRemoveModal:i,showSlackInviteModal:p,slackTeammates:h,triggers:f,video:s,user:d,showCtaModal:w,showThumbnailCropper:C,editorActive:w||C,localThumbnail:E.thumbnail_local,uploadProgressEnabled:!1}},function(e){return{onboardingUpdatePage:function(t){return e(Object(Z.o)(t))},onEnterTrimMode:function(){return e(Object(ue.e)())},enterTrimModeCreator:function(t){return e(Object(pe.b)(t))},onLeaveTrimMode:function(){return e(Object(ue.g)())},completeTriggerCreator:function(t){return e(Object(me.a)(t))},fetchGoogleInfoCreator:function(){return e(Object(ce.a)())},fetchShareVideoDownloadUrlCreator:function(){return e(Object(de.d)())},fetchVideoCreator:function(t){return e(Object(de.e)(t))},postNotificationSettings:function(t){return e(Object(le.a)(t,"Re-enabled From Video Page"))},showErrorBar:function(t,n){return e(Object(p.b)(t,n))},setLocalThumbnail:function(t,n){return e(Object(Y.g)(t,n))},showStatusBar:function(t){return e(Object(ee.b)(t))},updateLoginOrSignUp:function(t){return e(Object(Q.d)(t))},updateNotificationSettings:function(t){return e(Object(X.d)(t))},updateShareVideo:function(t){return e(Object($.c)(t))},updateShareVideoInTrimMode:function(t){return e(Object($.f)(t))},updateShareVideoPassword:function(t){return e(Object($.h)(t))},updateShareVideoShowRemoveModal:function(t){return e(Object($.j)(t))},updateVideoCtaShow:function(t){return e(Object($.o)(t))},updateVideoNameCreator:function(t){return e(Object(de.i)(t))}}})(ti);n(894);i()(function(){var e="1"===Object(C.d)("focus_title"),t="1"===Object(C.d)("muted"),n=Object(C.d)("t"),o=Object(C.d)("oauth_error"),r=Object(C.d)("provider"),a=Object(C.d)("data")?JSON.parse(atob(Object(C.d)("data"))):null;(e||t||a||o||r)&&window.history.replaceState("","",window.location.pathname),a&&"push"===a.referrer&&Object(_.b)(a);var i=y.a(),s=[m.a];f.a&&s.push(Object(b.a)(i));var d=w.a(E.a,s),T=document.getElementById("container");o?r===k.b?(d.dispatch(Object(h.d)(!0)),d.dispatch(Object(h.f)(!0))):d.dispatch(Object(p.b)(v.a,decodeURIComponent(o))):r===k.b&&d.dispatch(Object(h.d)(!0)),window.reduxStore=d,Object(l.render)(c.a.createElement(u.Provider,{store:d},c.a.createElement(ni,{focusTitle:e,mutedParam:t,timeParam:n})),T),d.dispatch(Object(g.c)())})},228:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return r}),n.d(t,"c",function(){return a});var o="ctrl+enter",r="command+enter",a="escape"},229:function(e,t,n){e.exports={"font-tiny-bold":"account-inputs_font-tiny-bold_240","font-tiny":"account-inputs_font-tiny_1aF","font-small-bold":"account-inputs_font-small-bold_Ipd","font-small":"account-inputs_font-small_3h2","font-regular-bold":"account-inputs_font-regular-bold_1ff","font-regular":"account-inputs_font-regular_28c","font-large-bold":"account-inputs_font-large-bold_MiD","font-large":"account-inputs_font-large_2DC","font-title":"account-inputs_font-title_1TG","font-title-bold":"account-inputs_font-title-bold_2h3","font-header":"account-inputs_font-header_1Zq","font-header-bold":"account-inputs_font-header-bold_1pY",accountPlain:"account-inputs_accountPlain_bDo",inputField:"account-inputs_inputField_1ex",error:"account-inputs_error_3mn",plainError:"account-inputs_plainError_1jQ",bottomSection:"account-inputs_bottomSection_39I",loginButton:"account-inputs_loginButton_3Dv",forgotPassword:"account-inputs_forgotPassword_2VK",signupTerms:"account-inputs_signupTerms_zND"}},240:function(e,t,n){e.exports={"font-tiny-bold":"feature-tour_font-tiny-bold_1BN","font-tiny":"feature-tour_font-tiny_dRO","font-small-bold":"feature-tour_font-small-bold_5dQ","font-small":"feature-tour_font-small_3iJ","font-regular-bold":"feature-tour_font-regular-bold_19y","font-regular":"feature-tour_font-regular_3iT","font-large-bold":"feature-tour_font-large-bold_tbN","font-large":"feature-tour_font-large_2wT","font-title":"feature-tour_font-title_27W","font-title-bold":"feature-tour_font-title-bold_3Xh","font-header":"feature-tour_font-header_1Xj","font-header-bold":"feature-tour_font-header-bold_wX1",container:"feature-tour_container_QoA",minimized:"feature-tour_minimized_3td",icon:"feature-tour_icon_6BE",heading:"feature-tour_heading_AUc",description:"feature-tour_description_nNj",tryButton:"feature-tour_tryButton_cMZ",actionButton:"feature-tour_actionButton_s2w",buttonContainer:"feature-tour_buttonContainer_180",laterButton:"feature-tour_laterButton_1yr",tourOpen:"feature-tour_tourOpen_O3p"}},250:function(e,t,n){},288:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});var o=n(3),r=function(){return{type:o.g}},a=function(e){var t=e.message,n=e.title,r=e.actionButtonValue;return{type:o.mc,actionButtonValue:r,message:t,title:n}}},289:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(9),r=n.n(o),a=(n(111),n(112),n(246),n(406),n(122)),i=n(16),s=n(115),c=n(17);function l(e,t){return function(n,o){var l=o().multi_share,u=[],d=null,m=Array.from(l.search_content);switch(c.h(i.Sb,{type:e}),Array.isArray(t)||(t=[t]),e){case s.a:d=l.channel_content.map(function(e,n){return t.includes(e.channel.id)?(u.push(n),r()({},e,{active:!e.active})):e}),u.forEach(function(e){d[e].active?m.push(r()({},d[e].channel,{type:s.a})):m=m.filter(function(t){return t.id!==d[e].channel.id})}),n(Object(a.b)(m)),n(Object(a.c)(d));break;case s.b:d=l.dm_content.map(function(e,n){return t.includes(e.dm.id)?(u.push(n),r()({},e,{active:!e.active})):e}),u.forEach(function(e){d[e].active?m.push(r()({},d[e].dm,{type:s.b})):m=m.filter(function(t){return t.id!==d[e].dm.id})}),n(Object(a.b)(m)),n(Object(a.d)(d));break;default:return}}}},298:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"c",function(){return r}),n.d(t,"d",function(){return a}),n.d(t,"a",function(){return i});var o="subscribe",r="trim-progress",a="upload-progress",i="/hermes/subscriptions"},317:function(e,t,n){e.exports={"font-tiny-bold":"first-video-modal_font-tiny-bold_yyR","font-tiny":"first-video-modal_font-tiny_U6l","font-small-bold":"first-video-modal_font-small-bold_1kL","font-small":"first-video-modal_font-small_3v2","font-regular-bold":"first-video-modal_font-regular-bold_3ax","font-regular":"first-video-modal_font-regular_353","font-large-bold":"first-video-modal_font-large-bold_2Ni","font-large":"first-video-modal_font-large_-U_","font-title":"first-video-modal_font-title_3C0","font-title-bold":"first-video-modal_font-title-bold_3sZ","font-header":"first-video-modal_font-header_2aW","font-header-bold":"first-video-modal_font-header-bold_3k_",firstVideoModal:"first-video-modal_firstVideoModal_uwh",container:"first-video-modal_container_1kI",heading:"first-video-modal_heading_3Uw",description:"first-video-modal_description_2cy",buttonsContainer:"first-video-modal_buttonsContainer_2dw",actionButton:"first-video-modal_actionButton_1HW"}},340:function(e,t,n){},343:function(e,t,n){"use strict";var o=n(4),r=n.n(o),a=n(5),i=n.n(a),s=n(6),c=n.n(s),l=n(7),u=n.n(l),d=n(8),m=n.n(d),p=n(1),h=n.n(p),f=n(2),v=n.n(f),g=n(0),b=n.n(g),_=n(10),y=n(138),w=n(16),C=n(17),E=(n(646),function(e){function t(){var e,n;r()(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(a))),v()(h()(h()(n)),"onClickHandler",function(){var e=n.props,t=e.from_public_share_page,o=e.parent_location,r=e.videoId,a=e.ownerId,i=e.viewerIsOwner;C.h(w.bc,{from_public_share_page:t,parent_location:o,video_id:r,owner_id:a,owner_click:i})}),n}return m()(t,e),i()(t,[{key:"render",value:function(){var e,t,n,o=this.props,r=o.ctaMods,a=o.ctaUrl,i=o.ctaText;return r&&(e=r.color,t=r.background_color,n=r.border_radius),e=e||y.k,t=t||y.c,b.a.createElement("a",{className:"cta-button",target:a&&"_blank",rel:"noopener noreferrer",onClick:this.onClickHandler,style:{color:e,backgroundColor:t,borderRadius:"".concat(n,"px")},size:i?i.length:0,href:a&&(a.indexOf("http")>-1?a:"//".concat(a))},i||b.a.createElement("span",{className:"call-to-action-placeholder"},"Call-to-action"))}}]),t}(g.Component));t.a=Object(_.connect)(function(e){var t=e.share_video,n=t.cta_mods,o=t.cta_text,r=t.cta_url,a=e.video_player,i=a.from_public_share_page,s=a.parent_location,c=a.video||{},l=c.id,u=c.owner_id;return{ctaMods:n,ctaText:o,ctaUrl:r,from_public_share_page:i,parent_location:s,videoId:l,ownerId:u,viewerIsOwner:u===e.user.current.id}})(E)},344:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});var o=n(3),r=function(){return{type:o.c}},a=function(e){return{type:o.ec,dialogType:e}}},345:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n(79),r=function(e){Object(o.l)(function(){window.setTimeout(function(){e()},0)})}},346:function(e,t,n){"use strict";n(106);var o=n(4),r=n.n(o),a=n(5),i=n.n(a),s=n(6),c=n.n(s),l=n(7),u=n.n(l),d=n(8),m=n.n(d),p=n(22),h=n.n(p),f=n(0),v=function(e){function t(e){var n;return r()(this,t),(n=c()(this,u()(t).call(this,e))).state={show:Boolean(e.show)},n}return m()(t,e),i()(t,[{key:"componentDidMount",value:function(){this.props.show&&this.props.onDidMount&&this.props.onDidMount()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;!this.props.show&&e.show&&(this.props.onWillMount(),this.setState({show:!0})),this.props.show&&!e.show&&Promise.resolve(this.props.onWillUnmount()).then(function(){t.setState({show:!1})})}},{key:"componentDidUpdate",value:function(e){!e.show&&this.props.show&&this.props.onDidMount&&this.props.onDidMount()}},{key:"render",value:function(){return this.state.show||this.props.alwaysRender?this.props.children:null}}]),t}(f.Component);v.propTypes={alwaysRender:h.a.bool,show:h.a.bool,onWillMount:h.a.func,onDidMount:h.a.func,onWillUnmount:h.a.func};var g=function(){};v.defaultProps={onWillMount:g,onDidMount:g,onWillUnmount:g},t.a=v},382:function(e,t,n){e.exports=n.p+"img/rainbow-oval-0036a081945a9d57d4b8a8b4beed2ff7.png"},392:function(e,t,n){var o;(function(r,a){"use strict";var i=function(){var e=function(e){return e.replace(/^\s+|\s+$/g,"")},t=r.rangy||null,n=r.Undo||null,o=!t||!n,i=r.Key={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capsLock:20,escape:27,pageUp:33,pageDown:34,end:35,home:36,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40,insert:45,delete:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,leftWindow:91,rightWindowKey:92,select:93,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,numpad9:105,multiply:106,add:107,subtract:109,decimalPoint:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numLock:144,scrollLock:145,semiColon:186,equalSign:187,comma:188,dash:189,period:190,forwardSlash:191,graveAccent:192,openBracket:219,backSlash:220,closeBraket:221,singleQuote:222},s=function(e){var t,n,a,c=this,l=new s.Action,u=new s.Cache,d=new s.Cursor,m=new s.HtmlAssistant,p=new s.Utilities,h=new s.Selection,f={focus:function(e){e=e||r.event,s.activeElement=t},blur:function(e){e=e||r.event,s.activeElement===t&&(s.activeElement=null),m.placeholders()},down:function(e){e=e||r.event;var t=!0;if(229!==e.keyCode){if(p.isCommand(e,function(){u.cmd=!0},function(){u.cmd=!1}),p.isShift(e,function(){u.shift=!0},function(){u.shift=!1}),p.isModifier(e,function(n){if(u.cmd){if((g.mode===s.inlineMode||g.mode===s.partialMode)&&"paste"!==n)return void p.preventDefaultEvent(e);var o=null;o="function"===typeof n?n:f.command[n],!1===(t=o.call(c,e))&&(p.preventDefaultEvent(e),p.stopPropagation(e))}}),-1!==g.maxLength){var n=m.text().length,o=!1,a=r.getSelection();if(a&&(o=!a.isCollapsed),n>=g.maxLength&&!p.isSpecial(e)&&!p.isNavigational(e)&&!o)return p.preventDefaultEvent(e)}switch(e.keyCode){case i.enter:f.enterKey(e);break;case i.backspace:case i.delete:f.backspaceOrDeleteKey(e)}return t}},up:function(e){var t;if(e=e||r.event,p.isCommand(e,function(){u.cmd=!1},function(){u.cmd=!0}),m.clean(),m.placeholders(),null!==g.keyContext&&(t=g.keyContext[e.keyCode])){var n=d.parent();n&&t.call(c,e,n)}l.preserveElementFocus()},command:{bold:function(e){p.preventDefaultEvent(e),new s.Element(c,"bold").setClean(!1).invoke(g.beforeInvokeElement)},underline:function(e){p.preventDefaultEvent(e),new s.Element(c,"underline").setClean(!1).invoke(g.beforeInvokeElement)},italicize:function(e){p.preventDefaultEvent(e),new s.Element(c,"italic").setClean(!1).invoke(g.beforeInvokeElement)},quote:function(e){},paste:function(e){if(c.makeUndoable(),g.pasteAsText){var t=p.selection.saveSelection();p.pasteHook(function(e){p.selection.restoreSelection(t),e=e.replace(/\n/g,"<br>"),new s.Html(c,e).setClean(!1).insert(g.beforeInsertHtml,!0),m.clean(),m.placeholders()})}else m.clean(),m.placeholders()}},enterKey:function(e){if(g.mode===s.inlineMode)return p.preventDefaultEvent(e);if(!u.shift){var n,o,r=m.atCaret()||{},a=t.children,i=r===t.lastChild?t.lastChild:null;i&&i!==t.firstChild&&g.autoHR&&"partial"!==g.mode&&g.tags.horizontalRule&&(p.preventDefaultEvent(e),(n=""===m.text(i)&&i.nodeName.toLowerCase()===g.tags.paragraph)&&a.length>=2&&a[a.length-2].nodeName.toLowerCase()===g.tags.horizontalRule&&(n=!1),n&&(m.addTag(g.tags.horizontalRule,!1,!0,r),r=r.nextSibling),null!==(o=m.addTag(g.tags.paragraph,!0,null,r))&&(o.innerHTML="",d.set(0,o)))}return!0},backspaceOrDeleteKey:function(e){if(null!==t.lastChild){var n=t.lastChild,o=n.previousSibling;n&&g.tags.horizontalRule&&n.nodeName.toLocaleLowerCase()===g.tags.horizontalRule?t.removeChild(n):n&&o&&p.html.text(n).length<1&&o.nodeName.toLowerCase()===g.tags.horizontalRule&&n.nodeName.toLowerCase()===g.tags.paragraph&&(t.removeChild(n),t.removeChild(o))}}},v={element:null,modifier:"auto",placeholder:"",autofocus:!1,autoHR:!0,mode:s.richMode,maxLength:-1,modifiers:{b:"bold",i:"italicize",u:"underline",v:"paste"},tags:{break:"br",horizontalRule:"hr",paragraph:"p",outerLevel:["pre","blockquote","figure"],innerLevel:["a","b","u","i","img","strong"]},cssClasses:{editor:"Medium",pasteHook:"Medium-paste-hook",placeholder:"Medium-placeholder",clear:"Medium-clear"},attributes:{remove:["style","class"]},pasteAsText:!0,beforeInvokeElement:function(){},beforeInsertHtml:function(){},beforeAddTag:function(e,t,n,o){},keyContext:null,pasteEventHandler:function(e){e=e||r.event,c.makeUndoable();var n,o=c.value().length;if(g.pasteAsText){p.preventDefaultEvent(e);var a=p.selection.saveSelection(),i=prompt(s.Messages.pastHere)||"";if(i.length>0)return t.focus(),s.activeElement=t,p.selection.restoreSelection(a),n=(i=m.encodeHtml(i)).length+o,g.maxLength>0&&n>g.maxLength&&(i=i.substring(0,g.maxLength-o)),g.mode!==s.inlineMode&&(i=i.replace(/\n/g,"<br>")),new s.Html(c,i).setClean(!1).insert(g.beforeInsertHtml,!0),m.clean(),m.placeholders(),!1}else setTimeout(function(){m.clean(),m.placeholders()},20)}},g=p.deepExtend(v,e),b={};for(a in v)"object"!=typeof v[a]&&v.hasOwnProperty(a)&&g.element.getAttribute("data-medium-"+i)&&("false"!==(n=g.element.getAttribute("data-medium-"+i)).toLowerCase()&&"true"!==n.toLowerCase()||(n="true"===n.toLowerCase()),g[a]=n);if(g.modifiers)for(a in g.modifiers)void 0!==i[a]&&(g.modifiers[i[a]]=g.modifiers[a]);if(g.keyContext)for(a in g.keyContext)void 0!==i[a]&&(g.keyContext[i[a]]=g.keyContext[a]);(t=g.element).contentEditable=!0,t.className+=" "+g.cssClasses.editor+" "+g.cssClasses.editor+"-"+g.mode,g.tags=g.tags||{},g.tags.outerLevel&&(g.tags.outerLevel=g.tags.outerLevel.concat([g.tags.paragraph,g.tags.horizontalRule])),this.settings=g,this.element=t,this.intercept=f,this.action=l,this.cache=u,this.cursor=d,this.html=m,this.utils=p,this.selection=h,b.element=t,b.medium=this,b.settings=g,b.action=l,b.cache=u,b.cursor=d,b.html=m,b.intercept=f,b.utils=p,b.selection=h,l.setBridge(b),u.setBridge(b),d.setBridge(b),m.setBridge(b),p.setBridge(b),h.setBridge(b),m.clean(),m.placeholders(),l.preserveElementFocus(),l.listen(),o?this.makeUndoable=function(){}:(this.dirty=!1,this.undoable=new s.Undoable(this),this.undo=this.undoable.undo,this.redo=this.undoable.redo,this.makeUndoable=this.undoable.makeUndoable),t.medium=this,u.initialized=!0};return s.prototype={insertHtml:function(e,t){var n=new s.Html(this,e).insert(this.settings.beforeInsertHtml);return this.utils.triggerEvent(this.element,"change"),t&&t.apply(n),this},invokeElement:function(e,t){var n=this.settings,o=(t=t||{}).remove||[];switch(n.mode){case s.inlineMode:case s.partialMode:return this}return o.length>0&&(function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1}(n,"class")||o.push("class")),new s.Element(this,e,t).invoke(this.settings.beforeInvokeElement),this.utils.triggerEvent(this.element,"change"),this},behavior:function(){return o?"wild":"domesticated"},value:function(e){return void 0===e?this.element.innerHTML:(this.element.innerHTML=e,this.html.clean(),this.html.placeholders(),this)},focus:function(){return this.element.focus(),this},select:function(){var e,t,n=this.element;return n.focus(),a.body.createTextRange?((e=a.body.createTextRange()).moveToElementText(n),e.select()):r.getSelection&&(t=r.getSelection(),(e=a.createRange()).selectNodeContents(n),t.removeAllRanges(),t.addRange(e)),this},isActive:function(){return s.activeElement===this.element},destroy:function(){var t=this.element,n=this.intercept,o=this.settings,r=this.placeholder||null;null!==r&&r.setup&&(r.parentNode.removeChild(r),delete t.placeHolderActive),t.removeAttribute("contenteditable"),t.className=e(t.className.replace(o.cssClasses.editor,"").replace(o.cssClasses.clear,"").replace(o.cssClasses.editor+"-"+o.mode,"")),this.utils.removeEvent(t,"keyup",n.up).removeEvent(t,"keydown",n.down).removeEvent(t,"focus",n.focus).removeEvent(t,"blur",n.focus).removeEvent(t,"paste",o.pasteEventHandler)},clear:function(){this.element.innerHTML="",this.html.placeholders()}},s.Element=function(e,t,n){if(this.medium=e,this.element=e.settings.element,o)this.tagName=t;else switch(t.toLowerCase()){case"bold":this.tagName="b";break;case"italic":this.tagName="i";break;case"underline":this.tagName="u";break;default:this.tagName=t}this.attributes=n||{},this.clean=!0},s.Html=function(e,t){this.medium=e,this.element=e.settings.element,this.html=t,this.clean=!0},s.Injector=function(){},o?(s.Element.prototype={invoke:function(e){s.activeElement===this.element&&(e&&e.apply(this),a.execCommand(this.tagName,!1))},setClean:function(){return this}},s.Injector.prototype={inject:function(e,t){return this.insertHTML(e,t),null}},s.Undoable=function(){}):(t.rangePrototype.insertNodeAtEnd=function(e){var t=this.cloneRange();t.collapse(!1),t.insertNode(e),t.detach(),this.setEndAfter(e)},s.Element.prototype={invoke:function(e){if(s.activeElement===this.element){e&&e.apply(this);var n,o,a=this.attributes,i=this.tagName.toLowerCase();void 0!==a.className?(o=(a.className.split[" "]||[a.className]).shift(),delete a.className):o="medium-"+i,n=t.createClassApplier(o,{elementTagName:i,elementAttributes:this.attributes}),this.medium.makeUndoable(),n.toggleSelection(r),this.clean&&(this.medium.html.clean(),this.medium.html.placeholders())}},setClean:function(e){return this.clean=e,this}},s.Injector.prototype={inject:function(e){var t,n=!1;if("string"==typeof e){var o=a.createElement("div");o.innerHTML=e,t=o.childNodes,n=!0}else t=e;this.insertHTML('<span id="wedge"></span>');var r=a.getElementById("wedge"),i=r.parentNode;if(r.removeAttribute("id"),n)for(;0<t.length;)i.insertBefore(t[0],r);else i.insertBefore(t,r);return i.removeChild(r),r=null,t}},s.Undoable=function(e){var t,n=this,o=e.settings.element,r=e.utils,a=r.addEvent,s=o.innerHTML,c=new Undo.Stack,l=Undo.Command.extend({constructor:function(e,t){this.oldValue=e,this.newValue=t},execute:function(){},undo:function(){o.innerHTML=this.oldValue,e.canUndo=c.canUndo(),e.canRedo=c.canRedo(),e.dirty=c.dirty()},redo:function(){o.innerHTML=this.newValue,e.canUndo=c.canUndo(),e.canRedo=c.canRedo(),e.dirty=c.dirty()}}),u=function(){var t=o.innerHTML;t!=s&&(n.movingThroughStack||(c.execute(new l(s,t)),s=t,e.dirty=c.dirty()),r.triggerEvent(e.settings.element,"change"))};this.medium=e,this.timer=t,this.stack=c,this.makeUndoable=u,this.EditCommand=l,this.movingThroughStack=!1,a(o,"keyup",function(e){e.ctrlKey||e.keyCode===i.z?r.preventDefaultEvent(e):(clearTimeout(t),t=setTimeout(function(){u()},250))}),a(o,"keydown",function(e){if(!e.ctrlKey||e.keyCode!==i.z)return n.movingThroughStack=!1,!0;r.preventDefaultEvent(e),n.movingThroughStack=!0,e.shiftKey?c.canRedo()&&c.redo():c.canUndo()&&c.undo()})}),s.Injector.prototype.insertHTML=function(e,t){var n,o;if(r.getSelection){if((n=r.getSelection()).getRangeAt&&n.rangeCount){(o=n.getRangeAt(0)).deleteContents();var i=a.createElement("div");i.innerHTML=e;for(var s,c,l=a.createDocumentFragment();s=i.firstChild;)c=l.appendChild(s);var u=l.firstChild;o.insertNode(l),c&&((o=o.cloneRange()).setStartAfter(c),t?o.setStartBefore(u):o.collapse(!0),n.removeAllRanges(),n.addRange(o))}}else if((n=a.selection)&&"Control"!=n.type){var d=n.createRange();d.collapse(!0),n.createRange().pasteHTML(e),t&&((o=n.createRange()).setEndPoint("StartToStart",d),o.select())}},s.Html.prototype={setBridge:function(e){for(var t in e)this[t]=e[t]},insert:function(e,t){if(s.activeElement===this.element){e&&e.apply(this);var n=this.injector.inject(this.html,t);return this.clean&&(this.medium.html.clean(),this.medium.html.placeholders()),this.medium.makeUndoable(),n}return null},injector:new s.Injector,setClean:function(e){return this.clean=e,this}},s.Utilities=function(){},s.Utilities.prototype={setBridge:function(e){for(var t in e)this[t]=e[t]},isCommand:function(e,t,n){var o=this.settings;return"ctrl"===o.modifier&&e.ctrlKey||"cmd"===o.modifier&&e.metaKey||"auto"===o.modifier&&(e.ctrlKey||e.metaKey)?t.call():n.call()},isShift:function(e,t,n){return e.shiftKey?t.call():n.call()},isModifier:function(e,t){var n=this.settings.modifiers[e.keyCode];return!!n&&t.call(null,n)},special:function(){var e={};return e[i.backspace]=!0,e[i.shift]=!0,e[i.ctrl]=!0,e[i.alt]=!0,e[i.delete]=!0,e[i.cmd]=!0,e}(),isSpecial:function(e){return!!this.cache.cmd||void 0!==this.special[e.keyCode]},navigational:function(){var e={};return e[i.upArrow]=!0,e[i.downArrow]=!0,e[i.leftArrow]=!0,e[i.rightArrow]=!0,e}(),isNavigational:function(e){return void 0!==this.navigational[e.keyCode]},addEvent:function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n,this},removeEvent:function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null,this},preventDefaultEvent:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this},stopPropagation:function(e){(e=e||window.event).cancelBubble=!0,void 0!==e.stopPropagation&&e.stopPropagation()},triggerEvent:function(e,t){var n;return a.createEvent?((n=a.createEvent("HTMLEvents")).initEvent(t,!0,!0),n.eventName=t,e.dispatchEvent(n)):(n=a.createEventObject(),e.fireEvent("on"+t,n)),this},deepExtend:function(e,t){for(var n in t)t[n]&&t[n].constructor&&t[n].constructor===Object?(e[n]=e[n]||{},this.deepExtend(e[n],t[n])):e[n]=t[n];return e},pasteHook:function(e){var t,n,r=a.createElement("textarea"),i=this.element,s=this.settings,c=this.medium,l=this.html;r.className=s.cssClasses.pasteHook,i.parentNode.appendChild(r),r.focus(),o||c.makeUndoable(),setTimeout(function(){i.focus(),s.maxLength>0&&(t=l.text(i),n=t.length,n+r.value.length>n&&(r.value=r.value.substring(0,s.maxLength-n))),e(r.value),l.deleteNode(r)},2)},setupContents:function(){var e,t=this.element,n=t.children,o=t.childNodes;!this.settings.tags.paragraph||n.length>0||this.settings.mode===s.inlineMode||(o.length>0?(e=a.createElement(this.settings.tags.paragraph),t.innerHTML.match("^[&]nbsp[;]")&&(t.innerHTML=t.innerHTML.substring(6,t.innerHTML.length-1)),e.innerHTML=t.innerHTML,t.innerHTML="",t.appendChild(e),this.cursor.set(e.innerHTML.length,e)):((e=a.createElement(this.settings.tags.paragraph)).innerHTML="&nbsp;",t.appendChild(e)))},traverseAll:function(e,t,n){var o,r=e.childNodes,a=r.length,i=0;n=n||1;if(t=t||{},a>0)for(;i<a;i++){switch((o=r[i]).nodeType){case 1:this.traverseAll(o,t,n+1),void 0!==t.element&&t.element(o,i,n,e);break;case 3:void 0!==t.fragment&&t.fragment(o,i,n,e)}a=r.length,o===e.lastChild&&(i=a)}}},s.Selection=function(){},s.Selection.prototype={setBridge:function(e){for(var t in e)this[t]=e[t]},saveSelection:function(){if(r.getSelection){var e=r.getSelection();if(e.rangeCount>0)return e.getRangeAt(0)}else if(a.selection&&a.selection.createRange)return a.selection.createRange();return null},restoreSelection:function(e){if(e)if(r.getSelection){var t=r.getSelection();t.removeAllRanges(),t.addRange(e)}else a.selection&&e.select&&e.select()}},s.Cursor=function(){},s.Cursor.prototype={setBridge:function(e){for(var t in e)this[t]=e[t]},set:function(e,t){var n,o=this.html;if(a.createRange){var i=r.getSelection(),s=o.lastChild(),c=o.text(s).length-1,l=t||s,u=null!=e?e:c;(n=a.createRange()).setStart(l,u),n.collapse(!0),i.removeAllRanges(),i.addRange(n)}else(n=a.body.createTextRange()).moveToElementText(t),n.collapse(!1),n.select()},parent:function(){var e=null;return r.getSelection?e=1===(e=r.getSelection().getRangeAt(0).commonAncestorContainer).nodeType?e:e.parentNode:a.selection&&(e=a.selection.createRange().parentElement()),"SPAN"==e.tagName&&(e=e.parentNode),e},caretToBeginning:function(e){this.set(0,e)},caretToEnd:function(e){this.set(this.html.text(e).length,e)}},s.HtmlAssistant=function(){},s.HtmlAssistant.prototype={setBridge:function(e){for(var t in e)this[t]=e[t]},encodeHtml:function(e){return a.createElement("a").appendChild(a.createTextNode(e)).parentNode.innerHTML},text:function(t,n){if(t=t||this.settings.element,n)t.textContent&&void 0!==t.textContent?t.textContent=n:t.innerText=n;else{if(t.innerText)return e(t.innerText);if(t.textContent)return e(t.textContent);if(t.data)return e(t.data)}return""},changeTag:function(e,t){var n,o,r=a.createElement(t);for(n=e.firstChild;n;)o=n.nextSibling,r.appendChild(n),n=o;return e.parentNode.insertBefore(r,e),e.parentNode.removeChild(e),r},deleteNode:function(e){e.parentNode.removeChild(e)},placeholders:function(){if(r.getComputedStyle){var t=this.settings,n=this.medium.placeholder||(this.medium.placeholder=a.createElement("div")),o=t.element,i=n.style,c=r.getComputedStyle(o,null),l=function(e){return c.getPropertyValue(e)},u=this.utils,d=u.html.text(o),m=this.cursor,p=o.children.length;if(o.placeholder=n,d.length<1&&p<2){if(o.placeHolderActive)return;o.innerHTML.match("<"+t.tags.paragraph)||(o.innerHTML=""),t.placeholder.length>0&&(n.setup||(n.setup=!0,i.background=l("background"),i.backgroundColor=l("background-color"),i.fontSize=l("font-size"),i.color=c.color,i.marginTop=l("margin-top"),i.marginBottom=l("margin-bottom"),i.marginLeft=l("margin-left"),i.marginRight=l("margin-right"),i.paddingTop=l("padding-top"),i.paddingBottom=l("padding-bottom"),i.paddingLeft=l("padding-left"),i.paddingRight=l("padding-right"),i.borderTopWidth=l("border-top-width"),i.borderTopColor=l("border-top-color"),i.borderTopStyle=l("border-top-style"),i.borderBottomWidth=l("border-bottom-width"),i.borderBottomColor=l("border-bottom-color"),i.borderBottomStyle=l("border-bottom-style"),i.borderLeftWidth=l("border-left-width"),i.borderLeftColor=l("border-left-color"),i.borderLeftStyle=l("border-left-style"),i.borderRightWidth=l("border-right-width"),i.borderRightColor=l("border-right-color"),i.borderRightStyle=l("border-right-style"),n.className=t.cssClasses.placeholder+" "+t.cssClasses.placeholder+"-"+t.mode,n.innerHTML="<div>"+t.placeholder+"</div>",o.parentNode.insertBefore(n,o)),o.className+=" "+t.cssClasses.clear,i.display="",i.minHeight=o.clientHeight+"px",i.minWidth=o.clientWidth+"px",t.mode!==s.inlineMode&&(u.setupContents(),0===p&&o.firstChild&&m.set(0,o.firstChild))),o.placeHolderActive=!0}else o.placeHolderActive&&(o.placeHolderActive=!1,i.display="none",o.className=e(o.className.replace(t.cssClasses.clear,"")),u.setupContents())}},clean:function(e){var t,n,o,a=this.settings,i=a.cssClasses.placeholder,s=(a.attributes||{}).remove||[],c=a.tags||{},l=c.outerLevel||null,u=c.innerLevel||null,d={},m={},p=(c.paragraph||"").toUpperCase(),h=this.html;if(e=e||a.element,null!==l)for(o=0;o<l.length;o++)d[l[o].toUpperCase()]=!0;if(null!==u)for(o=0;o<u.length;o++)m[u[o].toUpperCase()]=!0;this.utils.traverseAll(e,{element:function(e,a,c,f){var v=e.nodeName,g=!0;for(o=0;o<s.length;o++)t=s[o],e.hasAttribute(t)&&e.getAttribute(t)!==i&&e.removeAttribute(t);if((null!==l||null!==u)&&(1===c&&void 0!==d[v]?g=!1:c>1&&void 0!==m[v]&&(g=!1),g))if("block"===r.getComputedStyle(e,null).getPropertyValue("display")){if(p.length>0&&p!==v&&h.changeTag(e,p),c>1)for(;f.childNodes.length>a;)f.parentNode.insertBefore(f.lastChild,f.nextSibling)}else switch(v){case"BR":if(e===e.parentNode.lastChild){if(e===e.parentNode.firstChild)break;(n=document.createTextNode("")).innerHTML="&nbsp",f.insertBefore(n,e);break}default:for(;null!==e.firstChild;)f.insertBefore(e.firstChild,e);h.deleteNode(e)}}})},lastChild:function(){return this.element.lastChild},addTag:function(e,t,n,o){if(!this.settings.beforeAddTag(e,t,n,o)){var r,i=a.createElement(e);return void 0!==n&&!1===n&&(i.contentEditable=!1),0==i.innerHTML.length&&(i.innerHTML=" "),o&&o.nextSibling?(o.parentNode.insertBefore(i,o.nextSibling),r=o.nextSibling):(this.settings.element.appendChild(i),r=this.html.lastChild()),t&&(this.cache.focusedElement=r,this.cursor.set(0,r)),i}return null},baseAtCaret:function(){if(!this.medium.isActive())return null;var e=r.getSelection?r.getSelection():document.selection;if(e.rangeCount){var t=e.getRangeAt(0),n=t.endContainer;switch(n.nodeType){case 3:if(n.data&&n.data.length!=t.endOffset)return!1}return n}return null},atCaret:function(){var e=this.baseAtCaret()||{},t=this.element;if(!1===e)return null;for(;e&&e.parentNode!==t;)e=e.parentNode;return e&&1==e.nodeType?e:null}},s.Action=function(){},s.Action.prototype={setBridge:function(e){for(var t in e)this[t]=e[t]},listen:function(){var e=this.element,t=this.intercept;this.utils.addEvent(e,"keyup",t.up).addEvent(e,"keydown",t.down).addEvent(e,"focus",t.focus).addEvent(e,"blur",t.blur).addEvent(e,"paste",this.settings.pasteEventHandler)},preserveElementFocus:function(){var e=r.getSelection?r.getSelection().anchorNode:a.activeElement;if(e){var t,n=this.medium.cache,o=this.settings,i=e.parentNode,s=o.element.children,c=i!==n.focusedElement,l=0;for(i===o.element&&(i=e),t=0;t<s.length;t++)if(i===s[t]){l=t;break}c&&(n.focusedElement=i,n.focusedElementIndex=l)}}},s.Cache=function(){this.initialized=!1,this.cmd=!1,this.focusedElement=null},s.Cache.prototype={setBridge:function(e){for(var t in e)this[t]=e[t]}},s.inlineMode="inline",s.partialMode="partial",s.richMode="rich",s.Messages={pastHere:"Paste Here"},s}();void 0===(o=function(){return i}.call(t,n,t,e))||(e.exports=o)}).call(this,window,document)},410:function(e,t,n){},411:function(e,t,n){},428:function(e,t,n){},429:function(e,t,n){e.exports=n.p+"img/icons/outlook-89610c4848280749c10fae223c24903e.svg"},43:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return a});var o="folder",r="video",a=[o,r]},430:function(e,t,n){e.exports=n.p+"img/icons/send-56f4042ada21b4300e8b4c4a01827d63.svg"},431:function(e,t,n){e.exports=n.p+"img/icons/google-multicolor-42ffa546a8c10c4fc469a925f82c4e89.svg"},432:function(e,t,n){e.exports=n.p+"img/icons/slack-logo-5d33e5b85f45894fb355ed6214dab0d2.svg"},434:function(e,t,n){e.exports=n.p+"img/loom-logo-mark-salmon-82e98beac56a34c6c88bf943d03dcf94.svg"},443:function(e,t,n){"use strict";var o=n(4),r=n.n(o),a=n(5),i=n.n(a),s=n(6),c=n.n(s),l=n(7),u=n.n(l),d=n(8),m=n.n(d),p=n(1),h=n.n(p),f=n(11),v=n.n(f),g=n(0),b=n.n(g),_=n(10),y=n(113),w=n(344),C=n(230),E=n(36),k=n(18),T=(n(662),function(e){function t(e){var n;return r()(this,t),(n=c()(this,u()(t).call(this,e))).closeDialogPrompt=n.closeDialogPrompt.bind(h()(h()(n))),n.performAction=n.performAction.bind(h()(h()(n))),n}return m()(t,e),i()(t,[{key:"render",value:function(){var e=this.props,t=e.isVisible,n=e.dialogType;if(!n||!t||E.f||!E.a&&!E.b||!E.g)return null;var o=C.b[n].message,r=C.b[n].icon,a=C.b[n].actionButtonValue,i=C.b[n].dismissButtonValue,s=null,c=null;return a&&a.length>0&&(s=b.a.createElement(k.a,{buttonType:"a1",buttonClass:"action-button",onClicked:this.performAction,value:a})),i&&i.length>0&&(c=b.a.createElement("span",{className:"dismiss-button",onClick:this.closeDialogPrompt},i)),b.a.createElement(y.CSSTransitionGroup,{transitionName:"dialog-prompt",transitionEnterTimeout:300,transitionLeaveTimeout:300},b.a.createElement("div",{className:"dialog-prompt"},b.a.createElement("div",{className:"overlay"}),b.a.createElement("div",{className:"dialog-prompt-modal"},b.a.createElement("img",{src:r,className:"icon"}),b.a.createElement("div",{className:"content"},b.a.createElement("p",{className:"message"},o),b.a.createElement("div",{className:"buttons"},c,s)))))}},{key:"UNSAFE_componentWillMount",value:function(){this.props.isVisible?document.body.classList.add("dialog-open"):document.body.classList.remove("dialog-open")}},{key:"componentDidUpdate",value:function(){this.props.isVisible?document.body.classList.add("dialog-open"):document.body.classList.remove("dialog-open")}},{key:"closeDialogPrompt",value:function(){var e=this.props.onClose;this.props.closeDialogPrompt(),v.a.isFunction(e)&&e()}},{key:"performAction",value:function(){var e=this.props.onAction;this.props.closeDialogPrompt(),v.a.isFunction(e)&&e()}}]),t}(g.Component));t.a=Object(_.connect)(function(e){return{isVisible:e.dialog_prompt.visible,dialogType:e.dialog_prompt.type}},function(e){return{closeDialogPrompt:function(){return e(Object(w.a)())}}})(T)},444:function(e,t,n){"use strict";n(124);var o=n(4),r=n.n(o),a=n(5),i=n.n(a),s=n(6),c=n.n(s),l=n(7),u=n.n(l),d=n(8),m=n.n(d),p=n(1),h=n.n(p),f=n(2),v=n.n(f),g=n(22),b=n.n(g),_=n(0),y=n.n(_),w=n(57),C=n(238),E=n(345),k=n(390),T=n(18),N=(n(663),function(e){function t(){var e,n;r()(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(a))),v()(h()(h()(n)),"state",{close_called:!1,show:!1,fadeIn:!1,phrase:C.e[0]}),v()(h()(h()(n)),"close",function(){n.setState({close_called:!0,show:!1})}),v()(h()(h()(n)),"install",function(){n.props.onButtonClicked(),w.b(n.props.source,function(){n.props.onExtensionInstalled()})}),n}return m()(t,e),i()(t,[{key:"render",value:function(){var e=this.props.className,t=null,n=this.state.fadeIn?"fade-in":"";return this.state.show&&(t=y.a.createElement("div",{className:"extension-install-bubble-container ".concat(n," bottom salmon ").concat(e)},y.a.createElement("div",{className:"extension-install-bubble-view"},y.a.createElement("span",{className:"close",onClick:this.close},"×"),y.a.createElement("p",null,this.state.phrase),y.a.createElement(T.a,{buttonType:"rp-primary-2",value:"Install on Chrome",onClicked:this.install})))),t}},{key:"componentDidMount",value:function(){var e,t=this,n=this.props.video||{},o=Object(k.a)(C.e);e=n.owner_name&&n.owner_verified?"".concat(n.owner_name," saves"):"600,000 people save",this.setState({phrase:o.replace("{person}",e)}),function(){var e=t.props.fadeInInterval;if(e)window.setTimeout(function(){t.state.close_called||(t.setState({show:!0}),Object(E.a)(function(){t.setState({fadeIn:!0})}))},e);else{if(t.state.close_called)return;t.setState({show:!0,fadeIn:!0})}}()}}]),t}(_.Component));N.propTypes={onButtonClicked:b.a.func,onExtensionInstallError:b.a.func,onExtensionInstalled:b.a.func,fadeInInterval:b.a.number},N.defaultProps={onButtonClicked:function(){},onExtensionInstallError:function(){},onExtensionInstalled:function(){},fadeInInterval:0,className:""},t.a=N},445:function(e,t,n){e.exports=n.p+"img/invite-success-68c59ebe4d1d423d4e22735177db0472.png"},446:function(e,t,n){e.exports=n.p+"img/illustrations/encourage-sharing-envelope-ddb105e731fe0d86f83bf079c0d1e837.svg"},447:function(e,t,n){e.exports=n.p+"img/illustrations/slack-view-tracking-example-789f0febde80737a2d8835708c5ae458.svg"},448:function(e,t,n){"use strict";var o=n(4),r=n.n(o),a=n(5),i=n.n(a),s=n(6),c=n.n(s),l=n(7),u=n.n(l),d=n(8),m=n.n(d),p=n(1),h=n.n(p),f=n(0),v=n.n(f),g=n(10),b=n(113),_=n(288),y=n(18);n(670);var w=function(e){function t(){var e;return r()(this,t),(e=c()(this,u()(t).call(this))).closeStatusBar=e.closeStatusBar.bind(h()(h()(e))),e.performAction=e.performAction.bind(h()(h()(e))),e}return m()(t,e),i()(t,[{key:"render",value:function(){var e=this.props,t=e.actionButtonValue,n=e.message,o=e.showing,r=e.title,a=null,i=null;return o&&(t&&t.length>0&&(a=v.a.createElement(y.a,{buttonType:"b2",buttonClass:"action-button",value:t,onClicked:this.performAction})),i=v.a.createElement("div",{className:"status-bar"},v.a.createElement("div",{className:"inner-container"},v.a.createElement("div",{className:"message"},v.a.createElement("h4",{className:"title"},r),v.a.createElement("p",{className:"content",dangerouslySetInnerHTML:function(e){return{__html:e}}(n)})),v.a.createElement("div",{className:"buttons-area"},a,v.a.createElement("div",{className:"close-button",onClick:this.closeStatusBar}))))),v.a.createElement(b.CSSTransitionGroup,{transitionName:"status-bar",transitionEnterTimeout:400,transitionLeaveTimeout:300},i)}},{key:"closeStatusBar",value:function(){var e=this.props.onClose;e&&e(),this.props.closeStatusBar()}},{key:"performAction",value:function(){var e=this.props.onAction;e&&e()}}]),t}(f.Component);t.a=Object(g.connect)(function(e){var t=e.status_bar;return{actionButtonValue:t.action_button_value,message:t.message,showing:t.showing,title:t.title}},function(e){return{closeStatusBar:function(){return e(Object(_.a)())}}})(w)},449:function(e,t,n){"use strict";n.d(t,"a",function(){return _});n(215);var o=n(4),r=n.n(o),a=n(5),i=n.n(a),s=n(6),c=n.n(s),l=n(7),u=n.n(l),d=n(8),m=n.n(d),p=n(1),h=n.n(p),f=n(2),v=n.n(f),g=n(0),b=n.n(g),_=(n(671),function(e){function t(){var e,n;r()(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(a))),v()(h()(h()(n)),"state",{error:null}),n}return m()(t,e),i()(t,[{key:"componentDidCatch",value:function(e){this.setState({error:e})}},{key:"render",value:function(){return this.state.error?b.a.createElement("div",{className:"error-boundary"},"An error occurred on the page: ",this.state.error.toString()):b.a.createElement(b.a.Fragment,null,this.props.children||null)}}]),t}(b.a.Component))},45:function(e,t,n){"use strict";n(215),n(465),n(124),n(225);var o=n(42),r=n.n(o),a=(n(106),n(81),n(134),n(246),n(51)),i=n.n(a),s=(n(40),n(2)),c=n.n(s),l=(n(155),n(209),n(260),n(21)),u=n.n(l),d=n(11),m=n.n(d),p=n(61),h=n.n(p),f=n(104),v=n(25),g=n(20),b=n(16),_=n(27),y=n(24),w=n(23),C=n(14),E=1e4,k=50,T=n(101),N=n(212);function S(e){return function(t,n){var o=n().routing.locationBeforeTransitions.pathname,r=encodeURIComponent(e);"/"!==o.slice(-1)&&(r="/".concat(r));var a="".concat(o).concat(r);t(Object(N.push)(a))}}var O=n(17),j=n(19),M=n(12),x=n(37),I=n(50),A=n(43);n.d(t,"h",function(){return F}),n.d(t,"a",function(){return P}),n.d(t,"b",function(){return H}),n.d(t,"c",function(){return B}),n.d(t,"d",function(){return V}),n.d(t,"e",function(){return z}),n.d(t,"f",function(){return W}),n.d(t,"g",function(){return G}),n.d(t,"k",function(){return q}),n.d(t,"l",function(){return K}),n.d(t,"n",function(){return Y}),n.d(t,"m",function(){return X}),n.d(t,"p",function(){return Z}),n.d(t,"o",function(){return $}),n.d(t,"s",function(){return ee}),n.d(t,"r",function(){return te}),n.d(t,"q",function(){return ne}),n.d(t,"v",function(){return oe}),n.d(t,"w",function(){return re}),n.d(t,"x",function(){return ae}),n.d(t,"z",function(){return ie}),n.d(t,"i",function(){return se}),n.d(t,"B",function(){return ce}),n.d(t,"C",function(){return le}),n.d(t,"D",function(){return ue}),n.d(t,"j",function(){return de}),n.d(t,"u",function(){return pe}),n.d(t,"y",function(){return he}),n.d(t,"A",function(){return fe}),n.d(t,"t",function(){return ge}),n.d(t,"E",function(){return be});var L=["past","error","is_fetching_folders","is_fetching_videos","card_dropdown_id","rename_id","show_move_modal"],D=new RegExp("\\".concat(I.b.join("|\\")),"i");function R(e,t){return function(n){j.b(e,t),n(Object(v.b)(g.a,t))}}function U(e){if(e.status>=400)throw new Error("Oops! Something went wrong - HTTP response: ".concat(e.status));return e}function F(e,t,n,o){return function(r){var a=o?o.trim().split("/"):[];r(Object(M.N)(Boolean(n))),r(Object(M.h)(t,e)),t&&r(me(e,a))}}function P(){return function(e,t){var n=t().videos_dashboard,o=n.past,r=m.a.omit(n,L);e(Object(M.Q)(o.concat([r])))}}function H(e,t,n){return function(o,r){var a,i=r().videos_dashboard,s=i.folder_special_id,l=i.top_level_folders,d=i.favorites,p=i.folders,h=m.a.find(d,{id:e}),v=m.a.find(p,{id:e}),g=m.a.without(p,v);if(o(Object(M.K)(g)),s===_.i&&o(Object(M.S)(g)),t&&h){var b=m.a.without(d,h);o(Object(M.H)(b))}return a=null!=n?JSON.stringify({new_parent_folder_id:n,archived:t}):JSON.stringify({archived:t}),u()("/v1/folders/".concat(e,"/archive"),{credentials:"include",headers:c()({},y.b,w.b),method:"PATCH",body:a}).then(U).then(function(){t&&o(Y()),n===_.i&&o(Object(M.S)(l.concat([v])));var e=t?"archived":"restored",r="".concat(v.name," successfully ").concat(e);o(Object(f.b)(r))}).catch(function(e){o(R(e,"Oops! Error archiving folder")),o(Object(M.H)(d)),o(Object(M.K)(p))})}}function B(e,t){return function(n,o){var r=o().videos_dashboard,a=r.folder_id,i=r.is_archived,s=r.breadcrumbs,l=r.videos,d=m.a.find(l,{id:e}),p=m.a.without(l,d),h=t?_.h:_.i;n(Object(M.W)(p));var v=JSON.stringify({folder_id:h,archived:t});return u()("/v1/videos/".concat(e),{credentials:"include",headers:c()({},y.b,w.b),method:"PATCH",body:v}).then(U).then(function(){var o=t?b.Yb:b.fc;O.h(o,{archiving:t,current_folder_id:a,depth:s.length-1,is_archived:i,new_folder_id:h,video_name:d.name,id:e});var r=t?"archived":"restored",c="".concat(d.name," successfully ").concat(r);n(Object(f.b)(c))}).catch(function(e){n(R(e,"Oops! Error while restoring folder")),n(Object(M.W)(l))})}}function V(e,t,n){return function(o,r){var a=r().videos_dashboard,s=a.checked_items,l=a.folder_id,d=a.folder_special_id,p=a.is_archived,h=a.top_level_folders,v=a.total_video_count,g=a.breadcrumbs,C=a.folders,E=a.videos,k=n||s;if(0!==k.length){var T=k.filter(function(e){return e.type===A.b}),N=k.filter(function(e){return e.type===A.c}),S=T.map(function(e){return m.a.find(C,{id:e.id})}),x=N.map(function(e){return m.a.find(E,{id:e.id})}),I=m.a.without.apply(m.a,[C].concat(i()(S))),L=m.a.without.apply(m.a,[E].concat(i()(x))),D=t?"moving":e?"archiving":"restoring",F=t?"moved":e?"archived":"restored";if(S.length<=0&&x.length<=0){var P="attempted bulk ".concat(D," without selection");return j.b(new Error(P))}var H=[];if(T.length>0){var B=JSON.stringify({folder_ids:T.map(function(e){return e.id}),new_parent_folder_id:t||null,archive:e});o(Object(M.K)(I)),d===_.i&&o(Object(M.S)(I)),H.push(u()("/v1/folders/bulk_move",{body:B,credentials:"include",headers:c()({},y.b,w.b),method:"PATCH"}).then(U).then(function(){e&&o(Y()),t===_.i&&o(Object(M.S)(h.concat(S)))}).catch(function(e){o(R(e,"error bulk ".concat(D," folders"))),o(Object(M.K)(C)),d===_.i&&o(Object(M.S)(I))}))}if(N.length>0){var V=JSON.stringify({video_ids:N.map(function(e){return e.id}),new_parent_folder_id:t||null,archive:e});o(Object(M.W)(L)),e&&o(Object(M.T)(Math.max(0,v-N.length))),H.push(u()("/v1/videos/bulk_move",{body:V,credentials:"include",headers:c()({},y.b,w.b),method:"PATCH"}).then(U).catch(function(e){o(R(e,"error bulk ".concat(D," videos"))),o(Object(M.W)(E))}))}Promise.all(H).then(function(){var n;O.h(b.e,{archiving:e,current_folder_id:l,depth:g.length-1,is_archived:p,new_parent_folder_id:t,num_folders:T.length,num_videos:N.length}),n=T.length>0&&N.length>0?"items":T.length>0?"folders":"videos";var r="".concat(k.length," ").concat(n," successfully ").concat(F);o(Object(f.b)(r))})}}}function z(e,t){return function(n,o){var a=o().videos_dashboard,i=a.folder_special_id,s=a.favorites,l=a.folders,d=a.past,p=function(e,t){var n=m.a.some(e,function(e){return e.name.toLowerCase()===t.toLowerCase()});return D.test(t)?"The following characters are not allowed: ".concat(I.b.join(" ")):n?"Cannot have duplicate folder names":null}(l,t);if(null===p){n(Object(M.I)(!0));var h=m.a.find(l,{id:e}),f=m.a.find(s,{id:e}),b=r()({},h,{name:t}),C=l.map(function(e){return e.id===b.id?b:e});if(f){var E=s.map(function(e){return e.id===b.id?b:e});if(n(Object(M.H)(E)),d.length>0){var k=d.map(function(e){return r()({},e,{favorites:E})});n(Object(M.Q)(k))}}n(Object(M.K)(C)),i===_.i&&n(Object(M.S)(C));var T=JSON.stringify({name:t});return u()("/v1/folders/".concat(e),{credentials:"include",headers:c()({},y.b,w.b),method:"PATCH",body:T}).then(U).then(function(){return n(Object(M.I)(!1))}).catch(function(e){n(R(e,"Oops! Error renaming folder")),n(Object(M.K)(l)),f&&n(Object(M.H)(s)),i===_.i&&n(Object(M.S)(l)),n(Object(M.I)(!1))})}n(Object(v.b)(g.a,p))}}function W(e,t){return function(n,o){var a=o().videos_dashboard.videos,i=m.a.find(a,{id:e}),s=r()({},i,{name:t}),l=a.map(function(e){return e.id===s.id?s:e});n(Object(M.W)(l));var d=JSON.stringify({name:t});return u()("/v1/videos/".concat(e),{credentials:"include",headers:c()({},y.b,w.b),method:"PATCH",body:d}).then(U).catch(function(e){n(R(e,"Oops! Error renaming video")),n(Object(M.W)(a)),n(Object(v.b)(g.a,e))})}}function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,o){n(Object(T.c)(x.a,!0));var r=JSON.stringify({parent_folder_id:e,shared:t}),a=o().videos_dashboard,i=a.folder_changes_pending,s=a.folder_special_id,l=a.is_fetching_folders,d=a.folders;if(!i&&!l)return n(Object(M.I)(!0)),u()("/v1/folders",{credentials:"include",headers:c()({},y.b,w.b),method:"POST",body:r}).then(U).then(function(e){return e.json()}).then(function(e){var t=d.slice(0);t.unshift(e),n(Object(M.K)(t)),n(Object(M.s)(e.id)),n(Object(M.I)(!1)),s===_.i&&n(Object(M.S)(t))}).catch(function(e){n(R(e,"Oops! Error creating folder")),n(Object(M.K)(d)),n(Object(M.I)(!1))})}}function q(e,t){return function(n,o){var a=o().videos_dashboard,i=a.folder_changes_pending,s=a.folder_id,l=a.folder_name,d=a.is_favorite,p=a.breadcrumbs,h=a.favorites,f=a.past;if(!(i||m.a.indexOf(_.a,e)>-1)){var v;if(n(Object(M.O)(t)),n(Object(M.I)(!0)),t&&!m.a.some(h,function(t){return t.id===e}))v=h.concat([{name:l,id:e}]);else{var g=m.a.find(h,{id:e});v=m.a.without(h,g)}if(n(Object(M.H)(v)),f.length>0){var C=f.map(function(e){return r()({},e,{favorites:v})}),E=m.a.last(C),k=m.a.find(E.folders,{id:e}),T=r()({},k,{favorite:t}),N=E.folders.map(function(e){return e.id===T.id?T:e});E.folders=N,n(Object(M.Q)(C))}var S=JSON.stringify({favorite:t});return u()("/v1/folders/".concat(e),{credentials:"include",headers:c()({},y.b,w.b),method:"PATCH",body:S}).then(U).then(function(){O.h(b.Q,{current:!0,current_parent_folder_id:s,depth:p.length-1,favorite:t,id:e})}).then(function(){return n(Object(M.I)(!1))}).catch(function(e){n(R(e,"Oops! Error marking folder as favorite")),n(Object(M.H)(h)),n(Object(M.O)(d)),n(Object(M.I)(!1))})}}}function K(e,t){return function(n,o){var a=o().videos_dashboard,i=a.folder_changes_pending,s=a.folder_id,l=a.top_level_folders,d=a.breadcrumbs,p=a.favorites,h=a.folders,f=a.past;if(!i){n(Object(M.I)(!0));var v,g,_=m.a.find(h,{id:e}),C=m.a.find(l,{id:e});if(_){v=r()({},_,{favorite:t});var E=h.map(function(e){return e.id===v.id?v:e});n(Object(M.K)(E))}else v=r()({},C,{favorite:t});if(t&&!m.a.some(p,function(t){return t.id===e}))g=p.concat([v]);else{var k=m.a.find(p,{id:e});g=m.a.without(p,k)}if(n(Object(M.H)(g)),f.length>0){var T=f.map(function(e){return r()({},e,{favorites:g})});n(Object(M.Q)(T))}var N=JSON.stringify({favorite:t});return u()("/v1/folders/".concat(e),{credentials:"include",headers:c()({},y.b,w.b),method:"PATCH",body:N}).then(U).then(function(){O.h(b.Q,{current:!1,current_parent_folder_id:s,depth:d.length-1,favorite:t,id:e})}).then(function(){return n(Object(M.I)(!1))}).catch(function(e){n(R(e,"Oops! Error marking folder as favorite")),n(Object(M.K)(h)),n(Object(M.H)(p)),n(Object(M.I)(!1))})}}}function J(e,t){return e&&!t?_.h:e||t?t:_.i}function Y(){return function(e,t){if(!t().videos_dashboard.is_fetching_favorites)return e(Object(M.j)()),u()("/v1/folders/favorites",{credentials:"include"}).then(U).then(function(e){return e.json()}).then(function(t){e(Object(M.H)(t))}).catch(function(t){e(R(t,"Oops! Error fetching favorite folders"))})}}function Q(e){return function(t,n){var o=n().videos_dashboard,r=o.folder_name,a=o.folder_shared,i=o.root_folder_id;return u()("/v1/folders/".concat(e,"/parents?root=").concat(i),{credentials:"include"}).then(U).then(function(e){return e.json()}).then(function(n){var o=n.reverse().concat({id:e,name:r,shared:a}).map(function(e){return{id:e.id,name:e.name,shared:e.shared}});t(Object(M.D)(o))}).catch(function(e){t(R(e,"Oops! Error fetching folder breadcrumbs"))})}}function X(e,t){return function(n,o){var r=o().videos_dashboard.favorites,a=m.a.find(r,{id:e}),i=t?_.g.specialId:_.j.specialId;return u()("/v1/folders/".concat(e,"/parents?root=").concat(i),{credentials:"include"}).then(U).then(function(e){return e.json()}).then(function(e){var t=e.reverse().slice(1).map(function(e){return encodeURIComponent(e.name)}),n=t.length>0?"".concat(t.join("/"),"/"):"";window.location.href="".concat(C.y,"/").concat(n).concat(a.name)}).catch(function(e){n(R(e,"Oops! Error in fetch favorite folders"))})}}function Z(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(r,a){var i=a().videos_dashboard,s=i.folder_id,c=i.folder_name,l=i.folder_description,d=i.folder_shared,m=i.is_archived,p=i.is_favorite,h=i.parent_folder_id,f=i.folder_owner_id,v=J(m,e),g="/v1/folders/".concat(v,"?content_type=folder")+"&limit=".concat(E);return r(Object(M.k)()),v===_.i?r(Object(M.F)(_.j)):v===_.h?r(Object(M.F)(_.g)):r(Object(M.F)({id:e,name:t,description:n,parentId:s,favorite:o})),u()(g,{credentials:"include"}).then(U).then(function(e){return e.json()}).then(function(e){var t=e.folders,n=e.folder;r(Object(M.F)({id:n.id,name:n.name,description:n.description,parentId:n.parent_folder_id,ownerId:n.owner_id,specialId:n.special_id,favorite:n.favorite,shared:n.shared})),r(Object(M.K)(t)),v===_.i&&r(Object(M.S)(t))}).catch(function(e){r(R(e,"Oops! Error while fetching folders")),r(Object(M.F)({id:s,name:c,description:l,parentId:h,ownerId:f,favorite:p,shared:d})),r(Object(M.L)(e))})}}function $(){return function(e,t){var n=t().videos_dashboard.is_archived?_.h:_.i,o="/v1/folders/hierarchy?special_id=".concat(n);return e(Object(M.l)()),u()(o,{credentials:"include"}).then(U).then(function(e){return e.json()}).then(function(t){return e(Object(M.M)(t))})}}function ee(e){return function(t,n){var o=n().videos_dashboard,r=o.all_videos_fetched,a=o.is_archived,i=o.is_fetching_videos,s=o.videos;if(!i&&!r){t(Object(M.n)());var c=J(a,e),l="/v1/folders/".concat(c,"?content_type=video")+"&limit=".concat(k,"&archived=").concat(a);if(0!==s.length){var d=new Date(s[s.length-1].createdAt);l="".concat(l,"&offsetDate=").concat(Number(d))}return u()(l,{credentials:"include"}).then(U).then(function(e){return e.json()}).then(function(e){var o=n().videos_dashboard.videos,r=e.videos;0!==r.length?t(Object(M.U)(o.concat(r))):t(Object(M.C)(!0))}).catch(function(e){t(R(e,"Oops! Error while fetching videos")),t(Object(M.V)(e))})}}}function te(){return function(e,t){var n=t().videos_dashboard,o=n.is_fetching_top_level_folders,r=n.top_level_folders;if(!o){e(Object(M.m)());var a="/v1/folders/".concat(_.i,"?content_type=folder")+"&limit=".concat(E);return u()(a,{credentials:"include"}).then(U).then(function(e){return e.json()}).then(function(t){var n=t.folders;e(Object(M.S)(n))}).catch(function(t){e(R(t,"Oops! Error while fetching top level folders")),e(Object(M.S)(r))})}}}function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,o){var r=o().videos_dashboard,a=r.is_archived,i=r.is_fetching_folders,s=r.is_fetching_videos;if(!i&&!s){n(Object(M.k)()),n(Object(M.n)());var l=new RegExp("^(".concat(C.y,"|").concat(C.c,")/"),"i"),d=e.replace(l,"").split("/").map(function(e){return decodeURIComponent(e)}).filter(function(e){return 0!==e.length}),m=JSON.stringify({archived:a,folder_names:d,parent_folder_id:t});return u()("/v1/folders/by_name",{credentials:"include",headers:c()({},y.b,w.b),method:"POST",body:m}).then(U).then(function(e){return e.json()}).then(function(e){var t=e.current_folder,o=e.folders,r=e.videos,a=t.id,i=t.name,s=t.description,c=t.parent_folder_id,l=t.favorite,u=t.shared;return 0===r.length&&n(Object(M.C)(!0)),n(Object(M.F)({id:a,name:i,description:s,parentId:c,favorite:l,shared:u})),n(Object(M.U)(r)),n(Object(M.K)(o)),e}).then(function(e){var t=e.current_folder;n(Q(t.id))}).catch(function(e){n(R(e,"Oops! Error while fetching videos and folders by name")),n(Object(M.L)(e)),n(Object(M.V)(e))})}}}function oe(e,t){return function(n,o){var r=o().videos_dashboard,a=r.is_archived,i=r.folder_id,s=r.folder_special_id,l=r.top_level_folders,d=r.breadcrumbs,p=r.folders,h=r.top_level_folders,v=r.favorites,g=m.a.find(p,{id:e}),C=m.a.without(p,g),E=p.concat(h).concat(v).find(function(e){return e.id==t});n(Object(M.K)(C)),s===_.i&&n(Object(M.S)(C));var k=JSON.stringify({parent_folder_id:t});return u()("/v1/folders/".concat(e),{credentials:"include",headers:c()({},y.b,w.b),method:"PATCH",body:k}).then(U).then(function(){O.h(b.R,{current_parent_folder_id:i,depth:d.length-1,folder_name:g.name,is_archived:a,new_parent_folder_id:t,receiving_folder_type:E&&E.shared?"public":"private",id:e}),t===_.i&&n(Object(M.S)(l.concat([g]))),n(Object(f.b)("".concat(g.name," successfully moved")))}).catch(function(e){n(R(e,"Oops! Error while moving folder")),n(Object(M.K)(p)),s===_.i&&n(Object(M.S)(p))})}}function re(e,t,n){return function(o,r){var a=r().videos_dashboard,i=a.is_archived,s=a.folder_id,l=a.total_video_count,d=a.breadcrumbs,p=a.videos,h=a.folders,v=a.top_level_folders,g=a.favorites;o(Object(T.c)(x.a,!0));var _,C=m.a.find(p,{id:e}),E=m.a.without(p,C),k=h.concat(v).concat(g).find(function(e){return e.id==t});return o(Object(M.W)(E)),null!=n?(_=JSON.stringify({folder_id:t,archived:n}),n&&o(Object(M.T)(Math.max(0,l-1)))):_=JSON.stringify({folder_id:t}),u()("/v1/videos/".concat(e),{credentials:"include",headers:c()({},y.b,w.b),method:"PATCH",body:_}).then(U).then(function(){O.h(b.ec,{archiving:n,current_folder_id:s,depth:d.length-1,is_archived:i,new_folder_id:t,video_name:C.name,receiving_folder_type:k&&k.shared?"public":"private",id:e}),o(Object(f.b)("".concat(C.name," successfully moved")))}).catch(function(e){o(R(e,"Oops! Error moving video")),o(Object(M.W)(p))})}}function ae(){return function(e,t){0!==t().videos_dashboard.past.length?e(Object(M.u)()):window.location.href=C.D}}function ie(e){return function(t,n){var o=n().videos_dashboard.card_dropdown_id;if(t(Object(M.a)()),o!==e)return t(Object(M.y)(e))}}function se(e){return function(t,n){var o=n().videos_dashboard.folders,r=m.a.find(o,{id:e}),a=m.a.without(o,r);if(window.confirm("Are you sure you would like to permanently delete "+"".concat(r.name," and all of its contents?")))return t(Object(M.K)(a)),u()("/v1/folders/".concat(e),{credentials:"include",method:"DELETE"}).then(U).catch(function(e){t(R(e,"Oops! Error deleting folder")),t(Object(M.K)(o))})}}function ce(e,t,n,o){return function(r,a){try{var i,s=a().videos_dashboard.checked_items,c=m.a.find(s,{id:e});if(!t&&!c)throw new Error("Error updating checked items");i=t?s.concat([{type:n,name:o,id:e}]):m.a.without(s,c),r(Object(M.E)(i))}catch(e){r(R(e,"Oops! Error in update checked items creator"))}}}function le(e,t){return function(n,o){var a=o().videos_dashboard,i=a.folders,s=a.past;if(!m.a.find(i,{id:e})){var c=m.a.findIndex(s,function(t){return!!m.a.some(t.folders,{id:e})});if(-1!==c){var l=r()({},s[c]),u=l.folders,d=m.a.find(u,{id:e}),p=r()({},d,{favorite:t}),h=s.slice(0);return l.folders=u.map(function(e){return e.id===p.id?p:e}),h.splice(c,1,l),n(Object(M.Q)(h))}}}}function ue(){return function(e,t){var n=t().videos_dashboard,o=n.checked_items,a=n.folder_to_move_to,i=n.folders,s=n.past,c=n.videos;if(0!==o.length&&!m.a.isEmpty(a)){var l=m.a.findIndex(s,function(e){return e.folder_id===a.id||e.folder_id===a.special_id});if(-1!==l){var u=r()({},s[l]),d=o.filter(function(e){return e.type===A.b}),p=o.filter(function(e){return e.type===A.c}),f=d.map(function(e){return m.a.find(i,{id:e.id})}),v=p.map(function(e){return m.a.find(c,{id:e.id})}),g=u.folders.concat(f),b=u.videos.concat(v);u.folders=m.a.sortBy(g,function(e){return new h.a(e.createdAt).format("YYYYMMDD")}).reverse(),u.videos=m.a.sortBy(b,function(e){return new h.a(e.createdAt).format("YYYYMMDD")}).reverse();var _=s.slice(0);return _.splice(l,1,u),e(Object(M.Q)(_))}}}}function de(e){return function(t,n){var o=n().videos_dashboard.videos,r=m.a.find(o,{id:e}),a=m.a.without(o,r);if(window.confirm("Are you sure you would like to permanently delete "+"".concat(r.name,"?")))return t(Object(M.W)(a)),u()("/v1/videos/".concat(e),{credentials:"include",method:"DELETE"}).then(U).catch(function(e){j.b(e,"error in delete video creator"),t(Object(v.b)(g.a,e.toString())),t(Object(M.W)(o))})}}function me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n,o){var r=o().videos_dashboard,a=r.is_fetching_folders,i=r.is_fetching_videos;if(!a&&!i){if(n(Object(M.k)()),t.length>0){n(Object(M.n)());var s=JSON.stringify({folder_names:t,parent_folder_id:e});return u()("/v1/folders/by_name",{credentials:"include",headers:c()({},y.b,w.b),method:"POST",body:s}).then(U).then(function(e){return e.json()}).then(function(e){var t=e.current_folder,o=e.folders,r=e.videos;return 0===r.length&&n(Object(M.C)(!0)),n(Object(M.F)({id:t.id,name:t.name,description:t.description,parentId:t.parent_folder_id,ownerId:t.owner_id,favorite:t.favorite,shared:t.shared})),n(Object(M.U)(r)),n(Object(M.K)(o)),e}).then(function(e){var t=e.folder;n(Q(t.id))}).catch(function(e){n(R(e,"Oops! Error while fetching shared videos and folders by name")),n(Object(M.L)(e)),n(Object(M.V)(e))})}var l="/v1/folders/".concat(e,"?content_type=folder")+"&limit=".concat(E);return u()(l,{credentials:"include"}).then(U).then(function(e){return e.json()}).then(function(e){var t=e.folders,o=e.folder;return n(Object(M.F)({id:o.id,name:o.name,description:o.description,parentId:o.parent_folder_id,ownerId:o.owner_id,favorite:o.favorite,shared:o.shared})),n(Object(M.K)(t)),e}).then(function(t){var o=t.folder;n(Object(M.t)()),n(ee(e)),n(Q(o.id))}).catch(function(e){n(R(e,"Oops! Error in fetch folders creator")),n(Object(M.L)(e))})}}}function pe(e,t){var n=e.id,o=e.name,r=e.description,a=e.favorite,i=e.shared;return function(e,s){e(P());var c=s().videos_dashboard.is_jtbd,l=s().videos_dashboard.root_is_public,u=s().videos_dashboard.folder_owner_id,d=s().user.current.id,p=s().user_jtbd,h=p.folders,f=p.videos;if(n==_.d||c){if(e(S(o)),e(Object(M.t)()),O.h(b.l,{name:o}),o===_.c){var v=h[0].folder;v.name=_.e,e(Object(M.P)(!0)),e(Object(M.K)([v])),e(Object(M.U)(f))}else if(c&&o===_.e){var g=h[0].children.map(function(e){return e.folder});e(Object(M.K)(g)),e(Object(M.U)([]))}else{var y=h[0].children.map(function(e){return e.folder}),w=m.a.find(y,function(e){return e.name===o});e(Object(M.K)([])),e(Object(M.U)(w.Videos))}var C=s().videos_dashboard.breadcrumbs;e(Object(M.D)(C.concat({id:n,name:o})))}else if(l){O.h(b.ub,{owner:d==u}),e(S(s().videos_dashboard.folders.find(function(e){return e.id==n}).name)),e(me(n,t))}else{var E=s().videos_dashboard.breadcrumbs;e(S(o)),e(Z(n,o,r,a)),e(Object(M.t)()),e(ee(n)),e(Object(M.D)(E.concat({id:n,name:o,shared:i})))}}}function he(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;return function(r){if(n)return r(Object(M.w)(e,t)),r(Object(M.x)()),Promise.resolve();r(Object(M.w)(e,t));var a=u()("/v1/folders/".concat(e),{credentials:"include",headers:c()({},y.b,w.b),method:"PATCH",body:JSON.stringify({shared:!0,analytics_location:o})}).then(U),i=new Promise(function(e){return setTimeout(e,2e3)});return Promise.all([a,i]).then(function(){return r(Object(M.x)(e))}).catch(function(e){r(R(e,"Oops! Error while sharing folder")),r(Object(M.v)(e))})}}function fe(e){return function(t){return t(Object(M.A)(e)),u()("/v1/folders/".concat(e),{credentials:"include",headers:c()({},y.b,w.b),method:"PATCH",body:JSON.stringify({shared:!1})}).then(U).then(function(e){return e.json()}).then(function(n){t(Object(M.B)(e)),t(Object(f.b)("".concat(n.name," is now a private folder")))}).catch(function(e){t(R(e,"Oops! Error while making folder private")),t(Object(M.z)(e))})}}var ve=m.a.debounce(function(e,t,n){u()("/v1/folders/".concat(t),{credentials:"include",headers:c()({},y.b,w.b),method:"PATCH",body:JSON.stringify({description:n})}).then(U).catch(function(t){e(R(t,"Oops! Error while changing folder description"))})},500,{maxWait:2e3});function ge(e){return function(t,n){var o=n().videos_dashboard.folder_id;t(Object(M.o)(e)),ve(t,o,e)}}function be(){return function(e){u()("/v1/videos/active_count",{credentials:"include",headers:c()({},y.b,w.b)}).then(U).then(function(e){return e.json()}).then(function(t){var n=t.count;return e(Object(M.T)(n))}).catch(function(t){e(R(t,"Oops! Error while updating total videos count"))})}}},454:function(e,t,n){"use strict";var o=n(4),r=n.n(o),a=n(5),i=n.n(a),s=n(6),c=n.n(s),l=n(7),u=n.n(l),d=n(8),m=n.n(d),p=n(0),h=n.n(p),f=n(10),v=n(80),g=n(67),b=n.n(g),_=(n(409),n(9)),y=n.n(_),w=(n(40),n(81),n(1)),C=n.n(w),E=n(2),k=n.n(E),T=n(11),N=n.n(T),S=n(16),O=n(265),j=n(17),M=n(200),x=n.n(M),I=3,A=n(18),L=n(183),D=n(142),R=(n(664),function(e){function t(){var e,n;r()(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(a))),k()(C()(C()(n)),"state",{peopleList:[],inviteCount:0,query:"",forceUpdate:!1}),k()(C()(C()(n)),"sendInvites",function(){var e=n.props,t=e.selections,o=e.user;t.forEach(function(e){var t=e.id,r=e.email,a=e.name,i=a&&(a.givenName||a.familyName);n.props.postGoogleInviteCreator({invitee_google_id:t,inviter_id:o.id,invitee_email:r.value,inviter_first_name:o.first_name||o.last_name,invitee_first_name:i})}),j.h(S.X,{number_of_invitees:t.length,source:"Google Contacts Invite Modal",company:o.company_name,inviter_position:o.company_position})}),k()(C()(C()(n)),"selectionHandler",function(e){var t=n.props,o=t.googleContactInfo,r=t.selections,a=null,i=null,s=o.map(function(t){return t.id===e?(a=y()({},t,{active:!t.active}),i=t.active?r.filter(function(t){return t.id!==e}):r.concat([a]),a):t});n.props.updateGoogleContactInfo(s,i),n.setState({forceUpdate:!0})}),k()(C()(C()(n)),"selectAllHandler",function(){var e=n.props.googleContactInfo.map(function(e){return y()({},e,{active:!0})});n.props.updateGoogleContactInfo(e,e.slice()),n.setState({forceUpdate:!0})}),k()(C()(C()(n)),"deselectAllHandler",function(){var e=n.props.googleContactInfo.map(function(e){return y()({},e,{active:!1})});n.props.updateGoogleContactInfo(e,[]),n.setState({forceUpdate:!0})}),k()(C()(C()(n)),"filterPeople",function(e){var t=n.props,o=t.googleContactInfo,r=t.selections,a=e&&e.target&&e.target.value,i=""===a?"":a||n.state.query,s=o.filter(function(e){if(!e)return!1;if(""===i)return!0;var t=i.toLowerCase().trim(),n=e.email&&e.email.value.toLowerCase().trim(),o=e.name&&e.name.displayName.toLowerCase().trim();return n&&n.startsWith(t)||o&&o.startsWith(t)});n.setState({query:i,peopleList:s,inviteCount:r.length})}),k()(C()(C()(n)),"onClose",function(){n.props.toggleGoogleInviteModal(!1)}),n}return m()(t,e),i()(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.peopleList,o=t.inviteCount,r=this.props,a=r.selections,i=r.googleContactInfo,s=a.length===i.length,c=N.a.partition(n,function(e){return e.loom_user}),l=b()(c,2),u=l[0],d=l[1],m=N.a.partition(d,function(e){return e.photo.url}),p=b()(m,2),f=p[0],v=p[1],g=f.concat(v).concat(u),_=0===g.length&&""===this.state.query;return h.a.createElement("div",{className:"google-share-modal-backdrop",onClick:this.onClose},h.a.createElement("div",{className:"google-share-modal",onClick:function(e){return e.stopPropagation()}},h.a.createElement("div",{className:"close",onClick:this.onClose}),h.a.createElement("h2",{className:"prompt"},"🔓 Who Viewed Your Video"),h.a.createElement("p",{className:"instructions"},"Invite ",I," people via email to Loom and instantly unlock the ability to see who views your video."),h.a.createElement("div",{className:"search-invi"},h.a.createElement("input",{className:"search-input",placeholder:_?"":"Search to add people...",onChange:this.filterPeople,disabled:_})),h.a.createElement("ul",{className:"people-list"},g.length>0&&g.map(function(t){return h.a.createElement("li",{className:"person ".concat(t.active?"selected":""),key:t.id,onClick:t.loom_user?function(){}:function(){return e.selectionHandler(t.id)}},h.a.createElement("div",{className:"avatar"},t.photo.url&&h.a.createElement("img",{className:"avatar-image",src:t.photo.url}),!t.photo.url&&h.a.createElement("img",{className:"placeholder",src:x.a})),h.a.createElement("div",{className:"id-info"},h.a.createElement("div",{className:"govt-name"},t.name&&t.name.displayName||t.email.value,t.loom_user&&h.a.createElement("span",{className:"on-loom"},"Already on Loom")),h.a.createElement("div",{className:"slack-handle"},t.email.value)),!t.loom_user&&h.a.createElement(L.a,{isChecked:t.active,onEnable:function(){return e.selectionHandler(t.id)},onDisable:function(){return e.selectionHandler(t.id)}}))}),0===g.length&&!this.props.fetching&&""!==this.state.query&&h.a.createElement("li",{className:"person no-results"},"No matches for ",this.state.query),0===g.length&&!this.props.fetching&&""===this.state.query&&h.a.createElement("li",{className:"person no-results"},"No contacts found"),0===g.length&&this.props.fetching&&h.a.createElement("div",{className:"spinner"},h.a.createElement(D.a,{color:"dark"}))),h.a.createElement("div",{className:"select-all"},h.a.createElement("span",{className:"select-all-text",onClick:function(){s?e.deselectAllHandler():e.selectAllHandler()}},"".concat(s?"Deselect":"Select"," All Friends"))),h.a.createElement(A.a,{buttonType:"a1",buttonClass:"invite-button",value:o<3?"Select ".concat(I-o," friends"):"Unlock Now",onClicked:this.sendInvites,disabled:o<3})))}},{key:"componentDidMount",value:function(){this.filterPeople(),j.h(S.T,{modal_step:"invite_list"})}},{key:"componentDidUpdate",value:function(e,t){(t.query!==this.state.query||t.forceUpdate)&&(this.filterPeople(),this.setState({forceUpdate:!1}));var n=this.props,o=n.googleFetched,r=n.fetching;0!==this.props.googleContactInfo.length||o||r||this.props.fetchGoogleInfoCreator(),o&&!e.googleFetched&&this.filterPeople()}}]),t}(p.Component)),U=Object(f.connect)(function(e){var t=e.google,n=e.user,o=t.contact_info,r=t.first_fetch_done,a=t.selections,i=t.fetching;return{googleContactInfo:o||[],user:n&&n.current,googleFetched:r,selections:a,fetching:i}},function(e){return{toggleGoogleInviteModal:function(t){return e(Object(v.d)(t))},fetchGoogleInfoCreator:function(){return e(Object(O.a)())},updateGoogleContactInfo:function(t,n){return e(Object(v.g)(t,n))},postGoogleInviteCreator:function(t){return e(Object(O.b)(t))}}})(R),F=n(39),P=n(137),H=n(57),B=n(29),V=function(){P.c(F.b,function(e){var t,n=Object(B.d)("redirect_after");t=decodeURIComponent(n),null!=e.error?t+="?oauth_error="+e.error+"&provider="+e.provider:null!=e.provider&&(t+="?provider="+e.provider),e.loginSuccess?H.d(function(){window.location.href=t}):window.location.href=t})},z=(n(428),function(e){function t(){var e,n;r()(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(a))),k()(C()(C()(n)),"getPermissions",function(){V()}),k()(C()(C()(n)),"onClose",function(){n.props.toggleGoogleInviteModal(!1)}),n}return m()(t,e),i()(t,[{key:"render",value:function(){var e=this.props.error;return h.a.createElement("div",{className:"google-share-modal-backdrop",onClick:this.onClose},h.a.createElement("div",{className:"google-share-modal",onClick:function(e){return e.stopPropagation()}},h.a.createElement("div",{className:"close",onClick:this.onClose}),h.a.createElement("h2",{className:"prompt"},"🔓 Who Viewed Your Video"),h.a.createElement("p",{className:"instructions"},"Invite ",I," people via email to Loom and instantly unlock the ability to see who views your video."),!e&&h.a.createElement("div",{className:"search",onClick:this.getPermissions}),!e&&h.a.createElement("div",{className:"dummy-list",onClick:this.getPermissions},h.a.createElement("div",{className:"dummy-row"},h.a.createElement("div",{className:"dummy-wrapper"},h.a.createElement("div",{className:"dummy-avatar"})),h.a.createElement("div",{className:"dummy-info"},h.a.createElement("div",{className:"dummy-name"}),h.a.createElement("div",{className:"dummy-email"})),h.a.createElement("div",{className:"dummy-check"})),h.a.createElement("div",{className:"dummy-row"},h.a.createElement("div",{className:"dummy-wrapper"},h.a.createElement("div",{className:"dummy-avatar"})),h.a.createElement("div",{className:"dummy-info"},h.a.createElement("div",{className:"dummy-name"}),h.a.createElement("div",{className:"dummy-email"})),h.a.createElement("div",{className:"dummy-check"})),h.a.createElement("div",{className:"dummy-row"},h.a.createElement("div",{className:"dummy-wrapper"},h.a.createElement("div",{className:"dummy-avatar"})),h.a.createElement("div",{className:"dummy-info"},h.a.createElement("div",{className:"dummy-name"}),h.a.createElement("div",{className:"dummy-email"})),h.a.createElement("div",{className:"dummy-check"}))),e&&h.a.createElement("div",{className:"err"},h.a.createElement("div",{className:"big-text"},"Uh oh! It Seems like we weren't able to connect your Google Account."),h.a.createElement("div",{className:"little-text"},"Loom never stores, alters or sends any information from your email account without your consent"),h.a.createElement("div",{className:"retry",onClick:this.getPermissions},"Try Again")),h.a.createElement("div",{className:"hr"}),h.a.createElement("div",{className:"goog-button",onClick:this.getPermissions},h.a.createElement("div",{className:"gicon"}),"Invite using",h.a.createElement("span",{style:{fontWeight:"600"}}," Gmail"))))}},{key:"componentDidMount",value:function(){j.h(S.T,{modal_step:this.props.error?"connect_canceled":"connect_account"})}}]),t}(p.Component)),W=Object(f.connect)(null,function(e){return{toggleGoogleInviteModal:function(t){return e(Object(v.d)(t))}}})(z),G=n(445),q=n.n(G),K=(n(665),function(e){function t(){var e,n;r()(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(a))),k()(C()(C()(n)),"handleLatest",function(){n.onClose("/most-recent-video")}),k()(C()(C()(n)),"onClose",function(e){e?window.location.href=e:window.location.reload()}),n}return m()(t,e),i()(t,[{key:"render",value:function(){var e=this,t=this.props.inviteCount;return h.a.createElement("div",{className:"google-share-modal-backdrop",onClick:this.onClose},h.a.createElement("div",{className:"google-share-modal-success",onClick:function(e){return e.stopPropagation()}},h.a.createElement("div",{className:"close",onClick:function(){return e.onClose()}}),h.a.createElement("div",{className:"success-sec"},"".concat(t," invites have been sent via Gmail")),h.a.createElement("div",{className:"success-primary"},"View Lists Unlocked!"),h.a.createElement("img",{src:q.a,className:"success-img"}),h.a.createElement("div",{className:"success-text"},"You will now be able to see who viewed your videos! Hover over the video view count to access the video view list."),h.a.createElement(A.a,{buttonType:"a1",buttonClass:"goto-button",value:"Go to Latest Video",onClicked:this.handleLatest})))}}]),t}(p.Component)),J=Object(f.connect)(function(e){var t=e.google,n=t.selections,o=t.contact_info;return{inviteCount:n.length||0,contactInfo:o,selections:n}},function(e){return{toggleGoogleInviteSuccess:function(t){return e(Object(v.e)(t))},initGoogleContactInfo:function(t){return e(Object(v.b)(t))},toggleGoogleInviteModal:function(t){return e(Object(v.d)(t))}}})(K),Y=n(391),Q=function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return m()(t,e),i()(t,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.google,o=((t||{}).oauth||{}).google,r=o&&o.scopes,a=Object(Y.a)(r);return o?a?n.invite_success?h.a.createElement(J,null):h.a.createElement(U,null):h.a.createElement(W,{error:n.oauth_error}):null}}]),t}(p.Component),X=Object(f.connect)(function(e){var t=e.google;return{google:t,user:e.user.current,source:t.invite_modal_source}},function(e){return{toggleGoogleInviteModal:function(t){return e(Object(v.d)(t))}}})(Q),Z=(n(111),n(112),n(260),n(209),n(22)),$=n.n(Z),ee=n(122),te=n(186),ne=n(14),oe=n(115),re=n(289),ae=n(211),ie=n(446),se=n.n(ie),ce=n(447),le=n.n(ce),ue=(n(666),{inviteCount:0,filterBy:"",unlockSuccesful:!1,inviteSuccessful:!1}),de=function(e){function t(){var e,n;r()(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(a))),k()(C()(C()(n)),"state",ue),k()(C()(C()(n)),"sendInvites",function(){var e=n.props,t=e.user,o=e.multiShare,r=e.slackUser,a=e.slack,i=o.search_content,s=t.oauth[F.d].team_domain,c=t.oauth[F.d].team_name,l=o.dm_content.length,u=t.company_position||r.profile.title;j.h(S.Qb,{source:n.props.source,number_of_invitees:i.length,slack_subdomain:s,total_signups:a.users_on_loom.length,team_size:l,team_name:c,inviter_position:u}),i.forEach(function(e){var o="".concat(ne.w,"/").concat(s,"/@").concat(r.name,"+@").concat(e.name),a=e.profile.first_name||e.real_name.split(" ")[0]||e.name;n.props.postSlackInviteCreator({inviter_id:t.id,invitee_slack_id:e.id,channel_type:e.type,inviter_avatar:r.profile.image_192,invitee_avatar:e.profile.image_192,inviter_email:r.profile.email,invitee_email:e.profile.email,inviter_handle:r.name,invitee_handle:e.name,inviter_first_name:r.profile.first_name,invitee_first_name:a,inviter_last_name:r.profile.last_name,invitee_last_name:e.profile.last_name,inviter_position:u,invitee_position:e.profile.title,invite_url:o,is_slack_owner:r.is_owner,is_slack_admin:r.is_admin,slack_subdomain:s,team_name:c,team_size:l,message:{text:"Hey ".concat(a,"! I think you use Chrome, right? I'm using an extension called Loom to record instantly shareable videos to help get my message across. I think you'd like it: ").concat(o)}}).then(function(e){n.state.unlockSuccesful||(e.inviteCount>=I?(n.setState({unlockSuccesful:!0}),n.autoClose&&window.clearTimeout(n.autoClose)):(n.setState({inviteSuccessful:!0}),n.autoClose=window.setTimeout(n.onClose,2e3)))})})}),k()(C()(C()(n)),"onClose",function(){n.props.toggleSlackInviteModal(!1),n.props.shareModalToggleShareSuccess(!1),n.setState(ue),n.props.onClose()}),k()(C()(C()(n)),"filterPeople",function(e){n.setState({filterBy:e.target.value})}),k()(C()(C()(n)),"selectAll",function(e){var t=e.map(function(e){return e.active?void 0:e.dm.id}).filter(function(e){return void 0!==e});n.props.shareModalClickHandler(t)}),k()(C()(C()(n)),"deselectAll",function(e){var t=e.map(function(e){return e.active?e.dm.id:void 0}).filter(function(e){return void 0!==e});n.props.shareModalClickHandler(t)}),n}return m()(t,e),i()(t,[{key:"render",value:function(){var e,t=this,n=null,o=this.props.multiShare.search_content.length,r=this.props.slack;if(this.state.unlockSuccesful)e=1===o?"1 invite has":"".concat(o," invites have"),n=h.a.createElement("div",{className:"slack-share-modal",onClick:function(e){return e.stopPropagation()}},h.a.createElement("div",{className:"close",onClick:this.onClose}),h.a.createElement("div",{className:"invite-count"},e," been sent via Slack"),h.a.createElement("div",{className:"proclamation"},"View Lists Unlocked!"),h.a.createElement("img",{className:"view-example",src:le.a}),h.a.createElement("div",{className:"details"},"You will now be able to see viewed your videos! Hover over the video view count to access the video view list."),h.a.createElement("div",{className:"note"},"Note: Videos viewed by people not registered with Loom will still be anonymous."),h.a.createElement(A.a,{buttonType:"a1",buttonClass:"latest-video-button",value:"Go to Latest Video",onClicked:function(){return window.location.href="/most-recent-video"}}));else if(this.state.inviteSuccessful){var a=this.props.multiShare.search_content,i=o-1,s=a[0].profile.first_name||a[0].real_name.split(" ")[0]||a[0].name;if(1===o)e="Invite sent to ".concat(s);else{var c=1===i?"other":"others";e="Invites sent to ".concat(s," and ").concat(i," ").concat(c)}n=h.a.createElement("div",{className:"slack-share-modal",onClick:function(e){return e.stopPropagation()}},h.a.createElement("div",{className:"close",onClick:this.onClose}),h.a.createElement("img",{className:"encourage-sharing",src:se.a}),h.a.createElement("div",{className:"invite-count"},e))}else{e=0===o?"Send Invites":1===o?"Send 1 Invite":"Send ".concat(o," Invites");var l=this.state.filterBy.toLowerCase(),u=new RegExp("(?:^|\\s)".concat(l)),d=new RegExp("^".concat(l)),m=this.props.peopleList.filter(function(e){return u.test(e.dm.real_name.toLowerCase())||d.test(e.dm.name.toLowerCase())}),p=m.every(function(e){return e.active}),f=Object(T.partition)(m,function(e){return!r.users_on_loom.includes(e.dm.id)}),v=f[0].concat(f[1].map(function(e){return y()({},e,{onLoom:!0})}));n=h.a.createElement("div",{className:"slack-share-modal",onClick:function(e){return e.stopPropagation()}},h.a.createElement("div",{className:"close",onClick:this.onClose}),h.a.createElement("h2",{className:"prompt"},"🔓 Unlock Who Viewed"),h.a.createElement("p",{className:"instructions"},"Invite ",I," teammates to Loom and instantly unlock the ability to see who views each video."),h.a.createElement("div",{className:"search"},h.a.createElement("input",{className:"search-input",placeholder:"Search to add people...",onChange:this.filterPeople})),h.a.createElement("ul",{className:"people-list"},v.length>0&&v.map(function(e){return h.a.createElement("li",{className:"person ".concat(e.active?"selected":""),key:e.dm.name,onClick:function(){return t.props.shareModalClickHandler(e.dm.id)}},h.a.createElement("div",{className:"avatar"},h.a.createElement("img",{className:"avatar-image",src:e.dm.profile.image_72})),h.a.createElement("div",{className:"id-info"},h.a.createElement("div",{className:"govt-name"},e.dm.real_name,e.onLoom&&h.a.createElement("span",{className:"on-loom"},"Already on Loom")),h.a.createElement("div",{className:"slack-handle"},"@",e.dm.name)),h.a.createElement(L.a,{isChecked:e.active,onEnable:function(){return t.props.shareModalClickHandler(e.dm.id)},onDisable:function(){return t.props.shareModalClickHandler(e.dm.id)}}))}),0===v.length&&h.a.createElement("li",{className:"person no-results"},"No matches for ",this.state.filterBy)),h.a.createElement("div",{className:"select-all"},p&&h.a.createElement("span",{className:"select-all-text",onClick:function(){return t.deselectAll(v)}},"Deselect All Teammates"),!p&&h.a.createElement("span",{className:"select-all-text",onClick:function(){return t.selectAll(v)}},"Select All Teammates")),h.a.createElement(A.a,{buttonType:"a1",buttonClass:"invite-button",value:0===o?"Select ".concat(I," teammates"):"Unlock Now",onClicked:this.sendInvites,disabled:0===o}))}return h.a.createElement("div",{className:"slack-share-modal-backdrop",onClick:this.onClose},n)}},{key:"UNSAFE_componentWillUpdate",value:function(e){if(!1===this.props.slack.show_invite_modal&&!0===e.slack.show_invite_modal){var t=e.user,n=e.multiShare,o=e.slackUser,r=e.slack,a=e.source,i=t.oauth[F.d].team_domain,s=n.dm_content.length,c=t.company_position||o&&o.profile.title;j.h(S.Mb,{source:a,slack_subdomain:i,total_signups:r.users_on_loom.length,team_size:s,inviter_position:c})}}},{key:"componentDidMount",value:function(){var e=3,t=this.props,n=t.peopleList,o=t.slack,r=[];n.forEach(function(t){e>0&&o&&!o.users_on_loom.includes(t.dm.id)&&(e-=1,r.push(t.dm.id))}),this.props.shareModalClickHandler(r)}}]),t}(p.Component);de.propTypes={onClose:$.a.func},de.defaultProps={onClose:function(){}};var me=Object(f.connect)(function(e){var t,n=e.slack,o=e.user,r=e.multi_share,a=[],i={};if(o.current.oauth&&r.dm_content.length>0){var s=o.current.oauth[F.d].id;a=(t=Object(T.partition)(r.dm_content,function(e){return e.dm.id===s}))[1],i=(t[0][0]||{}).dm}return{slack:n,multiShare:r,peopleList:a,slackUser:i,user:o.current,source:n.invite_modal_source}},function(e){return{postSlackInviteCreator:function(t){return e(Object(ae.d)(t))},shareModalClickHandler:function(t){return e(Object(re.a)(oe.b,t))},shareModalToggleShareSuccess:function(t){return e(Object(ee.f)(t))},toggleSlackInviteModal:function(t){return e(Object(te.c)(t))}}})(de),pe=function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return m()(t,e),i()(t,[{key:"render",value:function(){var e=this.props,t=e.showSlackInviteModal,n=e.showGoogleInviteModal;return t?h.a.createElement(me,null):n?h.a.createElement(X,null):null}}]),t}(p.Component);t.a=Object(f.connect)(function(e){var t=e.slack,n=e.google;return{showSlackInviteModal:t.show_invite_modal,showGoogleInviteModal:n.show_invite_modal}},null)(pe)},455:function(e,t,n){"use strict";n(40);var o=n(4),r=n.n(o),a=n(5),i=n.n(a),s=n(6),c=n.n(s),l=n(7),u=n.n(l),d=n(8),m=n.n(d),p=n(1),h=n.n(p),f=n(2),v=n.n(f),g=n(130),b=n.n(g),_=n(11),y=n.n(_),w=n(266),C=n.n(w),E=n(0),k=n.n(E),T=n(10),N=n(12),S=n(68),O=n(228),j=n(121),M=n(45),x=n(18),I=n(346),A=n(43),L=n(27),D=n(142),R=(n(667),function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return m()(t,e),i()(t,[{key:"render",value:function(){var e,t,n=this.props,o=n.closeFolder,r=n.checkedFolderIds,a=n.doNotRecurse,i=n.folder,s=n.folderToMoveTo,c=n.generateChildren,l=n.level,u=n.openedFolderIds,d=n.openFolder,m=i.folder,p=m.id,h=m.name,f=m.local_id,v=i.children.length>0,g=y.a.indexOf(r,p)>-1,b=null!=f?s.local_id===f:s.id===p,_=y.a.indexOf(u,p)>-1;if(g)return null;v&&_&&!a?(e=k.a.createElement("div",{className:"minus-icon",onClick:function(e){return o(e,p)}}),t=c(i.children,r,l+1)):!v||_||a||(e=k.a.createElement("div",{className:"plus-icon",onClick:function(e){return d(e,p)}}));var w={paddingLeft:"".concat(24*l,"px")};return k.a.createElement("div",{className:"parent-cell-container",key:p},k.a.createElement("div",{className:"grid-cell ".concat(b?"selected":""),onClick:this.select.bind(this,i.folder),style:w},k.a.createElement("div",{className:"cell-info"},e,k.a.createElement("div",{className:"name"},h))),t)}},{key:"select",value:function(e){this.props.folderToMoveTo.id!==e.id&&this.props.updateFolderToMoveTo(e)}}]),t}(E.Component)),U=Object(T.connect)(function(e){return{folderToMoveTo:e.videos_dashboard.folder_to_move_to}},function(e){return{updateFolderToMoveTo:function(t){return e(Object(N.J)(t))}}})(R),F=(n(668),function(e){function t(){var e,n;r()(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(a))),v()(h()(h()(n)),"state",{opened_folder_ids:[]}),v()(h()(h()(n)),"closeFolder",function(e,t){e.stopPropagation();var o=n.state.opened_folder_ids;n.setState({opened_folder_ids:y.a.without(o,t)})}),v()(h()(h()(n)),"generateChildren",function(e,t,o,r){var a=n.state.opened_folder_ids;return e.map(function(e){return k.a.createElement(U,{closeFolder:n.closeFolder,checkedFolderIds:t,doNotRecurse:r,folder:e,generateChildren:n.generateChildren,key:e.folder.id||e.folder.local_id,level:o,openedFolderIds:a,openFolder:n.openFolder})}).filter(function(e){return e})}),v()(h()(h()(n)),"openFolder",function(e,t){e.stopPropagation();var o=n.state.opened_folder_ids;y.a.some(o,t)||n.setState({opened_folder_ids:o.concat(t)})}),n}return m()(t,e),i()(t,[{key:"render",value:function(){var e=this.props,t=e.checkedItems,n=e.currentFolderId,o=e.foldersHierarchy,r=e.isFetchingHierarchy,a=null,i=null,s=null;if(!r&&o.length>0&&o[0]&&o[0].children.length>0){var c=o[0].children,l=t.filter(function(e){return e.type===A.b}).map(function(e){return e.id});n!==L.i&&(s=this.generateChildren([o[0]],l,1,!0)),a=this.generateChildren(c,l,1,!1)}return r&&(i=k.a.createElement(D.a,null)),k.a.createElement("div",{className:"hierarchy-grid ".concat(r?"loading":"")},i,s,a)}},{key:"UNSAFE_componentWillMount",value:function(){this.props.fetchFolderHierarchy()}}]),t}(E.Component)),P=Object(T.connect)(function(e){var t=e.videos_dashboard;return{checkedItems:t.checked_items,currentFolderId:t.folder_id,foldersHierarchy:t.folders_hierarchy,isFetchingHierarchy:t.is_fetching_hierarchy}},function(e){return{fetchFolderHierarchy:function(){return e(Object(M.o)())}}})(F),H=(n(669),"move-modal-container"),B=function(e){function t(){var e,n;r()(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(a))),v()(h()(h()(n)),"focusNewFolderInput",null),v()(h()(h()(n)),"hierarchyGridRef",null),v()(h()(h()(n)),"newFolderInputRef",null),v()(h()(h()(n)),"initialHierarchyGridTop",null),v()(h()(h()(n)),"saveHierarychyGridRef",function(e){n.hierarchyGridRef=e,e&&(n.initialHierarchyGridTop=window.getComputedStyle(e).top)}),v()(h()(h()(n)),"playAnimation",function(e){if(n.newFolderInputRef){return"showNewFolderName"==e?(b()({targets:n.hierarchyGridRef,top:0,elasticity:200}),b()({targets:n.newFolderInputRef.parentNode,scaleY:[0,1],opacity:[0,1],elasticity:200})):"hideNewFolderName"==e?(b()({targets:n.hierarchyGridRef,top:n.initialHierarchyGridTop,elasticity:200}),b()({targets:n.newFolderInputRef.parentNode,scaleY:[1,0],opacity:[1,0],elasticity:200})):void 0}}),v()(h()(h()(n)),"onClickNewFolder",function(){n.newFolderInputRef&&(n.newFolderInputRef.select(),n.newFolderInputRef.closest(".grid").scrollTo(0,0)),n.props.onClickNewFolder()}),v()(h()(h()(n)),"onKeyUpNewFolderName",function(e){S.g.indexOf(e.key)>-1&&n.props.onEnteredNewFolderName(n.props.newFolderName),S.h.indexOf(e.key)>-1&&n.props.onCancelNewFolder()}),v()(h()(h()(n)),"onChangeNewFolderName",function(e){n.props.onChangeNewFolderName(e.target.value)}),v()(h()(h()(n)),"refInputFolderName",function(e){n.newFolderInputRef=e,n.focusNewFolderInput&&e&&(n.focusNewFolderInput=!1,e.select(),e.closest(".grid").scrollTo(0,0))}),v()(h()(h()(n)),"exit",function(e){e.target.className===H&&n.props.onHide()}),v()(h()(h()(n)),"move",function(){var e=n.props.folderToMoveTo;n.props.onMove(e.special_id||e.id,e.name,n.props.checkedItems)}),n}return m()(t,e),i()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.checkedItems,o=t.currentFolderId,r=t.folderToMoveTo,a=t.show,i=t.showNewFolderInput,s=t.newFolderName,c=t.isFetchingHierarchy;if(!a)return null;var l=!0,u=null;u=1===n.length?n[0].name:y.a.every(n,function(e){return e.type===A.b})?"".concat(n.length," Folders"):y.a.every(n,function(e){return e.type===A.c})?"".concat(n.length," Videos"):"".concat(n.length," Items"),y.a.isEmpty(r)||r.id===o||null==r.id||(l=!1);var d=(i?s:r.name)||"...";return k.a.createElement("div",{className:H,onClick:this.exit},k.a.createElement("div",{className:"move-modal"},k.a.createElement("div",{className:"title"},"Move ",k.a.createElement("h4",{className:"name"},u)," ","to ",k.a.createElement("h4",{className:"name"},d)),k.a.createElement("div",{className:"grid"},k.a.createElement(I.a,{alwaysRender:!0,show:this.props.showNewFolderInput,onDidMount:function(){return e.playAnimation("showNewFolderName")},onWillUnmount:function(){return e.playAnimation("hideNewFolderName")}},k.a.createElement("div",{className:"move-new-folder-input-wrap"},k.a.createElement("input",{type:"text",className:"move-new-folder-input",ref:this.refInputFolderName,value:this.props.newFolderName,onChange:this.onChangeNewFolderName,onFocus:this.props.onFocusNewFolderName,onBlur:this.props.onBlurNewFolderName,onKeyUp:this.onKeyUpNewFolderName}))),k.a.createElement("div",{className:"hierarchy-grid-wrap",ref:this.saveHierarychyGridRef},k.a.createElement(P,null))),k.a.createElement("div",{className:"move-new-folder-button ".concat(c?"disabled":""),onClick:this.onClickNewFolder},"+ Create New Folder"),k.a.createElement("div",{className:"controls"},k.a.createElement(x.a,{buttonClass:"move-cancel-button",buttonType:"rp-secondary-3",value:"Cancel",onClicked:this.props.onClickCancel}),k.a.createElement(x.a,{buttonClass:"move-confirm-button",buttonType:"rp-primary-3",disabled:l,value:"Move",onClicked:this.move}))))}},{key:"UNSAFE_componentWillMount",value:function(){this._toggleShow(this.props.show)}},{key:"componentWillUnmount",value:function(){this._toggleShow(this.props.show)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.show!=e.show&&this._toggleShow(e.show),!this.props.showNewFolderInput&&e.showNewFolderInput&&(this.focusNewFolderInput=!0)}},{key:"_toggleShow",value:function(e){e?document.body.classList.add("show-move-modal"):document.body.classList.remove("show-move-modal"),e?C.a.bind(O.c,this.props.onHide):C.a.unbind(O.c)}}]),t}(E.Component);t.a=Object(T.connect)(function(e,t){var n=e.videos_dashboard,o=n.checked_items,r=n.folder_id,a=n.folder_to_move_to,i=n.show_move_modal,s=n.new_folder_name,c=n.show_new_folder_input,l=n.is_fetching_hierarchy;return{currentFolderId:t.currentFolderId||r,showNewFolderInput:c,newFolderName:s,checkedItems:o,folderToMoveTo:a,show:i,isFetchingHierarchy:l}},function(e,t){return{onFocusNewFolderName:function(){return e(Object(N.J)(null))},onBlurNewFolderName:function(){return e(Object(N.c)())},onChangeNewFolderName:function(t){return e(Object(N.g)(t))},onClickNewFolder:function(){return e(Object(N.e)())},onCancelNewFolder:function(){return e(Object(N.c)())},onEnteredNewFolderName:function(t){e(Object(j.b)(null,t))},onClickCancel:function(){return e(Object(N.R)(!1))},onHide:function(){return e(Object(N.R)(!1))},onMove:t.onMove||function(t,n,o){e(Object(M.D)()),e(Object(M.d)(null,t,o)),e(Object(N.R)(!1))}}})(B)},456:function(e,t,n){"use strict";n(81);var o=n(4),r=n.n(o),a=n(5),i=n.n(a),s=1e3,c=n(19),l="websocket bad close code",u=function(){function e(t){var n=this;r()(this,e),this.websocket=new WebSocket(t),this.messageQueue=[],this.closeCode=null,this.onErrorHandler=null,this.close=this.close.bind(this),this.websocket.onclose=function(e){var t=e.code;if(n.closeCode=t,t!==s){n.websocket=null;var o=new Error("".concat(l,": ").concat(t));c.b(o),null!=n.onErrorHandler&&n.onErrorHandler(o,{code:t})}}}return i()(e,[{key:"ready",value:function(e){var t=this;this.websocket.onopen=function(){e(),window.addEventListener("beforeunload",t.close),window.addEventListener("unload",t.close)}}},{key:"onError",value:function(e){this.onErrorHandler=e}},{key:"onMessage",value:function(e){this.websocket.onmessage=e}},{key:"closedFromServerError",value:function(){return 1006===this.closeCode||1001===this.closeCode}},{key:"send",value:function(e){var t=this;return null==this.websocket?console.error("tried sending message on closed websocket"):window.navigator.onLine?(this.messageQueue.length>0&&(console.log("draining websocket message queue"),this.messageQueue.forEach(function(e){t.websocket.send(e)}),this.messageQueue=[]),void this.websocket.send(e)):(this.messageQueue.push(e),void console.log("no network connection - queued ".concat(this.messageQueue.length),"message in buffer"))}},{key:"close",value:function(){null!=this.websocket&&(this.websocket.close(s),window.removeEventListener("beforeunload",this.close),window.removeEventListener("unload",this.close)),this.websocket=null}}]),e}();t.a=u},516:function(e,t,n){},517:function(e,t,n){e.exports=n.p+"img/icons/loom-logo-mark-white-3a0d312bc47704fae8b92452b4cdcdfc.svg"},549:function(e,t,n){e.exports=n.p+"img/icons/new/trash-e54700e658ea6485b7e77a216de23486.svg"},550:function(e,t,n){e.exports=n.p+"img/icons/locked-dark-c8561a59d6fa3b0514679c4633b92b4c.svg"},605:function(e,t,n){},613:function(e,t,n){},620:function(e,t,n){},645:function(e,t,n){},646:function(e,t,n){},649:function(e,t,n){e.exports=n.p+"img/notifications/notification-prompt@2x-7fcca3af5ad20a2661c9c25c3c3483f0.png"},650:function(e,t,n){e.exports=n.p+"img/notifications/notifications_always_allow-eafad1e116af063dcd7b9acbafee4fbc.gif"},651:function(e,t,n){},654:function(e,t,n){},662:function(e,t,n){},663:function(e,t,n){},664:function(e,t,n){},665:function(e,t,n){},666:function(e,t,n){},667:function(e,t,n){},668:function(e,t,n){},669:function(e,t,n){},670:function(e,t,n){},671:function(e,t,n){},69:function(e,t,n){e.exports=n.p+"img/video-player/love@2x-c6bba2d6f6f66a2ed974a030fd8bd798.png"},697:function(e,t,n){e.exports={actionDot:"action-dot_actionDot_1qm","ui-action-dot":"action-dot_ui-action-dot_5Y8",topLeft:"action-dot_topLeft_xg2",topRight:"action-dot_topRight_25d",outsideLeftCenter:"action-dot_outsideLeftCenter_2ey"}},72:function(e,t,n){e.exports=n.p+"img/video-player/joy@2x-11d4b549a1118403a7cfe7e764f4f4be.png"},73:function(e,t,n){e.exports=n.p+"img/video-player/wow@2x-458e8d72d01c203bfc037b1ee25d3c04.png"},74:function(e,t,n){e.exports=n.p+"img/video-player/yay@2x-eeda37feb80539bbec752509dfb24ea2.png"},82:function(e,t,n){e.exports=n.p+"img/video-player/down-5a09f7dac2d496771bc94e29f9330bc7.png"},83:function(e,t,n){e.exports=n.p+"img/video-player/down@2x-8d91e71e400c4f9af7f1ae78a655a74a.png"},84:function(e,t,n){e.exports=n.p+"img/video-player/down@3x-efcd2923ec49f5f6eb3e6d1f62e59467.png"},85:function(e,t,n){e.exports=n.p+"img/video-player/gradient-7b63347e5bc068ac6d57c3dd099bf8d3.png"},86:function(e,t,n){e.exports=n.p+"img/video-player/joy-c08add9f5acc72aec484d6364093e283.png"},87:function(e,t,n){e.exports=n.p+"img/video-player/joy@3x-f71b6973feacd98cfb4c9b2805d3aa1b.png"},88:function(e,t,n){e.exports=n.p+"img/video-player/love-2644b32b35c2cca9c34e0068194a847f.png"},89:function(e,t,n){e.exports=n.p+"img/video-player/love@3x-63e78bc76fac49c7c1469396a4714aa6.png"},90:function(e,t,n){e.exports=n.p+"img/video-player/nervous-c8520d3de7e6697f3866d2bab5ec0ef2.png"},91:function(e,t,n){e.exports=n.p+"img/video-player/nervous@2x-8768995a5f359ab90b608317b1f5bc61.png"},92:function(e,t,n){e.exports=n.p+"img/video-player/nervous@3x-d7ee9f7129d6cdadc710a064b4d2e388.png"},93:function(e,t,n){e.exports=n.p+"img/video-player/up-7e8cc17ac8d1317c3011e04edba89f53.png"},94:function(e,t,n){e.exports=n.p+"img/video-player/up@2x-66bb68fe8ee746f22a18f4cd4c384595.png"},95:function(e,t,n){e.exports=n.p+"img/video-player/up@3x-b5e6d83143cd2884642e77992f390a06.png"},96:function(e,t,n){e.exports=n.p+"img/video-player/wow-fe3d11c3629df74654a7c5233e8160b6.png"},97:function(e,t,n){e.exports=n.p+"img/video-player/wow@3x-c1c755253db9c69ab6de7460155d4fa1.png"},98:function(e,t,n){e.exports=n.p+"img/video-player/yay-49f869a60a1f56f41b4ba629ae1c052e.png"},987:function(e,t,n){e.exports=n.p+"img/illustrations/drag-and-drop-overlay-7c8d1827bb78d8f62483ce6235ec8d02.svg"},988:function(e,t,n){!function(t,n){e.exports=function(){"use strict";var e=["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"],t=["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"],n=["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"],o=["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmuliscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mpspace","msqrt","mystyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"],r=["#text"],a=["accept","action","align","alt","autocomplete","background","bgcolor","border","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","coords","crossorigin","datetime","default","dir","disabled","download","enctype","face","for","headers","height","hidden","high","href","hreflang","id","integrity","ismap","label","lang","list","loop","low","max","maxlength","media","method","min","multiple","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","type","usemap","valign","value","width","xmlns"],i=["accent-height","accumulate","additivive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"],s=["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"],c=["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"];function l(e,t){for(var n=t.length;n--;)"string"==typeof t[n]&&(t[n]=t[n].toLowerCase()),e[t[n]]=!0;return e}function u(e){var t={},n=void 0;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}var d=/\{\{[\s\S]*|[\s\S]*\}\}/gm,m=/<%[\s\S]*|[\s\S]*%>/gm,p=/^data-[\-\w.\u00B7-\uFFFF]/,h=/^aria-[\-\w]+$/,f=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,v=/^(?:\w+script|data):/i,g=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var y=function(){return"undefined"==typeof window?null:window};return function w(){var C=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();var E=function(e){return w(e)};E.version="1.0.8";E.removed=[];if(!C||!C.document||9!==C.document.nodeType)return E.isSupported=!1,E;var k=C.document;var T=!1;var N=!1;var S=C.document;var O=C.DocumentFragment,j=C.HTMLTemplateElement,M=C.Node,x=C.NodeFilter,I=C.NamedNodeMap,A=void 0===I?C.NamedNodeMap||C.MozNamedAttrMap:I,L=C.Text,D=C.Comment,R=C.DOMParser;if("function"==typeof j){var U=S.createElement("template");U.content&&U.content.ownerDocument&&(S=U.content.ownerDocument)}var F=S,P=F.implementation,H=F.createNodeIterator,B=F.getElementsByTagName,V=F.createDocumentFragment;var z=k.importNode;var W={};E.isSupported=P&&void 0!==P.createHTMLDocument&&9!==S.documentMode;var G=d,q=m,K=p,J=h,Y=v,Q=g;var X=f;var Z=null;var $=l({},[].concat(_(e),_(t),_(n),_(o),_(r)));var ee=null;var te=l({},[].concat(_(a),_(i),_(s),_(c)));var ne=null;var oe=null;var re=!0;var ae=!0;var ie=!1;var se=!1;var ce=!1;var le=!1;var ue=!1;var de=!1;var me=!1;var pe=!1;var he=!1;var fe=!0;var ve=!0;var ge=!1;var be={};var _e=l({},["audio","head","math","script","style","template","svg","video"]);var ye=l({},["audio","video","img","source","image"]);var we=l({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]);var Ce=null;var Ee=S.createElement("form");var ke=function(d){"object"!==(void 0===d?"undefined":b(d))&&(d={}),Z="ALLOWED_TAGS"in d?l({},d.ALLOWED_TAGS):$,ee="ALLOWED_ATTR"in d?l({},d.ALLOWED_ATTR):te,ne="FORBID_TAGS"in d?l({},d.FORBID_TAGS):{},oe="FORBID_ATTR"in d?l({},d.FORBID_ATTR):{},be="USE_PROFILES"in d&&d.USE_PROFILES,re=!1!==d.ALLOW_ARIA_ATTR,ae=!1!==d.ALLOW_DATA_ATTR,ie=d.ALLOW_UNKNOWN_PROTOCOLS||!1,se=d.SAFE_FOR_JQUERY||!1,ce=d.SAFE_FOR_TEMPLATES||!1,le=d.WHOLE_DOCUMENT||!1,me=d.RETURN_DOM||!1,pe=d.RETURN_DOM_FRAGMENT||!1,he=d.RETURN_DOM_IMPORT||!1,de=d.FORCE_BODY||!1,fe=!1!==d.SANITIZE_DOM,ve=!1!==d.KEEP_CONTENT,ge=d.IN_PLACE||!1,X=d.ALLOWED_URI_REGEXP||X,ce&&(ae=!1),pe&&(me=!0),be&&(Z=l({},[].concat(_(r))),ee=[],!0===be.html&&(l(Z,e),l(ee,a)),!0===be.svg&&(l(Z,t),l(ee,i),l(ee,c)),!0===be.svgFilters&&(l(Z,n),l(ee,i),l(ee,c)),!0===be.mathMl&&(l(Z,o),l(ee,s),l(ee,c))),d.ADD_TAGS&&(Z===$&&(Z=u(Z)),l(Z,d.ADD_TAGS)),d.ADD_ATTR&&(ee===te&&(ee=u(ee)),l(ee,d.ADD_ATTR)),d.ADD_URI_SAFE_ATTR&&l(we,d.ADD_URI_SAFE_ATTR),ve&&(Z["#text"]=!0),le&&l(Z,["html","head","body"]),Z.table&&l(Z,["tbody"]),Object&&"freeze"in Object&&Object.freeze(d),Ce=d};var Te=function(e){E.removed.push({element:e});try{e.parentNode.removeChild(e)}catch(t){e.outerHTML=""}};var Ne=function(e,t){try{E.removed.push({attribute:t.getAttributeNode(e),from:t})}catch(e){E.removed.push({attribute:null,from:t})}t.removeAttribute(e)};var Se=function(e){var t=void 0;if(de&&(e="<remove></remove>"+e),T)try{t=(new R).parseFromString(e,"text/html")}catch(e){}if(N&&l(ne,["title"]),!t||!t.documentElement){var n=t=P.createHTMLDocument(""),o=n.body;o.parentNode.removeChild(o.parentNode.firstElementChild),o.outerHTML=e}return B.call(t,le?"html":"body")[0]};E.isSupported&&(function(){try{var e=Se('<svg><p><style><img src="</style><img src=x onerror=alert(1)//">');e.querySelector("svg img")&&(T=!0)}catch(e){}}(),function(){try{var e=Se("<x/><title>&lt;/title&gt;&lt;img&gt;");e.querySelector("title").textContent.match(/<\/title/)&&(N=!0)}catch(e){}}());var Oe=function(e){return H.call(e.ownerDocument||e,e,x.SHOW_ELEMENT|x.SHOW_COMMENT|x.SHOW_TEXT,function(){return x.FILTER_ACCEPT},!1)};var je=function(e){return"object"===(void 0===M?"undefined":b(M))?e instanceof M:e&&"object"===(void 0===e?"undefined":b(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName};var Me=function(e,t,n){W[e]&&W[e].forEach(function(e){e.call(E,t,n,Ce)})};var xe=function(e){var t=void 0;if(Me("beforeSanitizeElements",e,null),function(e){if(e instanceof L||e instanceof D)return!1;if("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof A)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute)return!0;return!1}(e))return Te(e),!0;var n=e.nodeName.toLowerCase();if(Me("uponSanitizeElement",e,{tagName:n,allowedTags:Z}),!Z[n]||ne[n]){if(ve&&!_e[n]&&"function"==typeof e.insertAdjacentHTML)try{e.insertAdjacentHTML("AfterEnd",e.innerHTML)}catch(e){}return Te(e),!0}return!se||e.firstElementChild||e.content&&e.content.firstElementChild||!/</g.test(e.textContent)||(E.removed.push({element:e.cloneNode()}),e.innerHTML?e.innerHTML=e.innerHTML.replace(/</g,"&lt;"):e.innerHTML=e.textContent.replace(/</g,"&lt;")),ce&&3===e.nodeType&&(t=(t=(t=e.textContent).replace(G," ")).replace(q," "),e.textContent!==t&&(E.removed.push({element:e.cloneNode()}),e.textContent=t)),Me("afterSanitizeElements",e,null),!1};var Ie=function(e,t,n){if(fe&&("id"===t||"name"===t)&&(n in S||n in Ee))return!1;if(ce&&(n=(n=n.replace(G," ")).replace(q," ")),ae&&K.test(t));else if(re&&J.test(t));else{if(!ee[t]||oe[t])return!1;if(we[t]);else if(X.test(n.replace(Q,"")));else if("src"!==t&&"xlink:href"!==t||"script"===e||0!==n.indexOf("data:")||!ye[e]){if(ie&&!Y.test(n.replace(Q,"")));else if(n)return!1}else;}return!0};var Ae=function(e){var t=void 0,n=void 0,o=void 0,r=void 0,a=void 0;Me("beforeSanitizeAttributes",e,null);var i=e.attributes;if(i){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ee};for(a=i.length;a--;){var c=t=i[a],l=c.name,u=c.namespaceURI;if(n=t.value.trim(),o=l.toLowerCase(),s.attrName=o,s.attrValue=n,s.keepAttr=!0,Me("uponSanitizeAttribute",e,s),n=s.attrValue,"name"===o&&"IMG"===e.nodeName&&i.id)r=i.id,i=Array.prototype.slice.apply(i),Ne("id",e),Ne(l,e),i.indexOf(r)>a&&e.setAttribute("id",r.value);else{if("INPUT"===e.nodeName&&"type"===o&&"file"===n&&(ee[o]||!oe[o]))continue;"id"===l&&e.setAttribute(l,""),Ne(l,e)}if(s.keepAttr){var d=e.nodeName.toLowerCase();if(Ie(d,o,n))try{u?e.setAttributeNS(u,l,n):e.setAttribute(l,n),E.removed.pop()}catch(e){}}}Me("afterSanitizeAttributes",e,null)}};var Le=function e(t){var n=void 0,o=Oe(t);for(Me("beforeSanitizeShadowDOM",t,null);n=o.nextNode();)Me("uponSanitizeShadowNode",n,null),xe(n)||(n.content instanceof O&&e(n.content),Ae(n));Me("afterSanitizeShadowDOM",t,null)};E.sanitize=function(e,t){var n=void 0,o=void 0,r=void 0,a=void 0,i=void 0;if(e||(e="\x3c!--\x3e"),"string"!=typeof e&&!je(e)){if("function"!=typeof e.toString)throw new TypeError("toString is not a function");if("string"!=typeof(e=e.toString()))throw new TypeError("dirty is not a string, aborting")}if(!E.isSupported){if("object"===b(C.toStaticHTML)||"function"==typeof C.toStaticHTML){if("string"==typeof e)return C.toStaticHTML(e);if(je(e))return C.toStaticHTML(e.outerHTML)}return e}if(ue||ke(t),E.removed=[],ge);else if(e instanceof M)n=Se("\x3c!--\x3e"),1===(o=n.ownerDocument.importNode(e,!0)).nodeType&&"BODY"===o.nodeName?n=o:n.appendChild(o);else{if(!me&&!le&&-1===e.indexOf("<"))return e;if(!(n=Se(e)))return me?null:""}n&&de&&Te(n.firstChild);for(var s=Oe(ge?e:n);r=s.nextNode();)3===r.nodeType&&r===a||xe(r)||(r.content instanceof O&&Le(r.content),Ae(r),a=r);if(ge)return e;if(me){if(pe)for(i=V.call(n.ownerDocument);n.firstChild;)i.appendChild(n.firstChild);else i=n;return he&&(i=z.call(k,i,!0)),i}return le?n.outerHTML:n.innerHTML};E.setConfig=function(e){ke(e),ue=!0};E.clearConfig=function(){Ce=null,ue=!1};E.isValidAttribute=function(e,t,n){Ce||ke({});var o=e.toLowerCase(),r=t.toLowerCase();return Ie(o,r,n)};E.addHook=function(e,t){"function"==typeof t&&(W[e]=W[e]||[],W[e].push(t))};E.removeHook=function(e){W[e]&&W[e].pop()};E.removeHooks=function(e){W[e]&&(W[e]=[])};E.removeAllHooks=function(){W={}};return E}()}()}()},989:function(e,t,n){e.exports=n.p+"img/icons/new/dropdown-rp-3eca19d714361a078f948c3914c4e26f.png"},99:function(e,t,n){e.exports=n.p+"img/video-player/yay@3x-e00d4f8156d202e4bea6a5d3811db794.png"},990:function(e,t,n){e.exports=n.p+"img/icons/new/dropdown-a2ce7234860ae43e3a61899beb6659f3.png"},991:function(e,t,n){e.exports=n.p+"img/icons/new/rounded-corner-5b218b7f93cee2b29a1b94fd523005b0.svg"},992:function(e,t,n){e.exports=n.p+"img/icons/new/slightly-rounded-corner-e2124ca04ad723b34a85e67ee41a8e2b.svg"},993:function(e,t,n){e.exports=n.p+"img/icons/new/square-corner-135115790c7aafa3b0e51de2f8790fff.svg"},994:function(e,t,n){e.exports=n.p+"img/illustrations/drag-and-drop-b2644e5022e7fee8520b62c29d9ba393.svg"},995:function(e,t,n){e.exports=n.p+"img/placeholder-black-a910762c4552cca237f7baec359ffa69.svg"},996:function(e,t,n){e.exports=n.p+"img/onboarding/first-video-c0803698b766b63b16bc14a9bb445f74.svg"},997:function(e,t,n){e.exports=n.p+"img/checkmark-bb408d2deddc80796d3bf194867d9e03.svg"},998:function(e,t,n){e.exports=n.p+"img/icons/close-white-c656332d91768e09235647c76f0cb759.svg"},999:function(e,t,n){e.exports=n.p+"img/icons/locked-992fa912e9621e564dab102f1098480d.svg"}});
//# sourceMappingURL=share-video-d37f3a2eb9cca6d054f56260bea9037d.js.map