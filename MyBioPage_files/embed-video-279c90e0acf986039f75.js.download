!function(e){function t(t){for(var r,i,s=t[0],u=t[1],c=t[2],d=0,p=[];d<s.length;d++)i=s[d],o[i]&&p.push(o[i][0]),o[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(l&&l(t);p.length;)p.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==o[u]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={7:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="https://cdn.useloom.com/assets/";var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var l=u;a.push([1820,1,0]),n()}({145:function(e,t,n){e.exports=n.p+"img/use-cases/consulting-1fa9d39226f7fc18b2d90874d64b92d6.svg"},146:function(e,t,n){e.exports=n.p+"img/use-cases/customer-success-ac18218707eee3c9acfd7007bcbfa24b.svg"},147:function(e,t,n){e.exports=n.p+"img/use-cases/education-861133941a92fb04ecf4c6e94f848b69.svg"},148:function(e,t,n){e.exports=n.p+"img/use-cases/engineering-b70db08484b26acc47dc9d9a2511337f.svg"},149:function(e,t,n){e.exports=n.p+"img/use-cases/leadership-b540982c896b34734be082f644d556e6.svg"},150:function(e,t,n){e.exports=n.p+"img/use-cases/marketing-8278f0c340b78ec1bc8b2d2745c133c4.svg"},151:function(e,t,n){e.exports=n.p+"img/use-cases/product-36dc43df1ecd3c7631559b9c0bb66f50.svg"},152:function(e,t,n){e.exports=n.p+"img/use-cases/personal-70a77c3cda3495c4d0246a07a30af34e.svg"},153:function(e,t,n){e.exports=n.p+"img/use-cases/sales-43044e13c1290e173712abb528947d4f.svg"},156:function(e,t,n){},157:function(e,t,n){e.exports=n.p+"img/icons/avatar-placeholder-d5f94766773cea3a9b8f6c549ef9f535.svg"},171:function(e,t,n){},172:function(e,t,n){var r={"./down.png":82,"./down@2x.png":83,"./down@3x.png":84,"./gradient.png":85,"./joy.png":86,"./joy@2x.png":72,"./joy@3x.png":87,"./love.png":88,"./love@2x.png":69,"./love@3x.png":89,"./nervous.png":90,"./nervous@2x.png":91,"./nervous@3x.png":92,"./up.png":93,"./up@2x.png":94,"./up@3x.png":95,"./wow.png":96,"./wow@2x.png":73,"./wow@3x.png":97,"./yay.png":98,"./yay@2x.png":74,"./yay@3x.png":99};function o(e){var t=a(e);return n(t)}function a(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=172},1820:function(e,t,n){n(133),n(2166),e.exports=n(135)},1821:function(e,t,n){},1822:function(e,t,n){},1823:function(e,t,n){},1824:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.prefixMap,n=e.plugins;return function e(s){for(var u in s){var c=s[u];if((0,i.default)(c))s[u]=e(c);else if(Array.isArray(c)){for(var l=[],d=0,p=c.length;d<p;++d){var m=(0,o.default)(n,u,c[d],s,t);(0,a.default)(l,m||c[d])}l.length>0&&(s[u]=l)}else{var f=(0,o.default)(n,u,c,s,t);f&&(s[u]=f),s=(0,r.default)(t,u,s)}}return s}};var r=s(n(1825)),o=s(n(1826)),a=s(n(1827)),i=s(n(1828));function s(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},1825:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(e.hasOwnProperty(t)){for(var o={},a=e[t],i=(0,r.default)(t),s=Object.keys(n),u=0;u<s.length;u++){var c=s[u];if(c===t)for(var l=0;l<a.length;l++)o[a[l]+i]=n[t];o[c]=n[c]}return o}return n};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(878));e.exports=t.default},1826:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,o){for(var a=0,i=e.length;a<i;++a){var s=e[a](t,n,r,o);if(s)return s}},e.exports=t.default},1827:function(e,t,n){"use strict";function r(e,t){-1===e.indexOf(t)&&e.push(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(Array.isArray(t))for(var n=0,o=t.length;n<o;++n)r(e,t[n]);else r(e,t)},e.exports=t.default},1828:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e instanceof Object&&!Array.isArray(e)},e.exports=t.default},1829:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["Webkit"],o=["ms"],a=["Webkit","ms"];t.default={plugins:[],prefixMap:{appearance:["Webkit","Moz"],textEmphasisPosition:r,textEmphasis:r,textEmphasisStyle:r,textEmphasisColor:r,boxDecorationBreak:r,maskImage:r,maskMode:r,maskRepeat:r,maskPosition:r,maskClip:r,maskOrigin:r,maskSize:r,maskComposite:r,mask:r,maskBorderSource:r,maskBorderMode:r,maskBorderSlice:r,maskBorderWidth:r,maskBorderOutset:r,maskBorderRepeat:r,maskBorder:r,maskType:r,textDecorationStyle:r,textDecorationSkip:r,textDecorationLine:r,textDecorationColor:r,userSelect:["Webkit","Moz","ms"],backdropFilter:r,fontKerning:r,scrollSnapType:a,scrollSnapPointsX:a,scrollSnapPointsY:a,scrollSnapDestination:a,scrollSnapCoordinate:a,clipPath:r,shapeImageThreshold:r,shapeImageMargin:r,shapeImageOutside:r,filter:r,hyphens:a,flowInto:a,flowFrom:a,breakBefore:a,breakAfter:a,breakInside:a,regionFragment:a,writingMode:a,textOrientation:r,tabSize:["Moz"],fontFeatureSettings:r,columnCount:r,columnFill:r,columnGap:r,columnRule:r,columnRuleColor:r,columnRuleStyle:r,columnRuleWidth:r,columns:r,columnSpan:r,columnWidth:r,wrapFlow:o,wrapThrough:o,wrapMargin:o,gridTemplateColumns:o,gridTemplateRows:o,gridTemplateAreas:o,gridTemplate:o,gridAutoColumns:o,gridAutoRows:o,gridAutoFlow:o,grid:o,gridRowStart:o,gridColumnStart:o,gridRowEnd:o,gridRow:o,gridColumn:o,gridColumnEnd:o,gridColumnGap:o,gridRowGap:o,gridArea:o,gridGap:o,textSizeAdjust:a}},e.exports=t.default},1830:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("cursor"===e&&o.hasOwnProperty(t))return r.map(function(e){return e+t})};var r=["-webkit-","-moz-",""],o={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};e.exports=t.default},1831:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,r.default)(t)&&t.indexOf("cross-fade(")>-1)return o.map(function(e){return t.replace(/cross-fade\(/g,e+"cross-fade(")})};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(427));var o=["-webkit-",""];e.exports=t.default},1832:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,r.default)(t)&&t.indexOf("filter(")>-1)return o.map(function(e){return t.replace(/filter\(/g,e+"filter(")})};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(427));var o=["-webkit-",""];e.exports=t.default},1833:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("display"===e&&r.hasOwnProperty(t))return r[t]};var r={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};e.exports=t.default},1834:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){"flexDirection"===e&&"string"==typeof t&&(t.indexOf("column")>-1?n.WebkitBoxOrient="vertical":n.WebkitBoxOrient="horizontal",t.indexOf("reverse")>-1?n.WebkitBoxDirection="reverse":n.WebkitBoxDirection="normal");o.hasOwnProperty(e)&&(n[o[e]]=r[t]||t)};var r={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple",flex:"box","inline-flex":"inline-box"},o={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines",flexGrow:"WebkitBoxFlex"};e.exports=t.default},1835:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,r.default)(t)&&a.test(t))return o.map(function(e){return t.replace(a,function(t){return e+t})})};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(427));var o=["-webkit-","-moz-",""],a=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/gi;e.exports=t.default},1836:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,r.default)(t)&&t.indexOf("image-set(")>-1)return o.map(function(e){return t.replace(/image-set\(/g,e+"image-set(")})};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(427));var o=["-webkit-",""];e.exports=t.default},1837:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("position"===e&&"sticky"===t)return["-webkit-sticky","sticky"]},e.exports=t.default},1838:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(o.hasOwnProperty(e)&&a.hasOwnProperty(t))return r.map(function(e){return e+t})};var r=["-webkit-","-moz-",""],o={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},a={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};e.exports=t.default},1839:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i){if("string"==typeof t&&s.hasOwnProperty(e)){var c=function(e,t){if((0,o.default)(e))return e;for(var n=e.split(/,(?![^()]*(?:\([^()]*\))?\))/g),a=0,i=n.length;a<i;++a){var s=n[a],c=[s];for(var l in t){var d=(0,r.default)(l);if(s.indexOf(d)>-1&&"order"!==d)for(var p=t[l],m=0,f=p.length;m<f;++m)c.unshift(s.replace(d,u[p[m]]+d))}n[a]=c.join(",")}return n.join(",")}(t,i),l=c.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(e){return!/-moz-|-ms-/.test(e)}).join(",");if(e.indexOf("Webkit")>-1)return l;var d=c.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(e){return!/-webkit-|-ms-/.test(e)}).join(",");return e.indexOf("Moz")>-1?d:(n["Webkit"+(0,a.default)(e)]=l,n["Moz"+(0,a.default)(e)]=d,c)}};var r=i(n(1840)),o=i(n(427)),a=i(n(878));function i(e){return e&&e.__esModule?e:{default:e}}var s={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},u={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};e.exports=t.default},1840:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.default)(e)};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(1841));e.exports=t.default},1841:function(e,t,n){"use strict";var r=/[A-Z]/g,o=/^ms-/,a={};e.exports=function(e){return e in a?a[e]:a[e]=e.replace(r,"-$&").toLowerCase().replace(o,"-ms-")}},1842:function(e,t,n){},1843:function(e,t,n){},1844:function(e,t,n){},1845:function(e,t,n){},1846:function(e,t,n){},1847:function(e,t,n){},1848:function(e,t,n){},1849:function(e,t,n){},1850:function(e,t,n){},1851:function(e,t,n){},1852:function(e,t,n){},1853:function(e,t,n){},1854:function(e,t,n){},1855:function(e,t,n){},1856:function(e,t,n){},1857:function(e,t,n){},1858:function(e,t,n){},1859:function(e,t,n){},1860:function(e,t,n){},1861:function(e,t,n){},1862:function(e,t,n){},1863:function(e,t,n){},1864:function(e,t,n){},1865:function(e,t,n){e.exports=n.p+"img/video-player/luna-head-e7402004716fa3eaccfb2ebdd0e8877d.svg"},1866:function(e,t,n){e.exports=n.p+"img/video-player/luna-body-63fa23ddfce161c56a483deef3e40f98.svg"},1867:function(e,t,n){},1868:function(e,t,n){},1869:function(e,t,n){},1870:function(e,t,n){},1871:function(e,t,n){},200:function(e,t,n){e.exports=n.p+"img/icons/comments-avatar-placeholder-ad20a7c4f0d515a74b4147a61bf5f43f.svg"},2166:function(e,t,n){"use strict";n.r(t);n(124);var r=n(28),o=n.n(r),a=n(0),i=n.n(a),s=n(55),u=n(10),c=n(62),l=n.n(c),d=n(34),p=n(59),m=n(16),f=n(14),h=n(38),v=n(125),g=n(63),y=n(17),b=n(19),w=n(64),k=n(29),P=n(65),_=(n(225),n(397),n(4)),E=n.n(_),M=n(5),C=n.n(M),T=n(6),x=n.n(T),O=n(7),j=n.n(O),S=n(8),V=n.n(S),R=n(35),L=n(47),N=n(53),U=n(36),D=(n(111),n(112),n(1)),q=n.n(D),W=n(2),B=n.n(W),A=n(44),I=n.n(A),F=n(222),z=n(254),H=n(118),X=n(79),K=n(128),G=n(200),Q=n.n(G),J=(n(1821),function(e){function t(){return E()(this,t),x()(this,j()(t).apply(this,arguments))}return V()(t,e),C()(t,[{key:"render",value:function(){var e=this.props,t=e.fullScreen,n=e.onClick;return i.a.createElement("div",{onClick:n,className:"video-player-fullscreen-button"},i.a.createElement("span",{className:t?"exit-fullscreen":"enter-fullscreen"}))}}]),t}(a.Component)),Y=(n(1822),function(e){function t(){return E()(this,t),x()(this,j()(t).apply(this,arguments))}return V()(t,e),C()(t,[{key:"render",value:function(){var e=this.props,t=e.paused,n=e.onClick;return i.a.createElement("div",{onClick:n,className:"video-player-play-button"},i.a.createElement("span",{className:t?"pause":"play"}))}}]),t}(a.Component)),$=(n(276),n(11)),Z=n.n($),ee=n(22),te=n.n(ee),ne=(n(1823),{onRateChange:te.a.func}),re=[2,1.5,1],oe=re.slice().sort(),ae=function(e){function t(e){var n;return E()(this,t),(n=x()(this,j()(t).call(this,e))).onRateToggle=n.onRateToggle.bind(q()(q()(n))),n.onRateChange=n.onRateChange.bind(q()(q()(n))),n}return V()(t,e),C()(t,[{key:"render",value:function(){var e=this,t=this.props.playbackRate,n=re.map(function(n,r){return i.a.createElement("li",{className:n===t?"active":"",key:r,onClick:function(){return e.onRateChange(n)}},"".concat(n,"x"))});return i.a.createElement("div",{className:"video-player-playback-rate-control"},i.a.createElement("ul",{className:"rate-menu"},n),i.a.createElement("span",{onClick:this.onRateToggle,className:"current-rate"},"".concat(t,"x")))}},{key:"onRateChange",value:function(e){this.props.onRateChange&&this.props.onRateChange(e)}},{key:"onRateToggle",value:function(){var e=this.props.playbackRate,t=Z.a.indexOf(oe,e);if(-1!==t){var n=t+1;n>=oe.length&&(n=0),this.onRateChange(oe[n])}}}]),t}(a.Component);ae.propTypes=ne;var ie=ae,se=n(255),ue=n.n(se),ce=(n(1842),function(e){function t(){var e,n;E()(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=x()(this,(e=j()(t)).call.apply(e,[this].concat(o))),B()(q()(q()(n)),"parent",null),B()(q()(q()(n)),"tooltip",null),B()(q()(q()(n)),"state",{dimensions_cached:!1,half_tooltip_width:null,tooltip_width:null}),B()(q()(q()(n)),"onClick",function(e){e.stopPropagation();var t=n.props,r=t.currentTime,o=t.duration,a=t.trimRanges,i=Object(K.c)(1e3*r,1e3*o,a);n.props.requestVideoPlayerPause(),n.props.updateCurrentTrimRangeCreator(i)}),n}return V()(t,e),C()(t,[{key:"render",value:function(){var e=this,t=this.getTooltipPosition(),n={};return""!==t&&(n.transform="translateX(".concat(t,"px)"),n=ue()(n)),i.a.createElement("div",{className:this.constructor.className,ref:function(t){null!=t&&(e.tooltip=t,e.parent=t.parentNode)},style:n,onMouseDown:this.preventPropagation,onMouseMove:this.preventPropagation,onMouseUp:this.preventPropagation},i.a.createElement("div",{className:"add-trim-range-tooltip",onClick:this.onClick},i.a.createElement("p",null,"Start trimming")))}},{key:"componentMountedToParent",value:function(e){return e&&null!=this.parent}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.currentTime!==e.currentTime&&this.componentMountedToParent(t.dimensions_cached)||!this.state.dimensions_cached&&t.dimensions_cached}},{key:"componentDidMount",value:function(){if(null!=this.tooltip){var e=this.tooltip.getBoundingClientRect().width;this.setState({dimensions_cached:!0,half_tooltip_width:e/2,tooltip_width:e})}}},{key:"preventPropagation",value:function(e){e.stopPropagation()}},{key:"getTooltipPosition",value:function(){if(!this.componentMountedToParent(this.state.dimensions_cached))return"";var e=this.state,t=e.half_tooltip_width,n=e.tooltip_width,r=this.props.getPercent(),o=this.parent.getBoundingClientRect().width,a=o*r+3.5-t;return a=Math.max(a,0),a=Math.min(a,o-n+3.5)}}]),t}(a.Component));B()(ce,"className","video-player-add-trim-range-tooltip-container");var le=Object(u.connect)(function(e){var t=e.trimming,n=t.current_trim_range,r=t.trim_ranges,o=e.video_player,a=o.duration;return{currentTime:o.current_time,currentTrimRange:n,duration:a,trimRanges:r}},function(e){return{requestVideoPlayerPause:function(){return e(Object(d.f)())},updateCurrentTrimRangeCreator:function(t){return e(Object(N.i)(t))}}})(ce);function de(e,t){return"".concat(pe(e,t),"%")}function pe(e,t){var n=e/t||0;return 100*(n>=1?1:n)}n(1843);var me=function(e){function t(){return E()(this,t),x()(this,j()(t).apply(this,arguments))}return V()(t,e),C()(t,[{key:"render",value:function(){var e=this.props,t=e.commentMarkers,n=e.duration,r=t.map(function(e,t){var r={left:de(e.time,n)};return i.a.createElement("span",{key:t,className:"comment-marker",style:r})});return i.a.createElement("div",{className:"video-player-comment-bar",onMouseMove:this.props.onMouseMove,onMouseOut:this.props.onMouseOut},r)}}]),t}(a.Component),fe=Object(u.connect)(function(e){return{commentMarkers:e.video_player.comment_markers}})(me),he=(n(81),n(134),n(305),n(163)),ve=n(314),ge=(n(1844),function(e){function t(){var e,n;E()(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=x()(this,(e=j()(t)).call.apply(e,[this].concat(o))),B()(q()(q()(n)),"container",{clientWidth:0}),n}return V()(t,e),C()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.show,r=t.hideReaction,o=t.onMouseOver,a=t.onMouseOut,s=t.time,u=t.duration,c=ue()({transform:"translateX(".concat(this.calculateBarLeft(),"px)")}),l=ue()({transform:"translateX(".concat(this.calculateArrowOffset(),"px)")});return i.a.createElement("div",{ref:function(t){return e.container=t},className:"emoji-bar-container ".concat(n?"show":""),onMouseDown:function(e){return e.stopPropagation()},onMouseOver:o,onMouseOut:a,style:c},i.a.createElement("div",{className:"emoji-bar"},i.a.createElement("svg",{className:"emoji-bar-triangle",width:"8",height:"8",style:l,viewBox:"0 0 100 100",onMouseOver:o,onMouseOut:a},i.a.createElement("polygon",{points:"0,0 100,0 50,75"})),Object.values(he.e).filter(function(e){return e!==he.d}).map(function(t){return i.a.createElement(ve.a,{key:t,duration:u,time:parseInt(s),show:r!=t,type:t,onClick:e.props.onClickEmoji})})))}},{key:"componentDidMount",value:function(){var e=this;try{window.top.addEventListener("message",function(t){if(t.data.type===R.a){var n=e.props,r=n.currentVideoTime,o=n.slider,a=n.duration,i=o?r/a*o.clientWidth:0;e.props.onClickEmoji({type:t.data.reaction.type,time:1e3*r,rect:{x:i}})}},!1)}catch(e){}}},{key:"calculateBarLeft",value:function(){var e=this.props,t=e.time,n=e.slider,r=t/(1e3*e.duration),o=this.container.clientWidth/2-12,a=this.props.containerDimensions.width-this.container.clientWidth/2+12;return n?Math.min(a,Math.max(o,r*n.clientWidth)):o}},{key:"calculateArrowOffset",value:function(){var e=this.props,t=e.duration,n=e.slider,r=e.time;return n?r/(1e3*t)*n.clientWidth-this.calculateBarLeft():0}}]),t}(a.Component));ge.propTypes={show:te.a.bool,hideReaction:te.a.string,onMouseOver:te.a.func,onMouseOut:te.a.func,onClickEmoji:te.a.func};var ye=Object(u.connect)(function(e){var t=e.video_player;return{time:t.show_emoji_bar_at,currentVideoTime:t.current_time}},function(e){return{onClickEmoji:function(t){return e(Object(v.b)(t))}}})(ge),be=n(9),we=n.n(be),ke=n(137),Pe=n(15),_e=n.n(Pe),Ee=(n(106),n(54),n(26)),Me=n.n(Ee),Ce=n(130),Te=n.n(Ce),xe=(n(1845),{type:te.a.oneOf(Object.values(he.e)).isRequired,forceShow:te.a.bool.isRequired}),Oe=function(e){function t(){var e,n;E()(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=x()(this,(e=j()(t)).call.apply(e,[this].concat(o))),B()(q()(q()(n)),"videoPlayerWidth",0),B()(q()(q()(n)),"onMouseDown",function(e){e.stopPropagation(),e.preventDefault()}),B()(q()(q()(n)),"onClick",function(e){var t=e.event,r=n.props,o=r.id,a=r.type,i=r.time;t.stopPropagation(),t.preventDefault(),n.props.onClick({id:o,type:a,time:i})}),B()(q()(q()(n)),"onClickDelete",function(e){var t=n.props,r=t.id,o=t.type,a=t.time;e.stopPropagation(),e.preventDefault(),n.props.onClickDelete({id:r,type:o,time:a})}),B()(q()(q()(n)),"_updateTooltipPosition",function(){var e=Me()(_e.a.mark(function e(t){var r,o,a;return _e.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,new Promise(function(e){return setTimeout(e,1200)});case 4:if(r=t.getBoundingClientRect(),(o=n.videoPlayerWidth<r.right)||!(r.left>=0)){e.next=8;break}return e.abrupt("return");case 8:a="translateX(-50%) translateX(".concat(-1*r.left,"px)"),o&&(a="translateX(-50%) translateX(-".concat(r.right-n.videoPlayerWidth,"px)")),["transform","-webkit-transform"].forEach(function(e){return t.style[e]=a});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),n}return V()(t,e),C()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.type,r=t.username,o=t.showDelete;this._updateOffset();var a={left:"".concat(Math.round(this._offset),"px")};return i.a.createElement("div",{ref:function(t){return e.container=t},className:"video-player-timeline-emoji",style:a},i.a.createElement(ve.a,{type:n,onClick:this.onClick,onMouseDown:this.onMouseDown}),i.a.createElement("div",{ref:this._updateTooltipPosition,onMouseDown:this._stopPropagation,onClick:o?this.onClickDelete:void 0,className:"video-player-timeline-emoji-username ".concat(o?"can-delete":"")},r.length>18?"".concat(r.substr(0,18),"â€¦"):r))}},{key:"componentDidMount",value:function(){this.props.playSelectionAnimation?this._playSelectionAnimation():this._playBounceAnimation(),this.inputElement&&this.inputElement.focus(),this.videoPlayerWidth=document.querySelector(".video-player-container").offsetWidth}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){!this.props.forceShow&&e.forceShow&&this._playAnimation("forceFadeIn"),this.props.forceShow&&!e.forceShow&&this._playAnimation("forceFadeOut"),!this.props.playSelectionAnimation&&e.playSelectionAnimation&&this._playSelectionAnimation()}},{key:"_stopPropagation",value:function(e){e.stopPropagation()}},{key:"_updateOffset",value:function(){var e=this.props,t=e.time,n=e.duration,r=e.containerDimensions;this._offset=t/n*r.width-14}},{key:"_playBounceAnimation",value:function(){var e=this,t=this.props.rise||0;this.bounceUp=Te()({targets:this.container.childNodes[0],translateY:{value:-5-t,duration:800,elasticity:600},scale:{value:[.55,.66],duration:300,easing:[0,2.06,.62,2.1]}});var n=1/Te.a.speed;this.delayedFadeout=window.setTimeout(function(){e.props.forceShow||e._playAnimation("bounceFadeOut")},n*(this.bounceUp.duration+1e3))}},{key:"_playAnimation",value:function(e){window.clearTimeout(this.delayedFadeout),this.currentAnimation&&this.currentAnimation.pause(),"bounceFadeOut"==e&&(this.currentAnimation=Te()({targets:this.container.childNodes[0],duration:400,opacity:0,easing:"linear"})),"forceFadeIn"==e&&(this.currentAnimation=Te()({targets:this.container.childNodes[0],duration:200,opacity:1,translateY:-5,scale:"+=0",easing:"linear"})),"forceFadeOut"==e&&(this.currentAnimation=Te()({targets:this.container.childNodes[0],duration:200,opacity:0,translateY:-5,scale:"+=0",easing:"linear"}))}},{key:"_playSelectionAnimation",value:function(){var e=this.props.rise||0,t=this.props.containerDimensions.width*(this.props.time/this.props.duration)-this._offset-14,n=this.props.selectionAnimationStartX-this._offset-this.props.containerDimensions.x;this.props.usingStaticEmojiBar&&this.props.selectionAnimationStartX>this.props.containerDimensions.width/2&&(n-=28);var r=this.container.childNodes[0];Te.a.timeline().add({targets:this.container,duration:1,zIndex:10}).add({targets:r,duration:300,easing:"easeOutQuad",translateX:[n,t],translateY:[-19-e,-19-e],rotate:[0,n<t?20:-20]}).add({targets:r,duration:288,easing:"easeOutQuad",translateX:"+=0",translateY:-5-e,scale:[1,.66],rotate:0}).add({targets:this.container,duration:1,zIndex:0})}}]),t}(a.Component);Oe.propTypes=xe;var je=Object(u.connect)(null,function(e){return{onClickDelete:function(t){return e(Object(v.c)(t))},onClick:function(t){return e(Object(v.a)(t))}}})(Oe),Se=(n(1846),function(e){function t(e){var n;E()(this,t),n=x()(this,j()(t).call(this,e));var r=0;try{r=window.top.document.getElementsByClassName("export-bar-emoji-bar-container")[0].clientWidth}catch(e){}return n.state={toolbarWidth:r},n}return V()(t,e),C()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.reactions,r=t.localReactions,o=t.animateReactions,a=t.controlBarExpanded,s=t.containerDimensions,u=t.selectedEmojiStartX,c=t.currentTime,l=t.duration,d=t.reactionName,p=t.trimRanges,m=void 0===p?[]:p,f=t.usingStaticEmojiBar,h=n.concat(r.map(function(e){return we()({},e,{can_delete:!!e.id,username:d||"anonymous",playSelectionAnimation:!0})})),v=1e3*c,g=h.map(function(t){var n=Object(K.a)(t.time,m);if(isNaN(n))return null;var r=0;if(e.state.toolbarWidth&&!a){var d=s.width,p=d/2-e.state.toolbarWidth/2,h=p+e.state.toolbarWidth,g=c/l*d;g>=p&&g<=h&&(r=10)}return(v>=n||a)&&i.a.createElement(je,{key:t.localId||t.id,id:t.id,selectionAnimationStartX:u,playSelectionAnimation:o.indexOf(t.localId)>-1,containerDimensions:s,rise:r,type:t.type,forceShow:a,time:n,username:t.username,showDelete:t.can_delete,duration:1e3*l,usingStaticEmojiBar:f})});return i.a.createElement("div",{className:"emoji-timeline",ref:function(t){return e.timeline=t}},i.a.createElement("div",{className:"emoji-timeline-actual"},g),i.a.createElement("div",{className:"emoji-timeline-decorative"},g))}}]),t}(i.a.Component)),Ve=Object(u.connect)(function(e){var t=e.user,n=t.is_logged_in,r=t.current.first_name,o=e.video_player.video.processing_information.trim_ranges;return{isLoggedIn:n,reactionName:r||Object(ke.a)(),trimRanges:o}})(Se),Re=(n(1847),function(e){function t(){return E()(this,t),x()(this,j()(t).apply(this,arguments))}return V()(t,e),C()(t,[{key:"render",value:function(){var e=this.props,t=e.bufferedParts,n=e.duration;if(0===t.length)return null;var r=t[t.length-1].end;r>n&&(r=n);var o={width:de(r,n)},a=Z.a.map(t,function(e,t){var n=e.start,o=e.end;return i.a.createElement("div",{className:"buffered-part",style:{left:de(n,r),width:de(o-n,r)},key:t})});return i.a.createElement("div",{className:"video-player-load-progress-bar",style:o},a)}}]),t}(a.Component)),Le=Object(u.connect)(function(e){return{bufferedParts:e.video_player.buffered_parts}})(Re),Ne=(n(1848),function(e){var t=e.onMouseMove,n=e.onMouseOut,r=e.progress,o=e.slider,a=e.sliderWidth;if(null==o)return null;var s=ue()({transform:"translateX(-".concat((1-r)*a,"px)")});return i.a.createElement("div",{className:"video-player-play-progress-bar-container",onMouseMove:t,onMouseOut:n},i.a.createElement("div",{className:"video-player-play-progress-bar",style:s}))}),Ue=(n(1849),{onScrubberOver:te.a.func,onScrubberMove:te.a.func,onScrubberOut:te.a.func}),De=function(e){function t(){return E()(this,t),x()(this,j()(t).apply(this,arguments))}return V()(t,e),C()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.controlBarExpanded,r=t.progress,o=t.slider,a=t.sliderWidth;if(!n||null==o)return null;var s=this.scrubber?this.scrubber.clientWidth:0,u=ue()({transform:"translateX(".concat(r*a-s/2,"px)")});return i.a.createElement("div",{className:"video-player-play-progress-scrubber-container",style:u},i.a.createElement("span",{ref:function(t){return e.scrubber=t},className:"video-player-play-progress-scrubber",onMouseOver:this.props.onScrubberOver,onMouseMove:this.props.onScrubberMove,onMouseOut:this.props.onScrubberOut}))}}]),t}(a.Component);De.propTypes=Ue;var qe=De,We=(n(1850),"left"),Be=function(e){function t(){var e,n;E()(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=x()(this,(e=j()(t)).call.apply(e,[this].concat(o))),B()(q()(q()(n)),"mouseLeaveTimeout",null),B()(q()(q()(n)),"state",{show_scrubber_time:!1}),B()(q()(q()(n)),"handleMouseDown",function(e){e.stopPropagation(),window.clearTimeout(n.mouseLeaveTimeout),document.addEventListener("mousemove",n.handleMouseMove,!0),document.addEventListener("mouseup",n.handleMouseUpWithoutUpdate,!0),n.props.onMouseDown()}),B()(q()(q()(n)),"handleMouseMove",function(e){document.addEventListener("mouseup",n.handleMouseUpWithUpdate,!0),document.removeEventListener("mouseup",n.handleMouseUpWithoutUpdate,!0),n.props.onUpdateTime(e,n.props.half)}),B()(q()(q()(n)),"handleMouseUpWithUpdate",function(e){n.handleMouseUp(e,!0)}),B()(q()(q()(n)),"handleMouseUpWithoutUpdate",function(e){n.handleMouseUp(e,!1)}),B()(q()(q()(n)),"handleTimeChange",function(e){n.props.onUpdateTime(null,n.props.half,e),n.onMouseLeave()}),B()(q()(q()(n)),"onMouseLeave",Me()(_e.a.mark(function e(){return _e.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.clearTimeout(n.mouseLeaveTimeout),e.next=3,new Promise(function(e){n.mouseLeaveTimeout=window.setTimeout(e,L.g)});case 3:if(!n.scrubber||null==n.scrubber.querySelector(":hover")){e.next=5;break}return e.abrupt("return");case 5:n.props.onMouseLeave(n.props.half);case 6:case"end":return e.stop()}},e,this)}))),B()(q()(q()(n)),"onMouseEnter",function(){n.props.onMouseEnter(n.props.half)}),B()(q()(q()(n)),"showScrubberTime",function(){n.setState({show_scrubber_time:n.props.expandScrubber})}),n}return V()(t,e),C()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.expandScrubber,r=t.half,o=t.visualHalf,a="";return n&&(a="expanded"),i.a.createElement("div",{className:"video-player-trim-flag ".concat(r," visual-").concat(o," ").concat(a),onMouseDown:this.handleMouseDown,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},i.a.createElement("div",{className:"flag-scrubber",ref:function(t){return e.scrubber=t},onTransitionEnd:this.showScrubberTime}),i.a.createElement("span",{className:"flag-pole"}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.expandScrubber!==this.props.expandScrubber&&window.clearTimeout(this.mouseLeaveTimeout)}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this.mouseLeaveTimeout)}},{key:"componentDidMount",value:function(){this.showScrubberTime()}},{key:"handleMouseUp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];document.removeEventListener("mousemove",this.handleMouseMove,!0),document.removeEventListener("mouseup",this.handleMouseUpWithUpdate,!0),document.removeEventListener("mouseup",this.handleMouseUpWithoutUpdate,!0),this.onMouseLeave(),t&&this.props.onUpdateTime(e,this.props.half)}}]),t}(a.Component),Ae=(n(1851),function(e){function t(){var e,n;E()(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=x()(this,(e=j()(t)).call.apply(e,[this].concat(o))),B()(q()(q()(n)),"boundingRange",Object(K.d)(n.props.currentTrimRange,n.props.trimRanges,1e3*n.props.duration)),B()(q()(q()(n)),"handleFlagMouseEnter",function(e){var t=e===We?L.h:L.i;n.props.updateSelectedTrimBoundCreator(t)}),B()(q()(q()(n)),"handleFlagMouseDown",function(){n.props.requestVideoPlayerPause()}),B()(q()(q()(n)),"handleFlagMouseLeave",function(e){var t=e===We?L.h:L.i;n.props.selectedTrimBound===t?n.props.updateSelectedTrimBoundCreator(null):n.props.updateSelectedTrimBoundCreator(t)}),B()(q()(q()(n)),"handleFlagUpdateTime",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=we()({},n.props.currentTrimRange),a=r;null!=e&&null==r&&(a=1e3*n.props.getNewTime(e));var i=t===We,s=Object(K.f)(a,o,n.boundingRange,i,L.d);i?o.from=s:o.to=s,n.props.updateCurrentTrimRangeCreator(o),n.props.requestVideoPlayerCurrentTime(s/1e3)}),n}return V()(t,e),C()(t,[{key:"render",value:function(){var e=this.props,t=e.currentTrimRange,n=e.duration,r=e.selectedTrimBound,o=e.slider,a=(t.to-t.from)/1e3/n,s=t.from/1e3/n*o.clientWidth+Math.round(2.5),u={transform:"translateX(".concat(s,"px)")},c=a*o.clientWidth-7+1,l={width:"".concat(c,"px")},d="right",p="right",m=o.getBoundingClientRect().left+s,f=m+c;m>f-26&&(d=We),f>window.innerWidth-26&&(p=We);var h=r===L.h,v=r===L.i;return i.a.createElement("div",{className:"video-player-trim-range-edit-bar",style:ue()(u)},i.a.createElement(Be,{visualHalf:d,half:We,time:t.from,boundingRange:this.boundingRange,currentTrimRange:t,expandScrubber:h,onClick:this.handleClick,onMouseEnter:this.handleFlagMouseEnter,onMouseLeave:this.handleFlagMouseLeave,onMouseDown:this.handleFlagMouseDown,onUpdateTime:this.handleFlagUpdateTime,updateSelectedTrimBoundCreator:N.j}),i.a.createElement("div",{style:l,className:this.constructor.gradientClassName}),i.a.createElement(Be,{visualHalf:p,half:"right",time:t.to,boundingRange:this.boundingRange,currentTrimRange:t,expandScrubber:v,onClick:this.handleClick,onMouseEnter:this.handleFlagMouseEnter,onMouseLeave:this.handleFlagMouseLeave,onMouseDown:this.handleFlagMouseDown,onUpdateTime:this.handleFlagUpdateTime,updateSelectedTrimBoundCreator:N.j}))}},{key:"handleClick",value:function(e){e.preventDefault()}}]),t}(a.Component));B()(Ae,"gradientClassName","trim-range-edit-gradient");var Ie=Object(u.connect)(function(e){var t=e.video_player.duration,n=e.trimming;return{currentTrimRange:n.current_trim_range,duration:t,selectedTrimBound:n.selected_trim_bound,trimRanges:n.trim_ranges}},function(e){return{requestVideoPlayerCurrentTime:function(t){return e(Object(d.b)(t))},requestVideoPlayerPause:function(){return e(Object(d.f)())},updateCurrentTrimRangeCreator:function(t){return e(Object(N.i)(t))},updateSelectedTrimBoundCreator:function(t){return e(Object(N.j)(t))}}})(Ae),Fe=n(102),ze=n.n(Fe),He=(n(1852),function(e){function t(){return E()(this,t),x()(this,j()(t).apply(this,arguments))}return V()(t,e),C()(t,[{key:"render",value:function(){var e=this.props,t=e.active,n=e.selected,r=e.style,o=t?"":"inactive",a=null;return n&&(a=i.a.createElement("div",{className:"edit-trim-range-tooltip-container",onClick:this.props.onEditClick},i.a.createElement("div",{className:"edit-trim-range-tooltip"},i.a.createElement("p",null,"Edit Trim")))),i.a.createElement("div",{className:"trim-range-marker-container",style:r},i.a.createElement("span",{className:"".concat("trim-range-marker"," ").concat(o),onClick:this.props.onClick,onMouseDown:this.stopPropagation,onMouseMove:this.stopPropagation,onMouseUp:this.stopPropagation}),a)}},{key:"stopPropagation",value:function(e){e.stopPropagation()}},{key:"handleClickOutside",value:function(e){this.props.selected&&(e.target.className.includes("trim-range-marker")||Object(X.h)(e.target,"trim-range-marker",3)||this.props.onDeselect())}}]),t}(a.Component)),Xe=ze()(He),Ke=(n(1853),function(e){function t(){var e,n;E()(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=x()(this,(e=j()(t)).call.apply(e,[this].concat(o))),B()(q()(q()(n)),"onDeselectMarker",function(){null!=n.props.selectedTrimRange&&n.props.updateSelectedTrimRangeCreator(null)}),n}return V()(t,e),C()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.currentTrimRange,r=t.duration,o=t.selectedTrimRange,a=t.trimRanges.map(function(t){if(null!=n&&t.id===n.id)return null;var a=t.from,s=t.id,u=t.to,c=pe(a/1e3,r),l=pe(u/1e3,r),d={left:de(a/1e3,r),width:"".concat(l-c,"%")};return i.a.createElement(Xe,{key:s,style:d,active:null==o||o.id===t.id,selected:null!=o&&o.id===t.id,onClick:function(n){n.stopPropagation(),e.props.updateSelectedTrimRangeCreator(t)},onEditClick:function(n){n.stopPropagation(),e.props.updateCurrentTrimRangeCreator(t)},onDeselect:e.onDeselectMarker})}).filter(Boolean);return i.a.createElement("div",{className:"video-player-trim-ranges-bar"},a)}}]),t}(a.Component)),Ge=Object(u.connect)(function(e){var t=e.trimming;return{currentTrimRange:t.current_trim_range,selectedTrimRange:t.selected_trim_range,trimRanges:t.trim_ranges}},function(e){return{updateCurrentTrimRangeCreator:function(t){return e(Object(N.i)(t))},updateSelectedTrimRangeCreator:function(t){return e(Object(N.k)(t))}}})(Ke),Qe=n(292),Je=(n(1854),200),Ye=function(e){function t(){var e,n;E()(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=x()(this,(e=j()(t)).call.apply(e,[this].concat(o))),B()(q()(q()(n)),"state",{play_after_seek_end:!1}),B()(q()(q()(n)),"hideEmojiBarTimer",null),B()(q()(q()(n)),"onWindowResize",Z.a.throttle(function(){n.forceUpdate()},100)),B()(q()(q()(n)),"showEmojiBar",function(){window.clearTimeout(n.hideEmojiBarTimer),n.props.onShowEmojiBar()}),B()(q()(q()(n)),"hideEmojiBar",function(){window.clearTimeout(n.hideEmojiBarTimer),n.hideEmojiBarTimer=window.setTimeout(function(){n.props.onHideEmojiBar()},Je)}),B()(q()(q()(n)),"showEmojiBarAt",function(e){window.clearTimeout(n.hideEmojiBarTimer),n.props.onShowEmojiBar(1e3*n.getNewTime(e))}),B()(q()(q()(n)),"getNewTime",function(e){var t=n.props,r=t.currentTime,o=t.duration;if(!n.slider)return r;var a=n.slider.calculateDistance(e)*o;return Z.a.isNaN(a)?r:Math.min(a,o-.01)}),B()(q()(q()(n)),"onMouseDown",function(){document.addEventListener("mouseup",n.onMouseUp,!1);var e=n.props.paused;n.setState({play_after_seek_end:!e})}),B()(q()(q()(n)),"onMouseMove",function(e){n.changeTime(e),n.props.updateVideoPlayerSeeking(!0),n.props.paused||n.props.onPause()}),B()(q()(q()(n)),"onMouseUp",function(e){document.removeEventListener("mouseup",n.onMouseUp),n.changeTime(e),n.props.updateVideoPlayerSeeking(!1),n.state.play_after_seek_end&&n.props.onPlay(),n.setState({play_after_seek_end:!1})}),B()(q()(q()(n)),"getPercent",function(){var e=n.props,t=e.currentTime,r=e.duration;return Math.min(t/r,1)}),n}return V()(t,e),C()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.controlBarExpanded,r=t.currentTime,o=t.currentTrimRange,a=t.currentUserIsOwner,s=t.duration,u=t.fromPublicSharePage,c=t.fullScreen,l=t.inTrimMode,d=t.localReactions,p=t.reactions,m=t.selectedEmojiStartX,f=t.selectedTrimRange,h=t.useEmojis,v=(100*this.getPercent()).toFixed(2),g=h&&(u||!a),y=this.container?this.container.getBoundingClientRect():{},b={width:y.width||0,x:y.x||0};return i.a.createElement("div",{ref:function(t){return e.container=t},className:"video-player-seek-bar ".concat(l?"in-trim-mode":"")},i.a.createElement("div",{className:"seek-bar-background"}),i.a.createElement(Qe.a,{ref:function(t){return e.slider=t},getPercent:this.getPercent,label:"Video Progress",onBlur:this.onMouseUp,onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseUp:this.onMouseUp,valueNow:v},i.a.createElement(Le,{duration:s}),i.a.createElement(Ne,{onMouseMove:this.showEmojiBarAt,onMouseOut:this.hideEmojiBar,currentTime:r}),u&&!l&&!c&&i.a.createElement(fe,{onMouseMove:this.showEmojiBarAt,onMouseOut:this.hideEmojiBar,duration:s}),u&&l&&i.a.createElement(Ge,{duration:s}),u&&l&&null!=o&&i.a.createElement(Ie,{getNewTime:this.getNewTime,onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseUp:this.onMouseUp}),i.a.createElement(qe,{onMouseOver:this.showEmojiBarAt,onScrubberMove:this.showEmojiBarAt,onScrubberOut:this.hideEmojiBar,controlBarExpanded:n}),!l&&h&&i.a.createElement(Ve,{reactions:p,localReactions:d,controlBarExpanded:n,containerDimensions:b,selectedEmojiStartX:m,animateReactions:this.props.animateReactions,currentTime:r,duration:s,usingStaticEmojiBar:g}),!l&&h&&i.a.createElement(ye,{duration:this.props.duration,show:this.props.showEmojiBar&&n&&(!u||a||c),hideReaction:this.props.hideReaction,controlBarExpanded:n,containerDimensions:b,onMouseOver:this.showEmojiBar,onMouseOut:this.hideEmojiBar})),u&&l&&null==o&&null==f&&i.a.createElement(le,{getPercent:this.getPercent}))}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onWindowResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onWindowResize)}},{key:"changeTime",value:function(e){var t=this.props,n=t.currentTime,r=t.currentTrimRange,o=t.duration,a=t.inTrimMode,i=t.trimRanges,s=this.getNewTime(e);a&&null==r&&(s=Object(K.e)(Math.round(1e3*n),Math.round(1e3*s),Math.round(1e3*o),i,r,!0)/1e3),this.props.requestVideoPlayerCurrentTime(s)}}]),t}(a.Component),$e=Object(u.connect)(function(e){var t=e.trimming,n=t.current_trim_range,r=t.in_trim_mode,o=t.selected_trim_range,a=t.trim_ranges,i=e.video_player,s=i.reactions,u=i.local_reactions,c=i.video.use_emojis;return{currentTrimRange:n,inTrimMode:r,selectedTrimRange:o,trimRanges:a,localReactions:u,reactions:s,showEmojiBar:i.show_emoji_bar,hideReaction:i.hide_reaction,selectedEmojiStartX:i.selected_emoji_start_x,animateReactions:i.animate_reactions,useEmojis:c}},function(e){return{requestVideoPlayerCurrentTime:function(t){return e(Object(d.b)(t))},updateVideoPlayerSeeking:function(t){return e(Object(d.Q)(t))},updateVideoPlayerLocalReactions:function(t){return e(Object(d.B)(t))},onShowEmojiBar:function(t){return e(Object(d.R)(t))},onHideEmojiBar:function(){return e(Object(d.y)())},onHideReaction:function(t){return e(Object(d.z)(t))}}})(Ye),Ze=n(167),et=(n(1855),function(e){function t(){return E()(this,t),x()(this,j()(t).apply(this,arguments))}return V()(t,e),C()(t,[{key:"render",value:function(){var e=this.props,t=e.currentTime,n=e.duration;return i.a.createElement("div",{className:"video-player-time-display"},i.a.createElement("span",null,Object(Ze.b)(Math.round(t))),i.a.createElement("span",{className:"divider"},"/"),i.a.createElement("span",null,Object(Ze.b)(Math.round(n))))}}]),t}(a.Component)),tt=(n(1856),function(e){function t(){return E()(this,t),x()(this,j()(t).apply(this,arguments))}return V()(t,e),C()(t,[{key:"render",value:function(){var e,t=this.props,n=t.muted,r=t.onButtonClick,o=t.volume;return e=n||0===o?"volume-0":o<=.5?"volume-1":"volume-2",i.a.createElement("div",{onClick:r,className:"video-player-volume-button"},i.a.createElement("span",{className:e}))}}]),t}(a.Component)),nt=(n(1857),function(e){var t={width:e.percentage};return i.a.createElement("div",{className:"video-player-volume-level",style:t},i.a.createElement("span",null))}),rt=(n(1858),{onVolumeChange:te.a.func}),ot=function(e){function t(e){var n;return E()(this,t),(n=x()(this,j()(t).call(this,e))).getPercent=n.getPercent.bind(q()(q()(n))),n.onMouseMove=n.onMouseMove.bind(q()(q()(n))),n}return V()(t,e),C()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.muted,r=t.onButtonClick,o=t.volume,a=(100*o).toFixed(2),s=n?"Unmute":"Mute";return i.a.createElement("div",{className:"video-player-volume-control"},i.a.createElement(tt,{muted:n,onButtonClick:r,volume:o}),i.a.createElement(Qe.a,{ref:function(t){return e.slider=t},getPercent:this.getPercent,label:"Volume Level",onMouseMove:this.onMouseMove,valueNow:a},i.a.createElement(nt,null)),i.a.createElement("div",{className:"volume-control-hover-tag"},s))}},{key:"onMouseMove",value:function(e){if(this.props.onVolumeChange){var t=this.slider.calculateDistance(e);this.props.onVolumeChange(t)}}},{key:"getPercent",value:function(){var e=this.props,t=e.muted,n=e.volume;return t?0:n}}]),t}(a.Component);ot.propTypes=rt;var at=ot,it=(n(1859),function(e){function t(e){var n;return E()(this,t),(n=x()(this,j()(t).call(this,e))).handleToggleFullscreen=n.handleToggleFullscreen.bind(q()(q()(n))),n.handleTogglePlay=n.handleTogglePlay.bind(q()(q()(n))),n.handleToggleMute=n.handleToggleMute.bind(q()(q()(n))),n}return V()(t,e),C()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.currentTime,r=t.currentUserIsOwner,o=t.duration,a=t.ended,s=t.fromPublicSharePage,u=t.fullScreen,c=t.hasStarted,l=t.inTrimMode,d=t.mouseActive,p=t.muted,m=t.paused,f=t.playbackRate,h=t.seeking,v=t.volume,g=c&&(l||a||m||h||d),y="",b="";g&&(y="expanded"),!a&&g&&(b="shown");var w=null,k=null;return l||(w=i.a.createElement(J,{fullScreen:u,onClick:this.handleToggleFullscreen}),k=i.a.createElement(ie,{playbackRate:f,onRateChange:this.props.requestVideoPlayerPlaybackRate})),i.a.createElement("div",{className:"video-player-control-bar-container"},i.a.createElement("div",{className:"control-bar ".concat(y),ref:function(t){return e.controlBar=t}},i.a.createElement($e,{controlBarExpanded:g,currentTime:n,currentUserIsOwner:r,duration:o,fromPublicSharePage:s,fullScreen:u,paused:m,onPause:this.props.requestVideoPlayerPause,onPlay:this.props.requestVideoPlayerPlay}),i.a.createElement("div",{className:"bottom-controls"},i.a.createElement("div",{className:"left-controls"},i.a.createElement(Y,{paused:m,onClick:this.handleTogglePlay}),i.a.createElement(at,{muted:p,volume:v,onButtonClick:this.handleToggleMute,onVolumeChange:this.props.requestVideoPlayerVolume}),i.a.createElement(et,{currentTime:n,duration:o})),i.a.createElement("div",{className:"right-controls"},k,w))),i.a.createElement("div",{className:"control-bar-gradient ".concat(b),onClick:this.handleTogglePlay}))}},{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"getControlBarEl",value:function(){return this.controlBar}},{key:"handleTogglePlay",value:function(){this.props.paused?this.props.requestVideoPlayerPlay():this.props.requestVideoPlayerPause()}},{key:"handleToggleFullscreen",value:function(){this.props.fullScreen?this.props.requestVideoPlayerLeaveFullScreen():this.props.requestVideoPlayerEnterFullScreen()}},{key:"handleToggleMute",value:function(){this.props.muted?this.props.requestVideoPlayerUnmute():this.props.requestVideoPlayerMute()}}]),t}(a.Component)),st=Object(u.connect)(function(e){var t=e.video_player,n=t.duration,r=t.ended,o=t.muted,a=t.paused,i=t.seeking,s=t.volume,u=t.current_time,c=t.from_public_share_page,l=t.full_screen,d=t.has_started,p=t.mouse_active,m=t.playback_rate;return{currentTime:u,duration:n,ended:r,fromPublicSharePage:c,fullScreen:l,hasStarted:d,inTrimMode:e.trimming.in_trim_mode,mouseActive:p,muted:o,paused:a,playbackRate:m,seeking:i,volume:s}},function(e){return{requestVideoPlayerEnterFullScreen:function(){return e(Object(d.c)())},requestVideoPlayerLeaveFullScreen:function(){return e(Object(d.d)())},requestVideoPlayerMute:function(){return e(Object(d.e)())},requestVideoPlayerPause:function(){return e(Object(d.f)())},requestVideoPlayerPlay:function(){return e(Object(d.g)())},requestVideoPlayerPlaybackRate:function(t){return e(Object(d.h)(t))},requestVideoPlayerVolume:function(t){return e(Object(d.j)(t))},requestVideoPlayerUnmute:function(){return e(Object(d.i)())}}},null,{withRef:!0})(it),ut=n(57),ct=n(238),lt=n(343),dt=n(18),pt=(n(1860),5),mt=60,ft=1e3,ht=function(e){function t(){var e,n;E()(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=x()(this,(e=j()(t)).call.apply(e,[this].concat(o))),B()(q()(q()(n)),"state",{text:""}),B()(q()(q()(n)),"calculateInterval",function(e){return 1/(e*pt/mt)*ft}),n}return V()(t,e),C()(t,[{key:"render",value:function(){return i.a.createElement("span",{className:"typing-animation"},i.a.createElement("span",{className:"text"},this.state.text),i.a.createElement("span",{className:"cursor"},"|"))}},{key:"componentDidMount",value:function(){var e=this;this.componentMounted=!0;var t=this.props.phrases,n=0,r=t[n],o=this.calculateInterval(this.props.wpm),a=this.calculateInterval(this.props.backspaceWpm),i=function t(n){if(n>r.length)window.setTimeout(s,1e3*e.props.secondsComplete);else{if("\\"===r.charAt(n)&&"b"===r.charAt(n+1))n-=2,r=r.replace(/.\\b/,"");else{if(n++,!e.componentMounted)return;e.setState({text:r.slice(0,n)})}window.setTimeout(function(){t(n)},o)}},s=function o(){if(0===r.length)return++n>=t.length&&(n=0),r=t[n],setTimeout(function(){return i(0)},1e3*e.props.secondsBetween),void(e.props.onPhraseChange&&e.props.onPhraseChange(r));r=r.slice(0,r.length-1),e.componentMounted&&(e.setState({text:r}),window.setTimeout(function(){o()},a))};setTimeout(function(){return i(0)},o)}},{key:"componentWillUnmount",value:function(){this.componentMounted=!1}}]),t}(a.PureComponent),vt=(n(1861),function(e){function t(){var e,n;E()(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=x()(this,(e=j()(t)).call.apply(e,[this].concat(o))),B()(q()(q()(n)),"state",{custom_cta:!1,cta:null,cta_clicked:!1,expClass:""}),B()(q()(q()(n)),"onWatchAgainClick",function(){var e=n.props.videoId;y.h(m.hc,{video_id:e}),n.props.onRequestCurrentTime(0),n.props.onRequestPlay()}),B()(q()(q()(n)),"dismissCTA",function(){n.state.cta_clicked||n.setState({cta_clicked:!0,expClass:""})}),B()(q()(q()(n)),"onCTAClick",function(e){var t=n.props,r=t.fromPublicSharePage,o=t.videoId,a=r&&ut.a;e.stopPropagation(),y.h(m.x,{from_public_share_page:r,install_extension:a,video_id:o}),n.dismissCTA(),U.f||(r?window.top&&window.top.postMessage({type:R.d,source:m.F},"*"):window.open(f.h,"_blank"))}),n}return V()(t,e),C()(t,[{key:"render",value:function(){var e=this.props,t=e.ended,n=e.inTrimMode,r=this.state,o=r.custom_cta,a=r.cta_clicked,s="",u="",c=null;return!n&&t&&(s="shown",c=this.state.cta),o&&(u="has-custom-cta"),i.a.createElement("div",{className:"video-player-end-screen ".concat(s," ").concat(this.state.expClass," ").concat(u),onClick:this.dismissCTA},i.a.createElement("div",{className:"watch-again-container",onClick:this.onWatchAgainClick},i.a.createElement("span",{className:"watch-again-icon"}),i.a.createElement("span",null,"Watch Again")),!a&&c)}},{key:"componentDidMount",value:function(){var e=Me()(_e.a.mark(function e(){var t,n,r,o,a,s,u;return _e.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.componentMounted=!0,t=this.props,n=t.ctaEnabled,r=t.currentUserIsOwner,o=t.isLoggedIn,!n||r){e.next=4;break}return e.abrupt("return",this.setState({custom_cta:!0,cta:i.a.createElement(lt.a,null)}));case 4:return e.next=6,new Promise(function(e){return Object(ut.c)(e)});case 6:if(!(a=e.sent)||!o){e.next=9;break}return e.abrupt("return");case 9:s=i.a.createElement("div",{className:"animation-container"},i.a.createElement(ht,{wpm:120,secondsComplete:3,backspaceWpm:300,secondsBetween:.5,phrases:ct.a})),u=i.a.createElement("span",{className:"install"},i.a.createElement("div",{className:"static-cta"},"Install Loom to become faster than typing"),s,ut.a&&!a?i.a.createElement(dt.a,{buttonType:"rp-primary-2",value:"Install on Chrome",onClicked:this.onCTAClick}):i.a.createElement("a",{target:"_blank",href:"/"},i.a.createElement(dt.a,{buttonType:"rp-primary-2",value:"Sign Up",onClicked:this.onCTAClick})),i.a.createElement("a",{target:"_blank",href:"/"},"go to loom.com")),this.componentMounted&&this.setState({cta:u,expClass:"large-cta"});case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.componentMounted=!1}}]),t}(a.Component)),gt=n(21),yt=n.n(gt),bt=n(24),wt=n(23),kt=n(52),Pt=(n(1862),function(e){function t(e){var n;return E()(this,t),(n=x()(this,j()(t).call(this,e))).onPasswordEnter=n.onPasswordEnter.bind(q()(q()(n))),n.updatePassword=n.updatePassword.bind(q()(q()(n))),n.state={error:null,password:""},n}return V()(t,e),C()(t,[{key:"render",value:function(){var e=null!=this.state.error?"error":"";return i.a.createElement("div",{className:"video-player-password-modal-container"},i.a.createElement("div",{className:"video-player-password-modal"},i.a.createElement("h4",null,"This video is private"),i.a.createElement(kt.a,{onChange:this.updatePassword,onEnter:this.onPasswordEnter,fieldLabel:"Enter Password",fieldId:"password",fieldType:"password",fieldValue:this.state.password,inputClass:"new-style",isRequired:!0,severity:e,status:this.state.error}),i.a.createElement(dt.a,{buttonType:"rp-primary-2",buttonClass:"password-button",value:"Enter",onClicked:this.onPasswordEnter})))}},{key:"updatePassword",value:function(e){this.setState({password:e})}},{key:"onPasswordEnter",value:function(){var e=Me()(_e.a.mark(function e(){var t,n,r,o;return _e.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.setState({error:null}),t=this.props.videoId,n=this.state.password,e.next=5,yt()("/api/campaigns/sessions/".concat(t,"/checkPassword"),{credentials:"include",headers:B()({},bt.b,wt.b),method:"POST",body:JSON.stringify({password:n})});case 5:if(!((r=e.sent).status>=400)){e.next=8;break}throw new Error("Error checking password - HTTP response: ".concat(r.status));case 8:return e.next=10,r.json();case 10:if(o=e.sent,o.isVerified){e.next=14;break}return e.abrupt("return",this.setState({error:"Wrong Password"}));case 14:this.props.onPassword(n),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),b.b(e.t0,"error checking password for video"),this.setState({error:"Wrong Password"});case 21:case"end":return e.stop()}},e,this,[[0,17]])}));return function(){return e.apply(this,arguments)}}()}]),t}(a.Component)),_t=n(951),Et=n.n(_t),Mt=n(142),Ct=(n(1863),function(e){function t(e){var n;return E()(this,t),n=x()(this,j()(t).call(this,e)),B()(q()(q()(n)),"state",{isLoading:!1}),n.onClick=n.onClick.bind(q()(q()(n))),n}return V()(t,e),C()(t,[{key:"render",value:function(){var e=this.state.isLoading,t=["video-player-play-screen"];return e&&t.push("is-loading"),i.a.createElement("div",{className:t.join(" "),onClick:this.onClick},i.a.createElement("div",{className:"button-container"},i.a.createElement("div",{className:"button-border"}),i.a.createElement("div",{className:"big-play-button"},!e&&i.a.createElement(Et.a,{svg:String('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="#929EAA" fill-rule="evenodd" d="M5.132 1.117a.73.73 0 0 0-1.128.612L4 14.271c.004.4.331.729.731.729a.843.843 0 0 0 .412-.125l10.22-6.033a1.09 1.09 0 0 0 0-1.684L5.132 1.118z"/></svg>')}),e&&i.a.createElement(Mt.a,{color:"dark"}))))}},{key:"onClick",value:function(){this.props.onPlay&&(this.setState({isLoading:!0}),this.props.onPlay())}}]),t}(a.Component)),Tt=n(61),xt=n.n(Tt),Ot=n(298),jt=n(456),St=(n(1864),"Waiting on Luna to start trimming. She's wrapping up another trim right now."),Vt=["Luna is polishing your trims, give her a few minutes, she's still getting used to this!","Luna is working hard to trim your video. She's getting a big treat for this one.","Luna loves you in this video. Your viewers will too!","Luna has your video in post-production. Trust us, it's in good paws.","Luna is stitching the frames together. Not easy without opposable thumbs.","Luna's working hard on your video. She's up for a promotion soon!","Luna loves what you've done with the video. Two paws way up!","Luna heard your voice while trimming the video. She thinks it's lovely.",'Your video\'s in "Paws-t" production, hang in there!',"Lunaâ€™s working as fast as she can. Sheâ€™ll be done in two shakes of her tail.","Luna is snipping at your video, please be patient!","Luna is paws-itive your video will be done soon!","Luna wants to be taken for walk while waiting for your video to be trimmed."],Rt=function(e){function t(e){var n;E()(this,t),(n=x()(this,j()(t).call(this,e))).timeLeftInterval=null,n.websocket=null;var r=e.processingInformation.trim_ranges,o=r.reduce(function(e,t){return e+(t.to-t.from)},0),a=1e3*e.duration-o;return n.totalEstimatedTime=200*r.length+.5*a,n.state={current_progress:e.trimProgress,finalizing:!1,luna_update:St,time_left:n.getTimeLeftRaw(e.trimProgress),websocket_retries:0,websocket_retrying:!1},n}return V()(t,e),C()(t,[{key:"render",value:function(){var e=this.state.current_progress,t=this.state.websocket_retrying,r=this.state.time_left,o={height:"".concat(e||0,"%")},a=null,s=null;if(null!=r&&!t){var u=xt.a.duration(r),c=u.minutes(),l=u.seconds(),d="".concat(l," sec remaining");c>0&&(d="".concat(c," min ").concat(d)),a=i.a.createElement("p",{className:"time-remaining mobile"},d),s=i.a.createElement("p",{className:"time-remaining desktop"},d)}var p=this.state.luna_update;return t&&(p="Grrr Luna seems to have run off. Don't worry - we'll find her!"),i.a.createElement("div",{className:"video-player-trim-progress-panel"},i.a.createElement("span",{className:"progress-fill",style:o}),i.a.createElement("div",{className:"luna-flex-container"},i.a.createElement("div",{className:"luna-container"},i.a.createElement("img",{className:"luna-head",src:n(1865)}),i.a.createElement("img",{className:"luna-body",src:n(1866)}),i.a.createElement("p",{className:"luna-update"},p),a)),s)}},{key:"componentDidUpdate",value:function(){var e=Me()(_e.a.mark(function e(){var t,n,r,o,a,i;return _e.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,n=t.current_progress,!t.finalizing&&100===n){e.next=3;break}return e.abrupt("return");case 3:return this.setState({finalizing:!0}),e.next=6,new Promise(function(e){return window.setTimeout(e,1e3)});case 6:r=this.props,o=r.fromPublicSharePage,a=r.video,(i=Z.a.cloneDeep(a)).processing_information.trim_progress=100,o&&window.top.postMessage({type:R.l,processing_information:i.processing_information},"*"),this.props.updateVideoCreator(i);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.setupUpdateSocket()}},{key:"componentWillUnmount",value:function(){null!=this.websocket&&this.websocket.close(),window.clearInterval(this.timeLeftInterval)}},{key:"getTimeLeftRaw",value:function(){return(100-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0))/100*this.totalEstimatedTime}},{key:"getTimeLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=(this.state||{}).current_progress,n=null!=e?e:t;if(null===n)return null;var r=this.getTimeLeftRaw(n);return r=Math.max(r,0),null!=this.state.time_left&&(r=Math.min(r,this.state.time_left)),r}},{key:"setupUpdateSocket",value:function(){var e=Me()(_e.a.mark(function e(){var t,n,r,o=this;return _e.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=this.state.websocket_retries)>0)){e.next=4;break}return e.next=4,new Promise(function(e){window.setTimeout(e,2e3*Math.pow(2,Math.max(t,4)))});case 4:n=this.props.videoId,this.websocket=new jt.a(f.x+Ot.a),this.websocket.ready(function(){o.setState({websocket_retries:0,websocket_retrying:!1}),o.websocket.send(JSON.stringify({type:Ot.b,subscription_data:{type:Ot.c,video_id:n}}))}),r=!1,this.websocket.onMessage(function(e){var t=e.data,n=JSON.parse(t),a=n.progress,i={current_progress:n.progress,time_left:o.getTimeLeft(n.progress)};null==a||r||(r=!0,i.luna_update=Vt[Math.floor(Math.random()*Vt.length)],o.timeLeftInterval=window.setInterval(function(){o.setState({time_left:Math.max(o.state.time_left-1e3,0)})},1500)),o.setState(i)}),this.websocket.onError(function(){var e=o.state.websocket_retries;o.setState({websocket_retrying:!0,websocket_retries:e+1}),o.setupUpdateSocket()});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}(a.Component),Lt=Object(u.connect)(function(e){var t=e.video_player,n=t.video,r=t.from_public_share_page,o=n.processing_information,a=o.trim_progress,i=n.id;return{duration:n.video_properties.duration,fromPublicSharePage:r,processingInformation:o,trimProgress:a,videoId:i,video:n}},function(e){return{updateVideoCreator:function(t){return e(Object(v.h)(t))}}})(Rt),Nt=n(381),Ut=n.n(Nt),Dt=n(536),qt=n(117),Wt=n(952),Bt=n.n(Wt),At=(n(1867),function(e){function t(e){var n;return E()(this,t),(n=x()(this,j()(t).call(this,e))).onClick=n.onClick.bind(q()(q()(n))),n}return V()(t,e),C()(t,[{key:"render",value:function(){var e=this.props,t=e.show,n=void 0!==t&&t,r=e.videoId,o="".concat(f.w,"/share/").concat(r);return i.a.createElement("a",{onClick:this.onClick,target:"_blank",rel:"noopener noreferrer",className:"embed-loom-logo ".concat(n?"show":""),href:o},i.a.createElement("img",{src:Bt.a}),i.a.createElement("span",{className:"watch-on-loom"},"Watch on Loom"))}},{key:"onClick",value:function(){var e=this.props,t=e.fromLinkExpand,n=e.parentLocation,r=e.videoId;y.h(m.z,{from_link_expand:t,parent_location:n,video_id:r})}}]),t}(a.Component)),It=(n(1868),function(e){function t(e){var n;return E()(this,t),(n=x()(this,j()(t).call(this,e))).onClick=n.onClick.bind(q()(q()(n))),n}return V()(t,e),C()(t,[{key:"render",value:function(){var e=this.props,t=e.show,n=void 0!==t&&t,r=e.ended,o=e.videoId,a=e.pauseScreenAvatar,s=e.ownerName,u="".concat(f.w,"/share/").concat(o);return i.a.createElement("a",{onClick:this.onClick,target:"_blank",rel:"noopener noreferrer",className:"embed-owner-info ".concat(n?"show":""," ").concat(r?"end":""),href:u},i.a.createElement("img",{src:a}),i.a.createElement("div",{className:"owner-name"},s))}},{key:"onClick",value:function(){var e=this.props,t=e.fromLinkExpand,n=e.parentLocation,r=e.videoId;y.h(m.y,{from_link_expand:t,parent_location:n,video_id:r})}}]),t}(a.Component)),Ft=(n(1869),30),zt=3,Ht=new Error("Embed Video MediaSrc Error"),Xt=.75,Kt=1e3,Gt={onDimensionChange:te.a.func,onDurationChange:te.a.func,onEnded:te.a.func,onError:te.a.func,onMute:te.a.func,onNotWaiting:te.a.func,onPause:te.a.func,onPlay:te.a.func,onPlaying:te.a.func,onProgress:te.a.func,onRateChange:te.a.func,onTimeUpdate:te.a.func,onUnmute:te.a.func,onVolumeChange:te.a.func,onWaiting:te.a.func},Qt=function(e){function t(){var e,n;E()(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=x()(this,(e=j()(t)).call.apply(e,[this].concat(o))),B()(q()(q()(n)),"hlsInstance",null),B()(q()(q()(n)),"onVisibilityChangeListener",null),B()(q()(q()(n)),"timeUpdateInterval",null),B()(q()(q()(n)),"state",{numSrcRetries:0,timeWatched:0,timeWatchedForDurationEvent:0,viewTracked:!1}),B()(q()(q()(n)),"setupPlayerJsAdapter",function(){Ut.a.HTML5Adapter(n.video).ready()}),B()(q()(q()(n)),"onCanPlayThrough",function(){n.onProgress()}),B()(q()(q()(n)),"onClick",function(){n.video.paused?n.video.play():n.video.pause()}),B()(q()(q()(n)),"onContextMenu",function(e){return e.preventDefault(),!1}),B()(q()(q()(n)),"onDimensionChange",function(e,t){n.props.onDimensionChange&&n.props.onDimensionChange(e,t)}),B()(q()(q()(n)),"onDurationChange",function(){n.props.onDurationChange&&n.props.onDurationChange(n.video.duration)}),B()(q()(q()(n)),"onEnded",function(){n.trackVideoViewEvent(),n.props.onEnded&&n.props.onEnded()}),B()(q()(q()(n)),"onError",function(){if(n.props.onError&&n.props.onError(),n.props.sourceUrl.indexOf("-streamed.webm")>-1){var e=n.video.currentTime;return n.props.onRefetchSource().then(function(){n.setCurrentTime(e),n.video.play()})}var t=(n.video.error||{}).code;if(t===ct.b||t===ct.c){var r=n.state.numSrcRetries,o=n.props,a=o.sourceMimeType,i=o.videoModel;if(r>=zt){if(a!==wt.f&&a!==wt.c)return b.b(Ht,"error fetching video src",{error_code:t,video_id:i.s3_id,video_type:a});n.props.onRefetchSource()}window.setTimeout(function(){var e=n.video.currentTime;n.setState({numSrcRetries:n.state.numSrcRetries+1}),n.video.pause(),n.video.load(),n.setCurrentTime(e),n.video.play()},100*Math.pow(2,r))}}),B()(q()(q()(n)),"onLoadedMetadata",function(){n.onDimensionChange(n.video.videoWidth,n.video.videoHeight),n.onDurationChange()}),B()(q()(q()(n)),"onPause",function(){n.props.onPause&&n.props.onPause(),n.video.readyState>=ct.d&&n.props.onNotWaiting&&n.props.onNotWaiting()}),B()(q()(q()(n)),"onProgress",function(){if(n.props.onProgress){var e=n.getBufferedParts();n.props.onProgress(e)}}),B()(q()(q()(n)),"onRateChange",function(){n.props.onRateChange&&n.props.onRateChange(n.video.playbackRate)}),B()(q()(q()(n)),"onTimeUpdate",Z.a.throttle(function(){var e=n.props,t=e.currentTime,r=e.currentTrimRange,o=e.inTrimMode,a=e.seeking,i=e.trimRanges,s=e.videoModel;if(null!=n.video){var u=Math.round(1e3*n.video.currentTime)-Math.round(1e3*t);if(!s.current_user_is_owner&&!o&&!n.state.viewTracked&&!a&&u>0){n.setState({timeWatched:n.state.timeWatched+u});var c=n.state.timeWatched/(1e3*n.video.duration);(n.state.timeWatched>=Kt||c>=Xt)&&n.trackVideoViewEvent()}if(!o&&!a&&u>0&&n.setState({timeWatchedForDurationEvent:n.state.timeWatchedForDurationEvent+u}),!o||a||0===i.length)return n.props.onTimeUpdate(n.video.currentTime);var l=Object(K.e)(Math.round(1e3*t),Math.round(1e3*n.video.currentTime),Math.round(1e3*n.video.duration),i,r);if(l===Math.round(1e3*n.video.currentTime))return n.props.onTimeUpdate(n.video.currentTime);n.setCurrentTime(l/1e3)}},Ft)),B()(q()(q()(n)),"onVolumeChange",function(){n.props.onVolumeChange&&n.props.onVolumeChange(n.video.volume),(n.video.muted||0===n.video.volume)&&n.props.onMute?n.props.onMute():n.video.volume>0&&n.props.onUnmute&&n.props.onUnmute()}),B()(q()(q()(n)),"onVisibilityChange",function(e){e||n.onUnload()}),B()(q()(q()(n)),"onUnload",function(){n.flushVideoViewDurationEvent()}),n}return V()(t,e),C()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.autoplay,r=t.ctaEnabled,o=t.ended,a=t.flippedCamera,s=t.fromLinkExpand,u=t.fromPublicSharePage,c=t.hasStarted,l=t.isCameraRecording,d=t.mouseActive,p=t.ownerName,m=t.paused,h=t.pauseScreenAvatar,v=t.parentLocation,g=void 0===v?"":v,y=t.seeking,b=t.sourceMimeType,w=t.sourceUrl,k=t.videoId,P=t.videoModel,_=P.company_feature_data,E=P.current_user_is_owner,M=!(u||g.indexOf(f.w)>-1||g.indexOf(f.u)>-1||g.indexOf(f.v)>-1||g.indexOf(f.t)>-1)&&c&&(o||m||y||d),C=_&&_.company_email_domain,T=a&&l?"flip-video":"",x=w;return w&&b===wt.c&&!Object(qt.a)()&&(x=null),i.a.createElement("div",{className:"video-player-video-container ".concat(U.f?"mobile":"")},i.a.createElement("video",{className:"video-player-video ".concat(T),controls:c&&!o&&U.f,autoPlay:n,ref:function(t){return e.video=t},playsInline:!0,preload:"auto",src:x,onCanPlayThrough:this.onCanPlayThrough,onContextMenu:this.onContextMenu,onClick:this.onClick,onDurationChange:this.onDurationChange,onEnded:this.onEnded,onError:this.onError,onLoadedMetadata:this.onLoadedMetadata,onLoadStart:this.setupPlayerJsAdapter,onPause:this.onPause,onPlay:this.props.onPlay,onPlaying:this.props.onPlaying,onProgress:this.onProgress,onRateChange:this.onRateChange,onTimeUpdate:this.onTimeUpdate,onVolumeChange:this.onVolumeChange,onWaiting:this.props.onWaiting}),!C&&i.a.createElement(At,{show:M,fromLinkExpand:s,parentLocation:g,videoId:k}),r&&c&&!o&&!E&&i.a.createElement("div",{className:"hover-cta-wrapper".concat(m?" show":"")},i.a.createElement(lt.a,null)),!r&&i.a.createElement(It,{ended:o,show:M,fromLinkExpand:s,pauseScreenAvatar:h,ownerName:p,parentLocation:g,videoId:k}))}},{key:"componentDidMount",value:function(){var e=this.props,t=e.fromPublicSharePage,n=e.videoModel;this.checkRequestedMutations(),t&&n.current_user_is_owner&&window.top.postMessage({type:R.v},"*"),window.addEventListener("beforeunload",this.onUnload),window.addEventListener("unload",this.onUnload),U.f&&(document.addEventListener("pagehide",this.onUnload),this.onVisibilityChangeListener=Object(X.a)(this.onVisibilityChange)),this.checkAndCreateHlsInstance()}},{key:"componentWillUnmount",value:function(){this.clearTimeUpdateInterval(),window.removeEventListener("beforeunload",this.onUnload),window.removeEventListener("unload",this.onUnload),document.removeEventListener("pagehide",this.onUnload),Object(X.b)(this.onVisibilityChangeListener)}},{key:"componentDidUpdate",value:function(e){this.checkRequestedMutations();var t=this.video,n=t.ended,r=t.paused,o=t.seeking;null==this.timeUpdateInterval||o||!n&&!r?null!=this.timeUpdateInterval||!o&&(n||r)||this.setupTimeUpdateInterval():this.clearTimeUpdateInterval(),!e.sourceUrl&&this.props.sourceUrl&&this.checkAndCreateHlsInstance()}},{key:"checkAndCreateHlsInstance",value:function(){var e=this.props,t=e.sourceUrl,n=e.sourceMimeType;t&&n===wt.c&&!Object(qt.a)()&&(this.hlsInstance=Object(Dt.a)(t,this.video))}},{key:"setCurrentTime",value:function(e){try{this.video.currentTime=e}catch(e){console.warn("could not set current time ".concat(e))}}},{key:"setupTimeUpdateInterval",value:function(){this.timeUpdateInterval=window.setInterval(this.onTimeUpdate,Ft)}},{key:"clearTimeUpdateInterval",value:function(){window.clearInterval(this.timeUpdateInterval),this.timeUpdateInterval=null}},{key:"checkRequestedMutations",value:function(){var e=this.props,t=e.requestCurrentTime,n=e.requestMute,r=e.requestPause,o=e.requestPlay,a=e.requestPlaybackRate,i=e.requestUnmute,s=e.requestVolume;null!=s&&(this.video.muted=0===s,this.video.volume=s),r&&null!=this.video.pause?this.video.pause():o&&null!=this.video.play&&this.video.play(),n?this.video.muted=!0:i&&(this.video.muted=!1,0===this.video.volume&&(this.video.volume=1)),null!=t&&this.setCurrentTime(t),null!=a&&(this.video.playbackRate=a)}},{key:"getBufferedParts",value:function(){for(var e=this.video.buffered,t=[],n=0;n<e.length;n+=1)t.push({end:e.end(n),start:e.start(n)});return t}},{key:"trackVideoViewEvent",value:function(){this.state.viewTracked||(this.setState({viewTracked:!0}),this.props.onTrackVideoView())}},{key:"flushVideoViewDurationEvent",value:function(){var e=this.state.timeWatchedForDurationEvent;e>0&&(this.props.onTrackVideoWatchDuration(Math.round(e/1e3)),this.setState({timeWatchedForDurationEvent:0}))}}]),t}(a.Component);Qt.propTypes=Gt;var Jt=Qt,Yt=(n(1870),function(e){function t(e){var n;return E()(this,t),n=x()(this,j()(t).call(this,e)),B()(q()(q()(n)),"state",{wasUploadMode:!1}),B()(q()(q()(n)),"onKeyDown",function(e){var t=n.props.fromPublicSharePage?window.top:window;null!==t.document.querySelector("input:focus, select:focus, textarea:focus, [contenteditable]:focus")||document.activeElement!=document.body||(F.d.includes(e.key)&&e.preventDefault(),F.i.indexOf(e.key)>-1&&(e.preventDefault(),t.postMessage({type:R.r},"*")),F.h.indexOf(e.key)>-1&&(e.preventDefault(),t.postMessage({type:R.q},"*")))}),B()(q()(q()(n)),"onKeyUp",function(e){var t=n.props,r=t.fromPublicSharePage,o=t.hasStarted,a=r?window.top:window;if(!(null!==a.document.querySelector("input:focus, select:focus, textarea:focus, [contenteditable]:focus")||document.activeElement!=document.body)){if(F.d.includes(e.key)){if(!o)return n.props.updateVideoPlayerPlaying(),void n.props.requestVideoPlayerPlay();e.preventDefault(),a.postMessage({type:R.k},"*")}F.b.indexOf(e.key)>-1&&(e.preventDefault(),a.postMessage({type:R.i},"*")),F.c.indexOf(e.key)>-1&&(e.preventDefault(),a.postMessage({type:R.j},"*")),F.f.indexOf(e.key)>-1&&(e.preventDefault(),a.postMessage({type:R.o},"*")),F.e.indexOf(e.key)>-1&&(e.preventDefault(),a.postMessage({type:R.n},"*")),F.g.indexOf(e.key)>-1&&(e.preventDefault(),a.postMessage({type:R.p},"*"))}}),B()(q()(q()(n)),"onSharePageKeyUp",function(e){F.d.includes(e.key)&&n.onKeyUp(e)}),B()(q()(q()(n)),"onSharePageKeyDown",function(e){F.d.includes(e.key)&&n.onKeyDown(e)}),n.mouseInactiveTimeout=null,n.onMouseMove=n.onMouseMove.bind(q()(q()(n))),n.onFullscreenChange=n.onFullscreenChange.bind(q()(q()(n))),n.onPassword=n.onPassword.bind(q()(q()(n))),n.togglePlay=n.togglePlay.bind(q()(q()(n))),n.handlePlayerControlEvents=n.handlePlayerControlEvents.bind(q()(q()(n))),n}return V()(t,e),C()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.autoplay,r=t.currentTime,o=t.currentTrimRange,a=t.ctaEnabled,s=t.ctaFlowActive,u=t.ended,c=t.flippedCamera,l=t.fromLinkExpand,d=t.fromPublicSharePage,p=t.hasStarted,m=t.inTrimMode,f=t.isCameraRecording,h=t.isFetching,v=t.isLoggedIn,g=t.mouseActive,y=t.needsPassword,b=t.parentLocation,w=t.password,k=t.paused,P=t.posterUrl,_=t.requestCurrentTime,E=t.requestMute,M=t.requestPause,C=t.requestPlay,T=t.requestPlaybackRate,x=t.requestUnmute,O=t.requestVolume,j=t.seeking,S=t.sourceMimeType,V=t.sourceUrl,R=t.trimRanges,L=t.videoId,N=t.videoModel,D=t.waiting,q=t.waitingForTrim,W=N.video_properties,B=(void 0===W?{}:W).screen_type,A=void 0===B?"":B,F="video-player-container",X=I()("video-player-thumbnail-image",{flipped:A&&A===z.a&&c});if(!m&&q)return i.a.createElement("div",{className:F},i.a.createElement(Lt,null));if(h&&!this.state.wasUploadMode)return i.a.createElement("div",{className:F},i.a.createElement(Mt.a,null));if(null==w&&y)return i.a.createElement(Pt,{onPassword:this.onPassword,videoId:L});var K=N.current_user_is_owner,G=null;p&&D&&!k&&(G=i.a.createElement(Mt.a,null));var J=null,Y=N.owner_avatar?Object(H.b)(N.owner_avatar.thumb):Q.a,$=N.owner_full_name;p||(J=i.a.createElement(Ct,{onPlay:this.props.requestVideoPlayerPlay}));var Z=null;!U.f&&p&&(Z=i.a.createElement(st,{onRef:function(t){return e.controlBar=t},currentUserIsOwner:K}));var ee=null;return ee=null!=V&&V.indexOf("-streamed.webm")>-1?this.props.updateVideoPlayerSourceRawCreator:this.props.updateVideoPlayerSourceMp4Creator,i.a.createElement("div",{className:F,ref:function(t){return e.player=t}},!p&&i.a.createElement("div",{className:X,style:{backgroundImage:"url(".concat(P,")")}}),i.a.createElement(Jt,{currentTrimRange:o,flippedCamera:c,fromLinkExpand:l,fromPublicSharePage:d,hasStarted:p,inTrimMode:m,isCameraRecording:f,mouseActive:g,parentLocation:b,trimRanges:R,videoId:L,videoModel:N,autoplay:n,currentTime:r,ended:u,paused:k,seeking:j,sourceUrl:V,sourceMimeType:S,pauseScreenAvatar:Y,ownerName:$,ctaEnabled:a,requestCurrentTime:_,requestMute:E,requestPause:M,requestPlay:C,requestPlaybackRate:T,requestUnmute:x,requestVolume:O,onDimensionChange:this.props.updateVideoPlayerDimensionsCreator,onDurationChange:this.props.updateVideoPlayerDurationCreator,onEnded:this.props.updateVideoPlayerEnded,onRefetchSource:ee,onMute:this.props.updateVideoPlayerMute,onNotWaiting:this.props.updateVideoPlayerNotWaiting,onPause:this.props.updateVideoPlayerPaused,onPlay:this.props.updateVideoPlayerPlay,onPlaying:this.props.updateVideoPlayerPlaying,onProgress:this.props.updateVideoPlayerBufferedParts,onRateChange:this.props.updateVideoPlayerPlaybackRate,onTimeUpdate:this.props.updateVideoPlayerCurrentTime,onTrackVideoView:this.props.trackVideoViewCreator,onTrackVideoWatchDuration:this.props.trackVideoWatchDurationCreator,onUnmute:this.props.updateVideoPlayerUnmute,onVolumeChange:this.props.updateVideoPlayerVolume,onWaiting:this.props.updateVideoPlayerWaiting}),Z,G,!s&&i.a.createElement(vt,{ctaEnabled:a,currentUserIsOwner:K,ended:u,fromPublicSharePage:d,inTrimMode:m,isLoggedIn:v,videoId:L,onRequestPlay:this.props.requestVideoPlayerPlay,onRequestCurrentTime:this.props.requestVideoPlayerCurrentTime}),!s&&J)}},{key:"onPassword",value:function(e){this.props.updateVideoPlayerPasswordCreator(e),this.props.updateVideoPlayerSourceCreator()}},{key:"togglePlay",value:function(){this.props.paused?this.props.requestVideoPlayerPlay():this.props.requestVideoPlayerPause()}},{key:"onFullscreenChange",value:function(){Object(X.f)()!==this.player?this.props.updateVideoPlayerLeaveFullScreen():this.props.updateVideoPlayerEnterFullScreen()}},{key:"onMouseMove",value:function(){if(this.setupMouseInactiveTimeout(),!this.props.mouseActive)return this.props.updateVideoPlayerMouseActive()}},{key:"setupMouseInactiveTimeout",value:function(){var e=this;window.clearTimeout(this.mouseInactiveTimeout),this.mouseInactiveTimeout=window.setTimeout(function(){if(null!=e.controlBar&&null!=e.controlBar.getControlBarEl){var t=e.controlBar.getControlBarEl(),n=document.getElementsByClassName("embed-loom-logo")[0],r=n&&n.querySelector(":hover"),o=t&&t.querySelector(":hover");if(r||o)return}e.props.updateVideoPlayerMouseInactive()},1500)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.requestEnterFullScreen,r=t.requestLeaveFullScreen;e.inUploadMode&&!this.props.inUploadMode&&this.props.updateVideoPlayerSourceCreator(),n?Object(X.m)(this.player):r&&Object(X.c)()}},{key:"componentDidMount",value:function(){this.props.inUploadMode&&this.setState({wasUploadMode:!0}),document.addEventListener("keyup",this.onKeyUp,!1),document.addEventListener("keydown",this.onKeyDown,!1),document.addEventListener("mousemove",this.onMouseMove,!1),document.addEventListener("touchmove",this.onMouseMove,!1),document.addEventListener("mouseleave",this.props.updateVideoPlayerMouseInactive,!1);var e=this.props.fromPublicSharePage,t=e?window.top:window;t.addEventListener("message",this.handlePlayerControlEvents),e&&(t.addEventListener("keyup",this.onSharePageKeyUp),t.addEventListener("keydown",this.onSharePageKeyDown)),Object(X.j)(this.onFullscreenChange),this.setupMouseInactiveTimeout()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("touchmove",this.onMouseMove),document.removeEventListener("mouseleave",this.props.updateVideoPlayerMouseInactive);var e=this.props.fromPublicSharePage,t=e?window.top:window;t.removeEventListener("message",this.handlePlayerControlEvents),e&&(t.removeEventListener("keyup",this.onSharePageKeyUp),t.removeEventListener("keydown",this.onSharePageKeyDown)),Object(X.n)(this.onFullscreenChange)}},{key:"handlePlayerControlEvents",value:function(e){if(this.player){var t=e.data,n=void 0===t?{}:t,r=this.props.duration>=25?10:5;switch(n.type){case R.k:this.props.paused?this.props.requestVideoPlayerPlay():this.props.requestVideoPlayerPause();break;case R.i:this.props.requestVideoPlayerCurrentTime(this.props.currentTime-r);break;case R.j:this.props.requestVideoPlayerCurrentTime(this.props.currentTime+r);break;case R.o:this.props.requestVideoPlayerCurrentTime(this.props.currentTime+1);break;case R.n:this.props.requestVideoPlayerCurrentTime(this.props.currentTime-1);break;case R.p:this.props.fullScreen?this.props.requestVideoPlayerLeaveFullScreen():this.props.requestVideoPlayerEnterFullScreen();break;case R.r:this.props.volume+.1<=1&&this.props.requestVideoPlayerVolume(this.props.volume+.1);break;case R.q:this.props.volume-.1>=0&&this.props.requestVideoPlayerVolume(this.props.volume-.1)}}}}]),t}(a.Component)),$t=Object(u.connect)(function(e){var t=e.video_player,n=t.autoplay,r=t.duration,o=t.ended,a=t.password,i=t.paused,s=t.seeking,u=t.video,c=t.waiting,l=t.volume,d=t.current_time,p=t.flipped_camera,m=t.from_link_expand,f=t.from_public_share_page,h=t.full_screen,v=t.has_started,g=t.is_fetching,y=t.mouse_active,b=t.needs_password,w=t.parent_location,k=t.poster_url,P=t.request_current_time,_=t.request_enter_full_screen,E=t.request_leave_full_screen,M=t.request_mute,C=t.request_pause,T=t.request_play,x=t.request_playback_rate,O=t.request_unmute,j=t.request_volume,S=t.source_mime_type,V=t.source_url,R=e.share_video,L=R.cta_enabled,N=R.in_upload_mode,U=e.user,D=U.is_logged_in,q=U.is_logged_in_checked,W=e.trimming,B=W.current_trim_range,A=W.in_trim_mode,I=W.trim_ranges,F=u.id,H=(u.video_properties||{}).screen_type===z.a,X=Object(K.i)(u,e);return{isLoggedIn:D&&q,videoModel:u,autoplay:A||n&&!u.current_user_is_owner,ctaEnabled:L,currentTime:d,currentTrimRange:B,ctaFlowActive:e.editor.cta_flow,duration:r,ended:o,flippedCamera:p,fromLinkExpand:m,fromPublicSharePage:f,fullScreen:h,hasStarted:v,inTrimMode:A,isCameraRecording:H,isFetching:g,mouseActive:y,needsPassword:b,parentLocation:w,password:a,paused:i,posterUrl:k,requestCurrentTime:P,requestEnterFullScreen:_,requestLeaveFullScreen:E,requestMute:M,requestPause:C,requestPlay:T,requestPlaybackRate:x,requestUnmute:O,requestVolume:j,volume:l,seeking:s,sourceMimeType:S,sourceUrl:V,trimRanges:I,videoId:F,waiting:c,waitingForTrim:X,inUploadMode:N}},function(e){return{requestVideoPlayerCurrentTime:function(t){return e(Object(d.b)(t))},requestVideoPlayerPause:function(){return e(Object(d.f)())},requestVideoPlayerPlay:function(){return e(Object(d.g)())},requestVideoPlayerEnterFullScreen:function(){return e(Object(d.c)())},requestVideoPlayerLeaveFullScreen:function(){return e(Object(d.d)())},requestVideoPlayerVolume:function(t){return e(Object(d.j)(t))},trackVideoWatchDurationCreator:function(t){return e(Object(v.f)(t))},trackVideoViewCreator:function(){return e(Object(v.e)())},updateVideoPlayerBufferedParts:function(t){return e(Object(d.m)(t))},updateVideoPlayerCurrentTime:function(t){return e(Object(d.o)(t))},updateVideoPlayerDimensionsCreator:function(t,n){return e(Object(v.i)(t,n))},updateVideoPlayerDurationCreator:function(t){return e(Object(v.j)(t))},updateVideoPlayerEnded:function(){return e(Object(d.u)())},updateVideoPlayerEnterFullScreen:function(){return e(Object(d.v)())},updateVideoPlayerLeaveFullScreen:function(){return e(Object(d.A)())},updateVideoPlayerMouseActive:function(){return e(Object(d.C)())},updateVideoPlayerMouseInactive:function(){return e(Object(d.D)())},updateVideoPlayerMute:function(){return e(Object(d.E)())},updateVideoPlayerNotWaiting:function(){return e(Object(d.G)())},updateVideoPlayerPasswordCreator:function(t){return e(Object(v.k)(t))},updateVideoPlayerPaused:function(){return e(Object(d.J)())},updateVideoPlayerPlay:function(){return e(Object(d.K)())},updateVideoPlayerPlaying:function(){return e(Object(d.M)())},updateVideoPlayerPlaybackRate:function(t){return e(Object(d.L)(t))},updateVideoPlayerSourceCreator:function(){return e(Object(v.l)())},updateVideoPlayerSourceMp4Creator:function(){return e(Object(v.m)())},updateVideoPlayerSourceRawCreator:function(){return e(Object(v.n)())},updateVideoPlayerUnmute:function(){return e(Object(d.T)())},updateVideoPlayerVolume:function(t){return e(Object(d.V)(t))},updateVideoPlayerWaiting:function(){return e(Object(d.W)())}}})(Yt),Zt=(n(1871),new Error("invalid trim operation")),en=function(e){function t(){return E()(this,t),x()(this,j()(t).apply(this,arguments))}return V()(t,e),C()(t,[{key:"render",value:function(){return i.a.createElement($t,null)}},{key:"UNSAFE_componentWillMount",value:function(){this.updatePlayerFromURLParams(),this.listenForSharePageEvents()}},{key:"updatePlayerFromURLParams",value:function(){var e=this.props.fromPublicSharePage,t=!U.f&&(e||"1"===Object(k.d)("autoplay")||"true"===Object(k.d)("autoplay")||"true"===Object(k.d)("auto_play")||"1"===Object(k.d)("auto_play"));this.props.updateVideoPlayerAutoplay(t),("1"===Object(k.d)("muted")||"true"===Object(k.d)("muted"))&&this.props.requestVideoPlayerVolume(.3);var n=Object(k.d)("t").match(/((\d+)m)?((\d+)s?)$/)||[0,0,0,0],r=60*Number(n[2]||0)+Number(n[4]||0);r>0&&this.props.requestVideoPlayerCurrentTime(r)}},{key:"listenForSharePageEvents",value:function(){var e=this;this.props.fromPublicSharePage&&window.top.addEventListener("message",function(t){var n=t.data,r=void 0===n?{}:n;if(t.source!==window)switch(r.type){case R.b:e.props.updateVideoPlayerCommentMarkers(r.markers);break;case R.e:e.playVideoAtTimestamp(r.numSeconds);break;case R.f:e.props.requestVideoPlayerCurrentTime(r.numSeconds);break;case R.w:e.props.updateVideoPlayerFlippedCamera(r.flipped_camera);break;case R.y:e.handleTrimAction(r);break;case R.m:e.props.fetchVideoCreator(r.id)}},!1)}},{key:"togglePlay",value:function(){this.props.paused?this.props.requestVideoPlayerPlay():this.props.requestVideoPlayerPause()}},{key:"playVideoAtTimestamp",value:function(e){this.props.requestVideoPlayerCurrentTime(e),this.props.requestVideoPlayerPlay()}},{key:"handleTrimAction",value:function(e){var t=e.id,n=e.operation,r=e.trimBound,o=e.trimRange,a=e.trimRanges,i=e.updatedVideo,s=e.canEdit;switch(n){case L.a:return this.props.addTrimRangeCreator(o);case L.f:return this.props.removeTrimRangeCreator(t);case L.b:return this.props.enterTrimModeCreator(a);case L.c:return this.props.leaveTrimModeCreator(i);case L.e:return this.props.redoTrimOperationCreator();case L.j:return this.props.undoTrimOperationCreator();case L.l:return this.props.updateCurrentTrimRangeCreator(o);case L.k:return this.props.updateCanEditSelectedTrimCreator(s);case L.m:return this.props.updateSelectedTrimBoundCreator(r);case L.n:return this.props.updateSelectedTrimRangeCreator(o);case L.o:return this.props.updateTrimRangeCreator(o);default:b.b(Zt,"bad trim operation",{operation:n})}}}]),t}(a.Component),tn=Object(u.connect)(function(e){var t=e.video_player;return{paused:t.paused,fromPublicSharePage:t.from_public_share_page}},function(e){return{addTrimRangeCreator:function(t){return e(Object(N.a)(t,!1,!1))},enterTrimModeCreator:function(t){return e(Object(N.b)(t,!1))},leaveTrimModeCreator:function(t){return e(Object(N.c)(t,!1))},redoTrimOperationCreator:function(){return e(Object(N.e)(!1))},removeTrimRangeCreator:function(t){return e(Object(N.f)(t,!1,!1))},requestVideoPlayerCurrentTime:function(t){return e(Object(d.b)(t))},requestVideoPlayerPause:function(){return e(Object(d.f)())},requestVideoPlayerPlay:function(){return e(Object(d.g)())},requestVideoPlayerVolume:function(t){return e(Object(d.j)(t))},undoTrimOperationCreator:function(){return e(Object(N.g)(!1))},updateCurrentTrimRangeCreator:function(t){return e(Object(N.i)(t,!1))},updateCanEditSelectedTrimCreator:function(t){return e(Object(N.h)(t,!1))},updateSelectedTrimBoundCreator:function(t){return e(Object(N.j)(t,!1))},updateSelectedTrimRangeCreator:function(t){return e(Object(N.k)(t,!1))},updateTrimRangeCreator:function(t){return e(Object(N.l)(t,!1,!1))},updateVideoPlayerAutoplay:function(t){return e(Object(d.l)(t))},updateVideoPlayerCommentMarkers:function(t){return e(Object(d.n)(t))},updateVideoPlayerFlippedCamera:function(t){return e(Object(d.w)(t))},fetchVideoCreator:function(t){return e(Object(v.d)(t))}}})(en);o()(function(){var e=null;function t(){var t=[l.a];if(p.a){var n=b.a();t.push(Object(g.a)(n))}e=w.a(P.a,t)}var n=Object(k.g)(),r=n.fromPublicSharePage,o=n.parentLocation;try{r&&window.parent.reduxStore?e=window.parent.reduxStore:t()}catch(e){t()}var a="true"===Object(k.d)("from_link_expand"),c=window.decodeURIComponent(Object(k.d)("from_url")||""),_=document.getElementById("container");e.dispatch(Object(d.x)(a)),e.dispatch(Object(d.k)(r)),e.dispatch(Object(d.H)(o||c)),Object(s.render)(i.a.createElement(u.Provider,{store:e},i.a.createElement(tn,null)),_);var E=window.location.pathname.replace("".concat(f.k,"/"),""),M=Object(k.d)("referrer");y.e(m.jb,{from_public_share_page:r,from_link_expand:a,from_url:c,parent_location:o,passed_referrer:M,video_id:E},{integrations:{Intercom:!1}}),e.dispatch(Object(v.d)(E)),e.dispatch(Object(h.c)())})},250:function(e,t,n){},255:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=h(n(1824)),o=h(n(1829)),a=h(n(1830)),i=h(n(1831)),s=h(n(1832)),u=h(n(1833)),c=h(n(1834)),l=h(n(1835)),d=h(n(1836)),p=h(n(1837)),m=h(n(1838)),f=h(n(1839));function h(e){return e&&e.__esModule?e:{default:e}}var v=[i.default,a.default,s.default,c.default,l.default,d.default,p.default,m.default,f.default,u.default];t.default=(0,r.default)({prefixMap:o.default.prefixMap,plugins:v}),e.exports=t.default},298:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return a}),n.d(t,"a",function(){return i});var r="subscribe",o="trim-progress",a="upload-progress",i="/hermes/subscriptions"},343:function(e,t,n){"use strict";var r=n(4),o=n.n(r),a=n(5),i=n.n(a),s=n(6),u=n.n(s),c=n(7),l=n.n(c),d=n(8),p=n.n(d),m=n(1),f=n.n(m),h=n(2),v=n.n(h),g=n(0),y=n.n(g),b=n(10),w=n(138),k=n(16),P=n(17),_=(n(646),function(e){function t(){var e,n;o()(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=u()(this,(e=l()(t)).call.apply(e,[this].concat(a))),v()(f()(f()(n)),"onClickHandler",function(){var e=n.props,t=e.from_public_share_page,r=e.parent_location,o=e.videoId,a=e.ownerId,i=e.viewerIsOwner;P.h(k.bc,{from_public_share_page:t,parent_location:r,video_id:o,owner_id:a,owner_click:i})}),n}return p()(t,e),i()(t,[{key:"render",value:function(){var e,t,n,r=this.props,o=r.ctaMods,a=r.ctaUrl,i=r.ctaText;return o&&(e=o.color,t=o.background_color,n=o.border_radius),e=e||w.k,t=t||w.c,y.a.createElement("a",{className:"cta-button",target:a&&"_blank",rel:"noopener noreferrer",onClick:this.onClickHandler,style:{color:e,backgroundColor:t,borderRadius:"".concat(n,"px")},size:i?i.length:0,href:a&&(a.indexOf("http")>-1?a:"//".concat(a))},i||y.a.createElement("span",{className:"call-to-action-placeholder"},"Call-to-action"))}}]),t}(g.Component));t.a=Object(b.connect)(function(e){var t=e.share_video,n=t.cta_mods,r=t.cta_text,o=t.cta_url,a=e.video_player,i=a.from_public_share_page,s=a.parent_location,u=a.video||{},c=u.id,l=u.owner_id;return{ctaMods:n,ctaText:r,ctaUrl:o,from_public_share_page:i,parent_location:s,videoId:c,ownerId:l,viewerIsOwner:l===e.user.current.id}})(_)},410:function(e,t,n){},427:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"==typeof e&&r.test(e)};var r=/-webkit-|-moz-|-ms-/;e.exports=t.default},456:function(e,t,n){"use strict";n(81);var r=n(4),o=n.n(r),a=n(5),i=n.n(a),s=1e3,u=n(19),c="websocket bad close code",l=function(){function e(t){var n=this;o()(this,e),this.websocket=new WebSocket(t),this.messageQueue=[],this.closeCode=null,this.onErrorHandler=null,this.close=this.close.bind(this),this.websocket.onclose=function(e){var t=e.code;if(n.closeCode=t,t!==s){n.websocket=null;var r=new Error("".concat(c,": ").concat(t));u.b(r),null!=n.onErrorHandler&&n.onErrorHandler(r,{code:t})}}}return i()(e,[{key:"ready",value:function(e){var t=this;this.websocket.onopen=function(){e(),window.addEventListener("beforeunload",t.close),window.addEventListener("unload",t.close)}}},{key:"onError",value:function(e){this.onErrorHandler=e}},{key:"onMessage",value:function(e){this.websocket.onmessage=e}},{key:"closedFromServerError",value:function(){return 1006===this.closeCode||1001===this.closeCode}},{key:"send",value:function(e){var t=this;return null==this.websocket?console.error("tried sending message on closed websocket"):window.navigator.onLine?(this.messageQueue.length>0&&(console.log("draining websocket message queue"),this.messageQueue.forEach(function(e){t.websocket.send(e)}),this.messageQueue=[]),void this.websocket.send(e)):(this.messageQueue.push(e),void console.log("no network connection - queued ".concat(this.messageQueue.length),"message in buffer"))}},{key:"close",value:function(){null!=this.websocket&&(this.websocket.close(s),window.removeEventListener("beforeunload",this.close),window.removeEventListener("unload",this.close)),this.websocket=null}}]),e}();t.a=l},645:function(e,t,n){},646:function(e,t,n){},69:function(e,t,n){e.exports=n.p+"img/video-player/love@2x-c6bba2d6f6f66a2ed974a030fd8bd798.png"},72:function(e,t,n){e.exports=n.p+"img/video-player/joy@2x-11d4b549a1118403a7cfe7e764f4f4be.png"},73:function(e,t,n){e.exports=n.p+"img/video-player/wow@2x-458e8d72d01c203bfc037b1ee25d3c04.png"},74:function(e,t,n){e.exports=n.p+"img/video-player/yay@2x-eeda37feb80539bbec752509dfb24ea2.png"},82:function(e,t,n){e.exports=n.p+"img/video-player/down-5a09f7dac2d496771bc94e29f9330bc7.png"},83:function(e,t,n){e.exports=n.p+"img/video-player/down@2x-8d91e71e400c4f9af7f1ae78a655a74a.png"},84:function(e,t,n){e.exports=n.p+"img/video-player/down@3x-efcd2923ec49f5f6eb3e6d1f62e59467.png"},85:function(e,t,n){e.exports=n.p+"img/video-player/gradient-7b63347e5bc068ac6d57c3dd099bf8d3.png"},86:function(e,t,n){e.exports=n.p+"img/video-player/joy-c08add9f5acc72aec484d6364093e283.png"},87:function(e,t,n){e.exports=n.p+"img/video-player/joy@3x-f71b6973feacd98cfb4c9b2805d3aa1b.png"},878:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.exports=t.default},88:function(e,t,n){e.exports=n.p+"img/video-player/love-2644b32b35c2cca9c34e0068194a847f.png"},89:function(e,t,n){e.exports=n.p+"img/video-player/love@3x-63e78bc76fac49c7c1469396a4714aa6.png"},90:function(e,t,n){e.exports=n.p+"img/video-player/nervous-c8520d3de7e6697f3866d2bab5ec0ef2.png"},91:function(e,t,n){e.exports=n.p+"img/video-player/nervous@2x-8768995a5f359ab90b608317b1f5bc61.png"},92:function(e,t,n){e.exports=n.p+"img/video-player/nervous@3x-d7ee9f7129d6cdadc710a064b4d2e388.png"},93:function(e,t,n){e.exports=n.p+"img/video-player/up-7e8cc17ac8d1317c3011e04edba89f53.png"},94:function(e,t,n){e.exports=n.p+"img/video-player/up@2x-66bb68fe8ee746f22a18f4cd4c384595.png"},95:function(e,t,n){e.exports=n.p+"img/video-player/up@3x-b5e6d83143cd2884642e77992f390a06.png"},951:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),i=c(a),s=c(n(22)),u=c(n(44));function c(e){return e&&e.__esModule?e:{default:e}}var l={title:/<title>.*<\/title>/gi,desc:/<desc>.*<\/desc>/gi,comment:/<!--.*-->/gi,defs:/<defs>.*<\/defs>/gi,width:/ +width="\d+(\.\d+)?(px)?"/gi,height:/ +height="\d+(\.\d+)?(px)?"/gi,fill:/ +fill="(none|#[0-9a-f]+)"/gi,sketchMSShapeGroup:/ +sketch:type="MSShapeGroup"/gi,sketchMSPage:/ +sketch:type="MSPage"/gi,sketchMSLayerGroup:/ +sketch:type="MSLayerGroup"/gi},d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"render",value:function(){var e=this.props,n=e.className,o=e.component,a=e.svg,s=e.fill,c=e.width,d=e.accessibilityLabel,p=e.accessibilityDesc,m=e.classSuffix,f=e.cleanupExceptions,h=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["className","component","svg","fill","width","accessibilityLabel","accessibilityDesc","classSuffix","cleanupExceptions"]),v=this.props,g=v.cleanup,y=v.height;(!0===g||0===g.length&&f.length>0)&&(g=Object.keys(l)),g=g.filter(function(e){return!(f.indexOf(e)>-1)}),c&&void 0===y&&(y=c),delete h.cleanup,delete h.height;var b=(0,u.default)(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({SVGInline:!0,"SVGInline--cleaned":g.length},n,n)),w=b.split(" ").join(m+" ")+m,k=t.cleanupSvg(a,g).replace(/<svg/,'<svg class="'+w+'"'+(s?' fill="'+s+'"':"")+(c||y?' style="'+(c?"width: "+c+";":"")+(y?"height: "+y+";":"")+'"':"")),P=void 0;if(p){var _=(P=/<svg(.|\n|\r\n)*?>/.exec(k)).index+P[0].length;k=k.substr(0,_)+"<desc>"+p+"</desc>"+k.substr(_)}if(d){var E=(P=P||/<svg(.|\n|\r\n)*?>/.exec(k)).index+P[0].length-1,M="SVGInline-"+t.idCount+++"-title";k=k.substr(0,E)+' role="img" aria-labelledby="'+M+'"'+k.substr(E,1)+'<title id="'+M+'">'+d+"</title>"+k.substr(E+1)}return i.default.createElement(o,r({},h,{className:b,dangerouslySetInnerHTML:{__html:k}}))}}]),t}();d.propTypes={className:s.default.string,classSuffix:s.default.string,component:s.default.oneOfType([s.default.string,s.default.func]),svg:s.default.string.isRequired,fill:s.default.string,cleanup:s.default.oneOfType([s.default.bool,s.default.array]),cleanupExceptions:s.default.array,width:s.default.string,height:s.default.string,accessibilityLabel:s.default.string,accessibilityDesc:s.default.string},d.defaultProps={component:"span",classSuffix:"-svg",cleanup:[],cleanupExceptions:[]},d.idCount=0,d.cleanupSvg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object.keys(l).filter(function(e){return t.indexOf(e)>-1}).reduce(function(e,t){return e.replace(l[t],"")},e).trim()},t.default=d},952:function(e,t,n){e.exports=n.p+"img/video-player/loom-logo-mark-white-dropshadow-a409be464e87446262e3d2cff3e6fb22.svg"},96:function(e,t,n){e.exports=n.p+"img/video-player/wow-fe3d11c3629df74654a7c5233e8160b6.png"},97:function(e,t,n){e.exports=n.p+"img/video-player/wow@3x-c1c755253db9c69ab6de7460155d4fa1.png"},98:function(e,t,n){e.exports=n.p+"img/video-player/yay-49f869a60a1f56f41b4ba629ae1c052e.png"},99:function(e,t,n){e.exports=n.p+"img/video-player/yay@3x-e00d4f8156d202e4bea6a5d3811db794.png"}});
//# sourceMappingURL=embed-video-5317043d9fedaa46b49b932a7e03aed4.js.map